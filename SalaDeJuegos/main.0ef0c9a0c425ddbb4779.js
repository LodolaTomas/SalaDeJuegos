(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=Object(r.e)(h.value,2),d=f[1];u===this.normalizeInstanceIdentifier(f[0])&&d.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return c},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"4I5i":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})()},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},ESM5:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("fXoL"),i=n("I/3d"),o=n("tk/3");let s=(()=>{class t{constructor(t,e){this.bd=t,this.http=e,this.rutaDeLaColeccion="/usuarios",this.referenciaBd=t,this.referenciaAlaColeccion=t.collection(this.rutaDeLaColeccion)}Crear(t){let e=this.bd.createId();return t.id=e,this.referenciaAlaColeccion.add(Object.assign({},t))}TraerTodos(){return this.referenciaAlaColeccion}BuscarUsuario(t){return this.referenciaBd.collection(this.rutaDeLaColeccion,e=>e.where("correo","==",t.correo).where("clave","==",t.clave))}getProfileGitHub(){return this.http.get("https://api.github.com/users/LodolaTomas")}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(i.a),r.Rb(o.a))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},GyhO:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("LRne"),i=n("bHdf");function o(...t){return Object(i.a)(1)(Object(r.a)(...t))}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},"I/3d":function(t,e,n){"use strict";n.d(e,"a",function(){return bp}),n.d(e,"b",function(){return wp});var r=n("fXoL"),i=n("D0XW"),o=n("HDdC"),s=n("Cfvw"),a=n("LRne"),u=n("JX91"),c=n("7o/Q");function l(){return t=>t.lift(new h)}class h{call(t,e){return e.subscribe(new f(t))}}class f extends c.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var d=n("lJxs"),p=n("Kqap");class g{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new m(t,this.compare,this.keySelector))}}class m extends c.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var y=n("pLZG"),v=n("pxpQ"),b=n("spgP"),w=n("ofXK"),_=n("Jgta"),O=n("zIRd"),E=n("qOnz"),S=n("q/0M"),T=function(t,e){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function I(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var C,x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},j=j||{},A=x||self;function k(){}function N(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function R(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var D="closure_uid_"+(1e9*Math.random()>>>0),P=0;function L(t,e,n){return t.call.apply(t.bind,arguments)}function M(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function F(t,e,n){return(F=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?L:M).apply(null,arguments)}function U(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function V(){return Date.now()}function q(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function H(){this.j=this.j,this.i=this.i}H.prototype.j=!1,H.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,D)&&t[D]||(t[D]=++P)}(this)},H.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function G(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function W(t){return/^[\s\xa0]*$/.test(t)}var Q,$=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function X(t,e){return-1!=t.indexOf(e)}function Y(t,e){return t<e?-1:t>e?1:0}t:{var J=A.navigator;if(J){var Z=J.userAgent;if(Z){Q=Z;break t}}Q=""}function tt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function et(t){var e={};for(var n in t)e[n]=t[n];return e}var nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<nt.length;o++)n=nt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function it(t){return it[" "](t),t}it[" "]=k;var ot,st,at=X(Q,"Opera"),ut=X(Q,"Trident")||X(Q,"MSIE"),ct=X(Q,"Edge"),lt=ct||ut,ht=X(Q,"Gecko")&&!(X(Q.toLowerCase(),"webkit")&&!X(Q,"Edge"))&&!(X(Q,"Trident")||X(Q,"MSIE"))&&!X(Q,"Edge"),ft=X(Q.toLowerCase(),"webkit")&&!X(Q,"Edge");function dt(){var t=A.document;return t?t.documentMode:void 0}t:{var pt="",gt=(st=Q,ht?/rv:([^\);]+)(\)|;)/.exec(st):ct?/Edge\/([\d\.]+)/.exec(st):ut?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(st):ft?/WebKit\/(\S+)/.exec(st):at?/(?:Version)[ \/]?(\S+)/.exec(st):void 0);if(gt&&(pt=gt?gt[1]:""),ut){var mt=dt();if(null!=mt&&mt>parseFloat(pt)){ot=String(mt);break t}}ot=pt}var yt={};function vt(t){return function(t,e){var n=yt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=$(String(ot)).split("."),r=$(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Y(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Y(0==s[2].length,0==a[2].length)||Y(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var bt=A.document&&ut&&(dt()||parseInt(ot,10))||void 0,wt=!ut||9<=Number(bt),_t=ut&&!vt("9"),Ot=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{A.addEventListener("test",k,e),A.removeEventListener("test",k,e)}catch(n){}return t}();function Et(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function St(t,e){if(Et.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ht){t:{try{it(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Tt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Et.prototype.b=function(){this.defaultPrevented=!0},q(St,Et);var Tt={2:"touch",3:"pen",4:"mouse"};St.prototype.b=function(){St.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,_t)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var It="closure_listenable_"+(1e6*Math.random()|0),Ct=0;function xt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ct,this.Y=this.Z=!1}function jt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function At(t){this.src=t,this.a={},this.b=0}function kt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=B(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(jt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Nt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}At.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Nt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new xt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Rt="closure_lm_"+(1e6*Math.random()|0),Dt={};function Pt(t,e,n,r,i){if(r&&r.once)return Mt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pt(t,e[o],n,r,i);return null}return n=Gt(n),t&&t[It]?t.va(e,n,R(r)?!!r.capture:!!r,i):Lt(t,e,n,!1,r,i)}function Lt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=R(i)?!!i.capture:!!i;if(s&&!wt)return null;var a=Bt(t);if(a||(t[Rt]=a=new At(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ht,e=wt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ot||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Vt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Mt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Mt(t,e[o],n,r,i);return null}return n=Gt(n),t&&t[It]?t.wa(e,n,R(r)?!!r.capture:!!r,i):Lt(t,e,n,!0,r,i)}function Ft(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ft(t,e[o],n,r,i);else r=R(r)?!!r.capture:!!r,n=Gt(n),t&&t[It]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Nt(o=t.a[e],n,r,i))&&(jt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Bt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Nt(e,n,r,i)),(n=-1<t?e[t]:null)&&Ut(n))}function Ut(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[It])kt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Vt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Bt(e))?(kt(n,t),0==n.b&&(n.src=null,e[Rt]=null)):jt(t)}}}function Vt(t){return t in Dt?Dt[t]:Dt[t]="on"+t}function qt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ut(t),n.call(r,e)}function Ht(t,e){if(t.Y)return!0;if(!wt){if(!e)t:{e=["window","event"];for(var n=A,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return qt(t,e=new St(e,this))}return qt(t,new St(e,this))}function Bt(t){return(t=t[Rt])instanceof At?t:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gt(t){return"function"==typeof t?t:(t[zt]||(t[zt]=function(e){return t.handleEvent(e)}),t[zt])}function Kt(){H.call(this),this.c=new At(this),this.J=this,this.C=null}function Wt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Et(e,t);else if(e instanceof Et)e.target=e.target||t;else{var i=e;rt(e=new Et(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Qt(s,r,!0,e)&&i}if(i=Qt(s=e.a=t,r,!0,e)&&i,i=Qt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Qt(s=e.a=n[o],r,!1,e)&&i}function Qt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&kt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}q(Kt,H),Kt.prototype[It]=!0,(C=Kt.prototype).addEventListener=function(t,e,n,r){Pt(this,t,e,n,r)},C.removeEventListener=function(t,e,n,r){Ft(this,t,e,n,r)},C.G=function(){if(Kt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)jt(n[r]);delete e.a[t],e.b--}}this.C=null},C.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},C.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var $t=A.JSON.stringify;function Xt(){this.b=this.a=null}var Yt,Jt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new te},function(t){t.reset()});function Zt(){var t=ie,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function te(){this.next=this.b=this.a=null}function ee(t){A.setTimeout(function(){throw t},0)}function ne(t,e){Yt||function(){var t=A.Promise.resolve(void 0);Yt=function(){t.then(oe)}}(),re||(Yt(),re=!0),ie.add(t,e)}Xt.prototype.add=function(t,e){var n=Jt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},te.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},te.prototype.reset=function(){this.next=this.b=this.a=null};var re=!1,ie=new Xt;function oe(){for(var t;t=Zt();){try{t.a.call(t.b)}catch(n){ee(n)}var e=Jt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}re=!1}function se(t,e){Kt.call(this),this.b=t||1,this.a=e||A,this.f=F(this.Za,this),this.g=V()}function ae(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ue(t,e,n){if("function"==typeof t)n&&(t=F(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=F(t.handleEvent,t)}return 2147483647<Number(e)?-1:A.setTimeout(t,e||0)}function ce(t){t.a=ue(function(){t.a=null,t.c&&(t.c=!1,ce(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}q(se,Kt),(C=se.prototype).aa=!1,C.M=null,C.Za=function(){if(this.aa){var t=V()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Wt(this,"tick"),this.aa&&(ae(this),this.start()))}},C.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=V())},C.G=function(){se.X.G.call(this),ae(this),delete this.a};var le=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}T(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ce(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(A.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(H);function he(t){H.call(this),this.b=t,this.a={}}q(he,H);var fe=[];function de(t,e,n,r){Array.isArray(n)||(n&&(fe[0]=n.toString()),n=fe);for(var i=0;i<n.length;i++){var o=Pt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function pe(t){tt(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ut(t)},t),t.a={}}function ge(){this.a=!0}function me(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return $t(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}he.prototype.G=function(){he.X.G.call(this),pe(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ge.prototype.info=function(){};var ye={},ve=null;function be(){return ve=ve||new Kt}function we(t){Et.call(this,ye.Fa,t)}function _e(t){var e=be();Wt(e,new we(e,t))}function Oe(t,e){Et.call(this,ye.STAT_EVENT,t),this.stat=e}function Ee(t){var e=be();Wt(e,new Oe(e,t))}function Se(t){Et.call(this,ye.Ga,t)}function Te(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return A.setTimeout(function(){t()},e)}ye.Fa="serverreachability",q(we,Et),ye.STAT_EVENT="statevent",q(Oe,Et),ye.Ga="timingevent",q(Se,Et);var Ie={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ce={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function xe(){}function je(){}xe.prototype.a=null;var Ae,ke={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ne(){Et.call(this,"d")}function Re(){Et.call(this,"c")}function De(){}function Pe(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new he(this),this.P=Le,this.R=new se(t=lt?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}q(Ne,Et),q(Re,Et),q(De,xe),Ae=new De;var Le=45e3,Me={},Fe={};function Ue(t,e,n){t.H=1,t.i=un(en(e)),t.j=n,t.I=!0,Ve(t,null)}function Ve(t,e){t.u=V(),Be(t),t.l=en(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),_n(n.b,"t",r),t.D=0,t.a=gr(t.g,t.g.C?e:null),0<t.O&&(t.F=new le(F(t.Ca,t,t.a),t.O)),de(t.J,t.a,"readystatechange",t.Xa),e=t.B?et(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),_e(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function qe(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=He(t,n);if(i==Fe){4==e&&(t.h=4,Ee(14),r=!1),me(t.c,t.f,null,"[Incomplete Response]");break}if(i==Me){t.h=4,Ee(15),me(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}me(t.c,t.f,i,null),Qe(t,i)}4==e&&0==n.length&&(t.h=1,Ee(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ar(e),e.F=!0,Ee(11))):(me(t.c,t.f,n,"[Invalid Chunked Response]"),We(t),Ke(t))}function He(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Fe:(n=Number(e.substring(n,r)),isNaN(n)?Me:(r+=1)+n>e.length?Fe:(e=e.substr(r,n),t.D=r+n,e))}function Be(t){t.T=V()+t.P,ze(t,t.P)}function ze(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Te(F(t.Va,t),e)}function Ge(t){t.o&&(A.clearTimeout(t.o),t.o=null)}function Ke(t){0==t.g.v||t.A||lr(t.g,t)}function We(t){Ge(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ae(t.R),pe(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Qe(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||xn(n.b,t)))if(n.I=t.N,!t.C&&xn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Zf){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;cr(n),Jn(n)}sr(n),Ee(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Te(F(n.Sa,n),6e3));if(1>=Cn(n.b)&&n.ea){try{n.ea()}catch(Zf){}n.ea=void 0}}else fr(n,11)}else if((t.C||n.a==t)&&cr(n),!W(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(X(l,"spdy")||X(l,"quic")||X(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(jn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,an(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=V()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=pr(u,u.C?u.ga:null,u.fa),d.C){An(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Ge(p),Be(p)),u.a=d}else or(u);0<n.g.length&&er(n)}else"stop"!=i[0]&&"close"!=i[0]||fr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?fr(n,7):Yn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);_e(4)}catch(Zf){}}function $e(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(N(t)||"string"==typeof t)z(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(N(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(N(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Xe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Xe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ye(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Je(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Je(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Je(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(C=Pe.prototype).setTimeout=function(t){this.P=t},C.Xa=function(t){t=t.target;var e=this.F;e&&3==Wn(t)?e.f():this.Ca(t)},C.Ca=function(t){try{if(t==this.a)t:{var e=Wn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!lt&&!this.a.$())){this.A||4!=e||7==n||_e(8==n||0>=r?3:2),Ge(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Ee(12),We(this),Ke(this);break t}me(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Qe(this,u)}this.I?(qe(this,e,o),lt&&this.b&&3==e&&(de(this.J,this.R,"tick",this.Wa),this.R.start())):(me(this.c,this.f,o,null),Qe(this,o)),4==e&&We(this),this.b&&!this.A&&(4==e?lr(this.g,this):(this.b=!1,Be(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Ee(12)):(this.h=0,Ee(13)),We(this),Ke(this)}}}catch(c){}},C.Wa=function(){if(this.a){var t=Wn(this.a),e=this.a.$();this.D<e.length&&(Ge(this),qe(this,t,e),this.b&&4!=t&&Be(this))}},C.cancel=function(){this.A=!0,We(this)},C.Va=function(){this.o=null;var t=V();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(_e(3),Ee(17)),We(this),this.h=2,Ke(this)):ze(this,this.T-t)},(C=Xe.prototype).K=function(){Ye(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},C.L=function(){return Ye(this),this.a.concat()},C.get=function(t,e){return Je(this.b,t)?this.b[t]:e},C.set=function(t,e){Je(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},C.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ze=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof tn){this.a=void 0!==e?e:t.a,nn(this,t.f),this.j=t.j,rn(this,t.c),on(this,t.h),this.g=t.g,e=t.b;var n=new yn;n.c=e.c,e.a&&(n.a=new Xe(e.a),n.b=e.b),sn(this,n),this.i=t.i}else t&&(n=String(t).match(Ze))?(this.a=!!e,nn(this,n[1]||"",!0),this.j=cn(n[2]||""),rn(this,n[3]||"",!0),on(this,n[4]),this.g=cn(n[5]||"",!0),sn(this,n[6]||"",!0),this.i=cn(n[7]||"")):(this.a=!!e,this.b=new yn(null,this.a))}function en(t){return new tn(t)}function nn(t,e,n){t.f=n?cn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function rn(t,e,n){t.c=n?cn(e,!0):e}function on(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function sn(t,e,n){e instanceof yn?(t.b=e,function(t,e){e&&!t.f&&(vn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(bn(this,e),_n(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=ln(e,gn)),t.b=new yn(e,t.a))}function an(t,e,n){t.b.set(e,n)}function un(t){return an(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^V()).toString(36)),t}function cn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ln(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}tn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ln(e,fn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ln(e,fn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ln(n,"/"==n.charAt(0)?pn:dn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ln(n,mn)),t.join("")};var fn=/[#\/\?@]/g,dn=/[#\?:]/g,pn=/[#\?]/g,gn=/[#\?@]/g,mn=/#/g;function yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function vn(t){t.a||(t.a=new Xe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function bn(t,e){vn(t),e=On(t,e),Je(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Je((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ye(t)))}function wn(t,e){return vn(t),e=On(t,e),Je(t.a.b,e)}function _n(t,e,n){bn(t,e),0<n.length&&(t.c=null,t.a.set(On(t,e),K(n)),t.b+=n.length)}function On(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(C=yn.prototype).add=function(t,e){vn(this),this.c=null,t=On(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},C.forEach=function(t,e){vn(this),this.a.forEach(function(n,r){z(n,function(n){t.call(e,n,r,this)},this)},this)},C.L=function(){vn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},C.K=function(t){vn(this);var e=[];if("string"==typeof t)wn(this,t)&&(e=G(e,this.a.get(On(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},C.set=function(t,e){return vn(this),this.c=null,wn(this,t=On(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},C.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},C.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var En=function(){return function(t,e){this.b=t,this.a=e}}();function Sn(t){this.g=t||Tn,t=A.PerformanceNavigationTiming?0<(t=A.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(A.ia&&A.ia.ya&&A.ia.ya()&&A.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Tn=10;function In(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Cn(t){return t.b?1:t.a?t.a.size:0}function xn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function jn(t,e){t.a?t.a.add(e):t.b=e}function An(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function kn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=I(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return K(t.c)}function Nn(){}function Rn(){this.a=new Nn}function Dn(t,e,n){var r=n||"";try{$e(t,function(t,n){var i=t;R(t)&&(i=$t(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Dd){throw e.push(r+"type="+encodeURIComponent("_badmap")),Dd}}function Pn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Sn.prototype.cancel=function(){var t,e;if(this.c=kn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=I(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Nn.prototype.stringify=function(t){return A.JSON.stringify(t,void 0)},Nn.prototype.parse=function(t){return A.JSON.parse(t,void 0)};var Ln=A.JSON.parse;function Mn(t){Kt.call(this),this.headers=new Xe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Fn,this.D=this.F=!1}q(Mn,Kt);var Fn="",Un=/^https?$/i,Vn=["POST","PUT"];function qn(t){return"content-type"==t.toLowerCase()}function Hn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Bn(t),Gn(t)}function Bn(t){t.u||(t.u=!0,Wt(t,"complete"),Wt(t,"error"))}function zn(t){if(t.b&&void 0!==j&&(!t.s[1]||4!=Wn(t)||2!=t.W()))if(t.l&&4==Wn(t))ue(t.za,0,t);else if(Wt(t,"readystatechange"),4==Wn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ze)[1]||null;if(!o&&A.self&&A.self.location){var s=A.self.location.protocol;o=s.substr(0,s.length-1)}i=!Un.test(o?o.toLowerCase():"")}e=i}if(e)Wt(t,"complete"),Wt(t,"success");else{t.h=6;try{var a=2<Wn(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Bn(t)}}finally{Gn(t)}}}function Gn(t,e){if(t.a){Kn(t);var n=t.a,r=t.s[0]?k:null;t.a=null,t.s=null,e||Wt(t,"ready");try{n.onreadystatechange=r}catch(Dd){}}}function Kn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(A.clearTimeout(t.m),t.m=null)}function Wn(t){return t.a?t.a.readyState:0}function Qn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return tt(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):an(t,e,n))}function $n(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Xn(t){this.pa=0,this.g=[],this.c=new ge,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=$n("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=$n("baseRetryDelayMs",5e3,t),this.Ra=$n("retryDelaySeedMs",1e4,t),this.Ma=$n("forwardChannelMaxRetries",2,t),this.ma=$n("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Sn(t&&t.concurrentRequestLimit),this.ka=new Rn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Yn(t){if(Zn(t),3==t.v){var e=t.R++,n=en(t.B);an(n,"SID",t.J),an(n,"RID",e),an(n,"TYPE","terminate"),rr(t,n),(e=new Pe(t,t.c,e,void 0)).H=2,e.i=un(en(n)),n=!1,A.navigator&&A.navigator.sendBeacon&&(n=A.navigator.sendBeacon(e.i.toString(),"")),!n&&A.Image&&((new Image).src=e.i,n=!0),n||(e.a=gr(e.g,null),e.a.ba(e.i)),e.u=V(),Be(e)}dr(t)}function Jn(t){t.a&&(ar(t),t.a.cancel(),t.a=null)}function Zn(t){Jn(t),t.j&&(A.clearTimeout(t.j),t.j=null),cr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&A.clearTimeout(t.h),t.h=null)}function tr(t,e){t.g.push(new En(t.Oa++,e)),3==t.v&&er(t)}function er(t){In(t.b)||t.h||(t.h=!0,ne(t.Ba,t),t.u=0)}function nr(t,e){var n;n=e?e.f:t.R++;var r=en(t.B);an(r,"SID",t.J),an(r,"RID",n),an(r,"AID",t.P),rr(t,r),t.i&&t.l&&Qn(r,t.i,t.l),n=new Pe(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ir(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),jn(t.b,n),Ue(n,r,e)}function rr(t,e){t.f&&$e({},function(t,n){an(e,n,t)})}function ir(t,e,n){n=Math.min(t.g.length,n);var r=t.f?F(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Dn(l,s,"req"+c+"_")}catch(Wr){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function or(t){t.a||t.j||(t.T=1,ne(t.Aa,t),t.o=0)}function sr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Te(F(t.Aa,t),hr(t,t.o)),t.o++,0))}function ar(t){null!=t.s&&(A.clearTimeout(t.s),t.s=null)}function ur(t){t.a=new Pe(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=en(t.la);an(e,"RID","rpc"),an(e,"SID",t.J),an(e,"CI",t.H?"0":"1"),an(e,"AID",t.P),rr(t,e),an(e,"TYPE","xmlhttp"),t.i&&t.l&&Qn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=un(en(e)),n.j=null,n.I=!0,Ve(n,t)}function cr(t){null!=t.m&&(A.clearTimeout(t.m),t.m=null)}function lr(t,e){var n=null;if(t.a==e){cr(t),ar(t),t.a=null;var r=2}else{if(!xn(t.b,e))return;n=e.s,An(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=V()-e.u;var i=t.u;Wt(r=be(),new Se(r,n,e,i)),er(t)}else or(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Cn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Te(F(t.Ba,t,e),hr(t,t.u)),t.u++,0)))}(t,e)||2==r&&sr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:fr(t,5);break;case 4:fr(t,10);break;case 3:fr(t,6);break;default:fr(t,2)}}function hr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function fr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=F(t.Ya,t);n||(n=new tn("//www.google.com/images/cleardot.gif"),A.location&&"http"==A.location.protocol||nn(n,"https"),un(n)),function(t,e){var n=new ge;if(A.Image){var r=new Image;r.onload=U(Pn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=U(Pn,n,r,"TestLoadImage: error",!1,e),r.onabort=U(Pn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=U(Pn,n,r,"TestLoadImage: timeout",!1,e),A.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ee(2);t.v=0,t.f&&t.f.ra(e),dr(t),Zn(t)}function dr(t){t.v=0,t.I=-1,t.f&&(0==kn(t.b).length&&0==t.g.length||(t.b.c.length=0,K(t.g),t.g.length=0),t.f.qa())}function pr(t,e,n){var r=function(t){return t instanceof tn?en(t):new tn(t,void 0)}(n);if(""!=r.c)e&&rn(r,e+"."+r.c),on(r,r.h);else{var i=A.location;r=function(t,e,n,r){var i=new tn(null,void 0);return t&&nn(i,t),e&&rn(i,e),n&&on(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&tt(t.V,function(t,e){an(r,e,t)}),n=t.na,(e=t.A)&&n&&an(r,e,n),an(r,"VER",t.ha),rr(t,r),r}function gr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mn(t.Na)).F=t.C,e}function mr(){}function yr(){if(ut&&!(10<=Number(bt)))throw Error("Environmental error: no available transport.")}function vr(t,e){Kt.call(this),this.a=new Xn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!W(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!W(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new _r(this)}function br(t){Ne.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function wr(){Re.call(this),this.status=1}function _r(t){this.a=t}(C=Mn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Ae),this.a.onreadystatechange=F(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Hn(this,o)}t=n||"";var i=new Xe(this.headers);r&&$e(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=qn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=A.FormData&&t instanceof A.FormData,!(0<=B(Vn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Kn(this),0<this.o&&((this.D=function(t){return ut&&vt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=F(this.xa,this)):this.m=ue(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Hn(this,o)}},C.xa=function(){void 0!==j&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Wt(this,"timeout"),this.abort(8))},C.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Wt(this,"complete"),Wt(this,"abort"),Gn(this))},C.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Gn(this,!0)),Mn.X.G.call(this)},C.za=function(){this.j||(this.A||this.l||this.g?zn(this):this.Ua())},C.Ua=function(){zn(this)},C.W=function(){try{return 2<Wn(this)?this.a.status:-1}catch(st){return-1}},C.$=function(){try{return this.a?this.a.responseText:""}catch(st){return""}},C.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ln(e)}},C.ua=function(){return this.h},C.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(C=Xn.prototype).ha=8,C.v=1,C.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Pe(this,this.c,t,void 0),r=this.l;if(this.O&&(r?rt(r=et(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ir(this,n,e),an(i=en(this.B),"RID",t),an(i,"CVER",22),this.A&&an(i,"X-HTTP-Session-Id",this.A),rr(this,i),this.i&&r&&Qn(i,this.i,r),jn(this.b,n),this.Ia&&an(i,"TYPE","init"),this.da?(an(i,"$req",e),an(i,"SID","null"),n.U=!0,Ue(n,i,null)):Ue(n,i,e),this.v=2}}else 3==this.v&&(t?nr(this,t):0==this.g.length||In(this.b)||nr(this))},C.Aa=function(){if(this.j=null,ur(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Te(F(this.Ta,this),t)}},C.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ee(10),Jn(this),ur(this))},C.Sa=function(){null!=this.m&&(this.m=null,Jn(this),sr(this),Ee(19))},C.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Ee(2)):(this.c.info("Failed to ping google.com"),Ee(1))},(C=mr.prototype).ta=function(){},C.sa=function(){},C.ra=function(){},C.qa=function(){},C.Ja=function(){},yr.prototype.a=function(t,e){return new vr(t,e)},q(vr,Kt),vr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Ee(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=pr(t,null,t.fa),er(t)},vr.prototype.close=function(){Yn(this.a)},vr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,tr(this.a,e)}else this.l?((e={}).__data__=$t(t),tr(this.a,e)):tr(this.a,t)},vr.prototype.G=function(){this.a.f=null,delete this.f,Yn(this.a),delete this.a,vr.X.G.call(this)},q(br,Ne),q(wr,Re),q(_r,mr),_r.prototype.ta=function(){Wt(this.a,"a")},_r.prototype.sa=function(t){Wt(this.a,new br(t))},_r.prototype.ra=function(t){Wt(this.a,new wr(t))},_r.prototype.qa=function(){Wt(this.a,"b")},yr.prototype.createWebChannel=yr.prototype.a,vr.prototype.send=vr.prototype.h,vr.prototype.open=vr.prototype.g,vr.prototype.close=vr.prototype.close,Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,Ce.COMPLETE="complete",je.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",Kt.prototype.listen=Kt.prototype.va,Mn.prototype.listenOnce=Mn.prototype.wa,Mn.prototype.getLastError=Mn.prototype.Qa,Mn.prototype.getLastErrorCode=Mn.prototype.ua,Mn.prototype.getStatus=Mn.prototype.W,Mn.prototype.getResponseJson=Mn.prototype.Pa,Mn.prototype.getResponseText=Mn.prototype.$,Mn.prototype.send=Mn.prototype.ba;var Or=Ie,Er=Ce,Sr=ye,Tr=je,Ir=Mn,Cr=n("mrSG"),xr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();xr.o=-1;var jr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ar=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Cr.c)(e,t),e}(Error),kr=new S.b("@firebase/firestore");function Nr(){return kr.logLevel}function Rr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kr.logLevel<=S.a.DEBUG){var r=e.map(Lr);kr.debug.apply(kr,Object(Cr.f)(["Firestore (8.4.0): "+t],r))}}function Dr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kr.logLevel<=S.a.ERROR){var r=e.map(Lr);kr.error.apply(kr,Object(Cr.f)(["Firestore (8.4.0): "+t],r))}}function Pr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(kr.logLevel<=S.a.WARN){var r=e.map(Lr);kr.warn.apply(kr,Object(Cr.f)(["Firestore (8.4.0): "+t],r))}}function Lr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Dd){return t}}function Mr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.0) INTERNAL ASSERTION FAILED: "+t;throw Dr(e),new Error(e)}function Fr(t,e){t||Mr()}function Ur(t,e){return t}function Vr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var qr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Vr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Hr(t,e){return t<e?-1:t>e?1:0}function Br(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function zr(t){return t+"\0"}var Gr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ar(jr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ar(jr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ar(jr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ar(jr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Hr(this.nanoseconds,t.nanoseconds):Hr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Kr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Gr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Wr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $r(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Mr(),void 0===n?n=t.length-e:n>t.length-e&&Mr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Cr.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ar(jr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Xr),Jr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Cr.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Jr.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ar(jr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ar(jr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ar(jr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ar(jr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Xr),ti=function(){function t(t){this.fields=t,t.sort(Zr.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Br(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ei=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Hr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ei.EMPTY_BYTE_STRING=new ei("");var ni=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(t){if(Fr(!!t),"string"==typeof t){var e=0,n=ni.exec(t);if(Fr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ii(t.seconds),nanos:ii(t.nanos)}}function ii(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function oi(t){return"string"==typeof t?ei.fromBase64String(t):ei.fromUint8Array(t)}function si(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ai(t){var e=t.mapValue.fields.__previous_value__;return si(e)?ai(e):e}function ui(t){var e=ri(t.mapValue.fields.__local_write_time__.timestampValue);return new Gr(e.seconds,e.nanos)}function ci(t){return null==t}function li(t){return 0===t&&1/t==-1/0}function hi(t){return"number"==typeof t&&Number.isInteger(t)&&!li(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var fi=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Yr.fromString(e))},t.fromName=function(e){return new t(Yr.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Yr.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Yr.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Yr(e.slice()))},t}();function di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?si(t)?4:10:Mr()}function pi(t,e){var n=di(t);if(n!==di(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ui(t).isEqual(ui(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ri(t.timestampValue),r=ri(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return oi(t.bytesValue).isEqual(oi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ii(t.geoPointValue.latitude)===ii(e.geoPointValue.latitude)&&ii(t.geoPointValue.longitude)===ii(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ii(t.integerValue)===ii(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ii(t.doubleValue),r=ii(e.doubleValue);return n===r?li(n)===li(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Br(t.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Wr(n)!==Wr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!pi(n[i],r[i])))return!1;return!0}(t,e);default:return Mr()}}function gi(t,e){return void 0!==(t.values||[]).find(function(t){return pi(t,e)})}function mi(t,e){var n=di(t),r=di(e);if(n!==r)return Hr(n,r);switch(n){case 0:return 0;case 1:return Hr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ii(t.integerValue||t.doubleValue),r=ii(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return yi(t.timestampValue,e.timestampValue);case 4:return yi(ui(t),ui(e));case 5:return Hr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=oi(t),r=oi(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Hr(n[i],r[i]);if(0!==o)return o}return Hr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Hr(ii(t.latitude),ii(e.latitude));return 0!==n?n:Hr(ii(t.longitude),ii(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=mi(n[i],r[i]);if(o)return o}return Hr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Hr(r[s],o[s]);if(0!==a)return a;var u=mi(n[r[s]],i[o[s]]);if(0!==u)return u}return Hr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Mr()}}function yi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Hr(t,e);var n=ri(t),r=ri(e),i=Hr(n.seconds,r.seconds);return 0!==i?i:Hr(n.nanos,r.nanos)}function vi(t){return bi(t)}function bi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ri(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?oi(t.bytesValue).toBase64():"referenceValue"in t?fi.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=bi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+bi(t.fields[o])}return e+"}"}(t.mapValue):Mr();var e}function wi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function _i(t){return!!t&&"integerValue"in t}function Oi(t){return!!t&&"arrayValue"in t}function Ei(t){return!!t&&"nullValue"in t}function Si(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ti(t){return!!t&&"mapValue"in t}var Ii=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Zr.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return pi(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===di(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Ti(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Zr.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Ti(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Ci(t){var e=[];return Qr(t.fields||{},function(t,n){var r=new Zr([t]);if(Ti(n)){var i=Ci(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new ti(e)}var xi=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Kr.min(),Ii.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ii.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ii.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ji=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Ai(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ji(t,e,n,r,i,o,s)}function ki(t){var e=Ur(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+vi(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),ci(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=zi(e.startAt)),e.endAt&&(n+="|ub:",n+=zi(e.endAt)),e.h=n}return e.h}function Ni(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ki(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!pi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qi(t.startAt,e.startAt)&&Qi(t.endAt,e.endAt)}function Ri(t){return fi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Di=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Cr.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Pi(t,n,r):"array-contains"===n?new Ui(t,r):"in"===n?new Vi(t,r):"not-in"===n?new qi(t,r):"array-contains-any"===n?new Hi(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Li(t,n):new Mi(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(mi(e,this.value)):null!==e&&di(this.value)===di(e)&&this.m(mi(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Mr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Pi=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=fi.fromName(r.referenceValue),i}return Object(Cr.c)(e,t),e.prototype.matches=function(t){var e=fi.comparator(t.key,this.key);return this.m(e)},e}(Di),Li=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Fi(0,n),r}return Object(Cr.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Di),Mi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Fi(0,n),r}return Object(Cr.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Di);function Fi(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return fi.fromName(t.referenceValue)})}var Ui=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Cr.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Oi(e)&&gi(e.arrayValue,this.value)},e}(Di),Vi=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Cr.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&gi(this.value.arrayValue,e)},e}(Di),qi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Cr.c)(e,t),e.prototype.matches=function(t){if(gi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!gi(this.value.arrayValue,e)},e}(Di),Hi=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Cr.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Oi(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return gi(e.value.arrayValue,t)})},e}(Di),Bi=function(t,e){this.position=t,this.before=e};function zi(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return vi(t)}).join(",")}var Gi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ki(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Wi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?fi.comparator(fi.fromName(s.referenceValue),n.key):mi(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Qi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!pi(t.position[n],e.position[n]))return!1;return!0}var $i=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Xi(t,e,n,r,i,o,s,a){return new $i(t,e,n,r,i,o,s,a)}function Yi(t){return new $i(t)}function Ji(t){return!ci(t.limit)&&"F"===t.limitType}function Zi(t){return!ci(t.limit)&&"L"===t.limitType}function to(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function eo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function no(t){return null!==t.collectionGroup}function ro(t){var e=Ur(t);if(null===e.p){e.p=[];var n=eo(e),r=to(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Gi(n)),e.p.push(new Gi(Zr.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Gi(Zr.keyField(),u))}}}return e.p}function io(t){var e=Ur(t);if(!e.T)if("F"===e.limitType)e.T=Ai(e.path,e.collectionGroup,ro(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ro(e);r<i.length;r++){var o=i[r];n.push(new Gi(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Bi(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Bi(e.startAt.position,!e.startAt.before):null;e.T=Ai(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function oo(t,e,n){return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function so(t,e){return Ni(io(t),io(e))&&t.limitType===e.limitType}function ao(t){return ki(io(t))+"|lt:"+t.limitType}function uo(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+vi(e.value);var e}).join(", ")+"]"),ci(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+zi(t.startAt)),t.endAt&&(e+=", endAt: "+zi(t.endAt)),"Target("+e+")"}(io(t))+"; limitType="+t.limitType+")"}function co(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):fi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Wi(t.startAt,ro(t),e)||t.endAt&&Wi(t.endAt,ro(t),e))}(t,e)}function lo(t){return function(e,n){for(var r=!1,i=0,o=ro(t);i<o.length;i++){var s=o[i],a=ho(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function ho(t,e,n){var r=t.field.isKeyField()?fi.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?mi(r,i):Mr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Mr()}}function fo(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:li(e)?"-0":e}}function po(t){return{integerValue:""+t}}function go(t,e){return hi(e)?po(e):fo(t,e)}var mo=function(){this._=void 0};function yo(t,e,n){return t instanceof wo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof _o?Oo(t,e):t instanceof Eo?So(t,e):function(t,e){var n=bo(t,e),r=Io(n)+Io(t.A);return _i(n)&&_i(t.A)?po(r):fo(t.R,r)}(t,e)}function vo(t,e,n){return t instanceof _o?Oo(t,e):t instanceof Eo?So(t,e):n}function bo(t,e){return t instanceof To?_i(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Cr.c)(e,t),e}(mo),_o=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Cr.c)(e,t),e}(mo);function Oo(t,e){for(var n=Co(e),r=function(t){n.some(function(e){return pi(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Eo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Cr.c)(e,t),e}(mo);function So(t,e){for(var n=Co(e),r=function(t){n=n.filter(function(e){return!pi(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var To=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Cr.c)(e,t),e}(mo);function Io(t){return ii(t.integerValue||t.doubleValue)}function Co(t){return Oi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var xo=function(t,e){this.field=t,this.transform=e},jo=function(t,e){this.version=t,this.transformResults=e},Ao=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ko(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var No=function(){};function Ro(t,e,n){t instanceof Fo?function(t,e,n){var r=t.value.clone(),i=qo(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Uo?function(t,e,n){if(ko(t.precondition,e)){var r=qo(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Vo(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Do(t,e,n){t instanceof Fo?function(t,e,n){if(ko(t.precondition,e)){var r=t.value.clone(),i=Ho(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Mo(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Uo?function(t,e,n){if(ko(t.precondition,e)){var r=Ho(t.fieldTransforms,n,e),i=e.data;i.setAll(Vo(t)),i.setAll(r),e.convertToFoundDocument(Mo(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){ko(t.precondition,e)&&e.convertToNoDocument(Kr.min())}(t,e)}function Po(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=bo(o.transform,s||null);null!=a&&(null==n&&(n=Ii.empty()),n.set(o.field,a))}return n||null}function Lo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Br(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof _o&&e instanceof _o||t instanceof Eo&&e instanceof Eo?Br(t.elements,e.elements,pi):t instanceof To&&e instanceof To?pi(t.A,e.A):t instanceof wo&&e instanceof wo}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Mo(t){return t.isFoundDocument()?t.version:Kr.min()}var Fo=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Cr.c)(e,t),e}(No),Uo=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Cr.c)(e,t),e}(No);function Vo(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function qo(t,e,n){var r=new Map;Fr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,vo(s,a,n[i]))}return r}function Ho(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,yo(a,u,e))}return r}var Bo,zo,Go=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Cr.c)(e,t),e}(No),Ko=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Cr.c)(e,t),e}(No),Wo=function(t){this.count=t};function Qo(t){switch(t){case jr.OK:return Mr();case jr.CANCELLED:case jr.UNKNOWN:case jr.DEADLINE_EXCEEDED:case jr.RESOURCE_EXHAUSTED:case jr.INTERNAL:case jr.UNAVAILABLE:case jr.UNAUTHENTICATED:return!1;case jr.INVALID_ARGUMENT:case jr.NOT_FOUND:case jr.ALREADY_EXISTS:case jr.PERMISSION_DENIED:case jr.FAILED_PRECONDITION:case jr.ABORTED:case jr.OUT_OF_RANGE:case jr.UNIMPLEMENTED:case jr.DATA_LOSS:return!0;default:return Mr()}}function $o(t){if(void 0===t)return Dr("GRPC error has no .code"),jr.UNKNOWN;switch(t){case Bo.OK:return jr.OK;case Bo.CANCELLED:return jr.CANCELLED;case Bo.UNKNOWN:return jr.UNKNOWN;case Bo.DEADLINE_EXCEEDED:return jr.DEADLINE_EXCEEDED;case Bo.RESOURCE_EXHAUSTED:return jr.RESOURCE_EXHAUSTED;case Bo.INTERNAL:return jr.INTERNAL;case Bo.UNAVAILABLE:return jr.UNAVAILABLE;case Bo.UNAUTHENTICATED:return jr.UNAUTHENTICATED;case Bo.INVALID_ARGUMENT:return jr.INVALID_ARGUMENT;case Bo.NOT_FOUND:return jr.NOT_FOUND;case Bo.ALREADY_EXISTS:return jr.ALREADY_EXISTS;case Bo.PERMISSION_DENIED:return jr.PERMISSION_DENIED;case Bo.FAILED_PRECONDITION:return jr.FAILED_PRECONDITION;case Bo.ABORTED:return jr.ABORTED;case Bo.OUT_OF_RANGE:return jr.OUT_OF_RANGE;case Bo.UNIMPLEMENTED:return jr.UNIMPLEMENTED;case Bo.DATA_LOSS:return jr.DATA_LOSS;default:return Mr()}}(zo=Bo||(Bo={}))[zo.OK=0]="OK",zo[zo.CANCELLED=1]="CANCELLED",zo[zo.UNKNOWN=2]="UNKNOWN",zo[zo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zo[zo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zo[zo.NOT_FOUND=5]="NOT_FOUND",zo[zo.ALREADY_EXISTS=6]="ALREADY_EXISTS",zo[zo.PERMISSION_DENIED=7]="PERMISSION_DENIED",zo[zo.UNAUTHENTICATED=16]="UNAUTHENTICATED",zo[zo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zo[zo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zo[zo.ABORTED=10]="ABORTED",zo[zo.OUT_OF_RANGE=11]="OUT_OF_RANGE",zo[zo.UNIMPLEMENTED=12]="UNIMPLEMENTED",zo[zo.INTERNAL=13]="INTERNAL",zo[zo.UNAVAILABLE=14]="UNAVAILABLE",zo[zo.DATA_LOSS=15]="DATA_LOSS";var Xo=function(){function t(t,e){this.comparator=t,this.root=e||Jo.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jo.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Yo(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Yo(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Yo(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Yo(this.root,t,this.comparator,!0)},t}(),Yo=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Jo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Mr();if(this.right.isRed())throw Mr();var t=this.left.check();if(t!==this.right.check())throw Mr();return t+(this.isRed()?0:1)},t}();Jo.EMPTY=null,Jo.RED=!0,Jo.BLACK=!1,Jo.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Mr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Jo(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Zo=function(){function t(t){this.comparator=t,this.data=new Xo(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ts(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ts(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ts=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),es=new Xo(fi.comparator);function ns(){return es}var rs=new Xo(fi.comparator);function is(){return rs}var os=new Xo(fi.comparator);function ss(){return os}var as=new Zo(fi.comparator);function us(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=as,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var cs=new Zo(Hr);function ls(){return cs}var hs=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,fs.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Kr.min(),r,ls(),ns(),us())},t}(),fs=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ei.EMPTY_BYTE_STRING,n,us(),us(),us())},t}(),ds=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ps=function(t,e){this.targetId=t,this.V=e},gs=function(t,e,n,r){void 0===n&&(n=ei.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ms=function(){function t(){this.S=0,this.D=bs(),this.C=ei.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=us(),e=us(),n=us();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Mr()}}),new fs(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=bs()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ys=function(){function t(t){this.W=t,this.G=new Map,this.H=ns(),this.J=vs(),this.Y=new Zo(Hr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Mr()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ri(i))if(0===n){var o=new fi(i.path);this.tt(e,o,xi.newNoDocument(o,Kr.min()))}else Fr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Ri(o.target)){var s=new fi(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,xi.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=us();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new hs(t,n,this.Y,this.H,r);return this.H=ns(),this.J=vs(),this.Y=new Zo(Hr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ms,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Zo(Hr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Rr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ms),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function vs(){return new Xo(fi.comparator)}function bs(){return new Xo(fi.comparator)}var ws={asc:"ASCENDING",desc:"DESCENDING"},_s={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Os=function(t,e){this.databaseId=t,this.I=e};function Es(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ss(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ts(t,e){return Es(t,e.toTimestamp())}function Is(t){return Fr(!!t),Kr.fromTimestamp(function(t){var e=ri(t);return new Gr(e.seconds,e.nanos)}(t))}function Cs(t,e){return function(t){return new Yr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function xs(t){var e=Yr.fromString(t);return Fr(Js(e)),e}function js(t,e){return Cs(t.databaseId,e.path)}function As(t,e){var n=xs(e);if(n.get(1)!==t.databaseId.projectId)throw new Ar(jr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ar(jr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fi(Ds(n))}function ks(t,e){return Cs(t.databaseId,e)}function Ns(t){var e=xs(t);return 4===e.length?Yr.emptyPath():Ds(e)}function Rs(t){return new Yr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ds(t){return Fr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ps(t,e,n){return{name:js(t,e),fields:n.toProto().mapValue.fields}}function Ls(t,e,n){var r=As(t,e.name),i=Is(e.updateTime),o=new Ii({mapValue:{fields:e.fields}}),s=xi.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Ms(t,e){var n;if(e instanceof Fo)n={update:Ps(t,e.key,e.value)};else if(e instanceof Go)n={delete:js(t,e.key)};else if(e instanceof Uo)n={update:Ps(t,e.key,e.data),updateMask:Ys(e.fieldMask)};else{if(!(e instanceof Ko))return Mr();n={verify:js(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof wo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _o)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Eo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof To)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Mr()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ts(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Mr()}(t,e.precondition)),n}function Fs(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ao.updateTime(Is(t.updateTime)):void 0!==t.exists?Ao.exists(t.exists):Ao.none()}(e.currentDocument):Ao.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Fr("REQUEST_TIME"===e.setToServerValue),n=new wo):"appendMissingElements"in e?n=new _o(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Eo(e.removeAllFromArray.values||[]):"increment"in e?n=new To(t,e.increment):Mr();var r=Zr.fromServerFormat(e.fieldPath);return new xo(r,n)}(t,e)}):[];if(e.update){var i=As(t,e.update.name),o=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new ti((t.fieldPaths||[]).map(function(t){return Zr.fromServerFormat(t)}))}(e.updateMask);return new Uo(i,o,s,n,r)}return new Fo(i,o,n,r)}if(e.delete){var a=As(t,e.delete);return new Go(a,n)}if(e.verify){var u=As(t,e.verify);return new Ko(u,n)}return Mr()}function Us(t,e){return{documents:[ks(t,e.path)]}}function Vs(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ks(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ks(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Si(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NAN"}};if(Ei(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Si(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NOT_NAN"}};if(Ei(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ws(t.field),op:Ks(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Ws(t.field),direction:Gs(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ci(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Bs(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Bs(e.endAt)),n}function qs(t){var e=Ns(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Fr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Hs(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Gi(Qs(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return ci(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=zs(n.startAt));var l=null;return n.endAt&&(l=zs(n.endAt)),Xi(e,i,a,s,u,"F",c,l)}function Hs(t){return t?void 0!==t.unaryFilter?[Xs(t)]:void 0!==t.fieldFilter?[$s(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Hs(t)}).reduce(function(t,e){return t.concat(e)}):Mr():[]}function Bs(t){return{before:t.before,values:t.position}}function zs(t){return new Bi(t.values||[],!!t.before)}function Gs(t){return ws[t]}function Ks(t){return _s[t]}function Ws(t){return{fieldPath:t.canonicalString()}}function Qs(t){return Zr.fromServerFormat(t.fieldPath)}function $s(t){return Di.create(Qs(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Mr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Xs(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Qs(t.unaryFilter.field);return Di.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Qs(t.unaryFilter.field);return Di.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Qs(t.unaryFilter.field);return Di.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Qs(t.unaryFilter.field);return Di.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Mr()}}function Ys(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Js(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Zs(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ea(e)),e=ta(t.get(n),e);return ea(e)}function ta(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ea(t){return t+"\x01\x01"}function na(t){var e=t.length;if(Fr(e>=2),2===e)return Fr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Yr.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Mr(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Mr()}o=s+2}return new Yr(r)}var ra=function(t,e){this.seconds=t,this.nanoseconds=e},ia=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ia.store="owner",ia.key="owner";var oa=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};oa.store="mutationQueues",oa.keyPath="userId";var sa=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};sa.store="mutations",sa.keyPath="batchId",sa.userMutationsIndex="userMutationsIndex",sa.userMutationsKeyPath=["userId","batchId"];var aa=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Zs(e)]},t.key=function(t,e,n){return[t,Zs(e),n]},t}();aa.store="documentMutations",aa.PLACEHOLDER=new aa;var ua=function(t,e){this.path=t,this.readTime=e},ca=function(t,e){this.path=t,this.version=e},la=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};la.store="remoteDocuments",la.readTimeIndex="readTimeIndex",la.readTimeIndexPath="readTime",la.collectionReadTimeIndex="collectionReadTimeIndex",la.collectionReadTimeIndexPath=["parentPath","readTime"];var ha=function(t){this.byteSize=t};ha.store="remoteDocumentGlobal",ha.key="remoteDocumentGlobalKey";var fa=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};fa.store="targets",fa.keyPath="targetId",fa.queryTargetsIndexName="queryTargetsIndex",fa.queryTargetsKeyPath=["canonicalId","targetId"];var da=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};da.store="targetDocuments",da.keyPath=["targetId","path"],da.documentTargetsIndex="documentTargetsIndex",da.documentTargetsKeyPath=["path","targetId"];var pa=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};pa.key="targetGlobalKey",pa.store="targetGlobal";var ga=function(t,e){this.collectionId=t,this.parent=e};ga.store="collectionParents",ga.keyPath=["collectionId","parent"];var ma=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ma.store="clientMetadata",ma.keyPath="clientId";var ya=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ya.store="bundles",ya.keyPath="bundleId";var va=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};va.store="namedQueries",va.keyPath="name";var ba=Object(Cr.f)(Object(Cr.f)([],Object(Cr.f)(Object(Cr.f)([],Object(Cr.f)(Object(Cr.f)([],Object(Cr.f)(Object(Cr.f)([],[oa.store,sa.store,aa.store,la.store,fa.store,ia.store,pa.store,da.store]),[ma.store])),[ha.store])),[ga.store])),[ya.store,va.store]),wa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_a=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Oa=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Ea=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Mr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Sa=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Oa,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ca(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Na(e.target.error);n.ft.reject(new Ca(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ca(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Rr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ja(e)},t}(),Ta=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(E.h)())&&Dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Rr("SimpleDb","Removing database:",t),Aa(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(E.h)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Cr.b)(this,void 0,void 0,function(){var e,n=this;return Object(Cr.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Rr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ca(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ar(jr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ca(t,n))},i.onupgradeneeded=function(t){Rr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Rr("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Cr.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Cr.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Cr.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Sa.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Ea.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Rr("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ia=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Aa(this.Pt.delete())},t}(),Ca=function(t){function e(e,n){var r=this;return(r=t.call(this,jr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Cr.c)(e,t),e}(Ar);function xa(t){return"IndexedDbTransactionError"===t.name}var ja=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Rr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Rr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Aa(n)},t.prototype.add=function(t){return Rr("SimpleDb","ADD",this.store.name,t,t),Aa(this.store.add(t))},t.prototype.get=function(t){var e=this;return Aa(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Rr("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Rr("SimpleDb","DELETE",this.store.name,t),Aa(this.store.delete(t))},t.prototype.count=function(){return Rr("SimpleDb","COUNT",this.store.name),Aa(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Rr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Ea(function(n,r){e.onerror=function(t){var e=Na(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Ea(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ia(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ea){var a=s.catch(function(t){return o.done(),Ea.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Ea.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Aa(t){return new Ea(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Na(t.target.error);n(e)}})}var ka=!1;function Na(t){var e=Ta._t(Object(E.h)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ar("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ka||(ka=!0,setTimeout(function(){throw r},0)),r}}return t}var Ra=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Cr.c)(e,t),e}(_a);function Da(t,e){var n=Ur(t);return Ta.It(n.Mt,e)}var Pa=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Ro(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Do(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Do(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Kr.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},us())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Br(this.mutations,t.mutations,function(t,e){return Lo(t,e)})&&Br(this.baseMutations,t.baseMutations,function(t,e){return Lo(t,e)})},t}(),La=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Fr(e.mutations.length===r.length);for(var i=ss(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ma=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Kr.min()),void 0===o&&(o=Kr.min()),void 0===s&&(s=ei.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Fa=function(t){this.Lt=t};function Ua(t,e){if(e.document)return Ls(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=fi.fromSegments(e.noDocument.path),r=za(e.noDocument.readTime),i=xi.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=fi.fromSegments(e.unknownDocument.path);return r=za(e.unknownDocument.version),xi.newUnknownDocument(o,r)}return Mr()}function Va(t,e,n){var r=qa(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:js(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Es(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new la(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Ba(e.version);return s=e.hasCommittedMutations,new la(null,new ua(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Ba(e.version);return new la(new ca(c,l),null,null,!0,r,i)}return Mr()}function qa(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ha(t){var e=new Gr(t[0],t[1]);return Kr.fromTimestamp(e)}function Ba(t){var e=t.toTimestamp();return new ra(e.seconds,e.nanoseconds)}function za(t){var e=new Gr(t.seconds,t.nanoseconds);return Kr.fromTimestamp(e)}function Ga(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Fs(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Fs(t.Lt,e)}),o=Gr.fromMillis(e.localWriteTimeMs);return new Pa(e.batchId,o,n,i)}function Ka(t){var e,n,r=za(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?za(t.lastLimboFreeSnapshotVersion):Kr.min();return void 0!==t.query.documents?(Fr(1===(n=t.query).documents.length),e=io(Yi(Ns(n.documents[0])))):e=function(t){return io(qs(t))}(t.query),new Ma(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ei.fromBase64String(t.resumeToken))}function Wa(t,e){var n,r=Ba(e.snapshotVersion),i=Ba(e.lastLimboFreeSnapshotVersion);n=Ri(e.target)?Us(t.Lt,e.target):Vs(t.Lt,e.target);var o=e.resumeToken.toBase64();return new fa(e.targetId,ki(e.target),r,o,e.sequenceNumber,i,n)}function Qa(t){var e=qs({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?oo(e,e.limit,"L"):e}var $a=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Xa(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:za(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Xa(t).put({bundleId:(n=e).id,createTime:Ba(Is(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ya(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Qa(e.bundledQuery),readTime:za(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Ya(t).put(function(t){return{name:t.name,readTime:Ba(Is(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Xa(t){return Da(t,ya.store)}function Ya(t){return Da(t,va.store)}var Ja=function(){function t(){this.Bt=new Za}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Ea.resolve()},t.prototype.getCollectionParents=function(t,e){return Ea.resolve(this.Bt.getEntries(e))},t}(),Za=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Zo(Yr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Zo(Yr.comparator)).toArray()},t}(),tu=function(){function t(){this.qt=new Za}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Zs(i)};return eu(t).put(o)}return Ea.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[zr(e),""],!1,!0);return eu(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(na(o.parent))}return n})},t}();function eu(t){return Da(t,ga.store)}var nu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ru=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function iu(t,e,n){var r=t.store(sa.store),i=t.store(aa.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Fr(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=aa.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Ea.waitFor(o).next(function(){return c})}function ou(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Mr();e=t.noDocument}return JSON.stringify(e).length}ru.DEFAULT_COLLECTION_PERCENTILE=10,ru.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ru.DEFAULT=new ru(41943040,ru.DEFAULT_COLLECTION_PERCENTILE,ru.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ru.DISABLED=new ru(-1,0,0);var su=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Fr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uu(t).Ot({index:sa.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=cu(t),s=uu(t);return s.add({}).next(function(a){Fr("number"==typeof a);for(var u=new Pa(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Ms(t.Lt,e)}),i=n.mutations.map(function(e){return Ms(t.Lt,e)});return new sa(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Zo(function(t,e){return Hr(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=aa.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,aa.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Ea.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return uu(t).get(e).next(function(t){return t?(Fr(t.userId===n.userId),Ga(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Ea.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return uu(t).Ot({index:sa.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Fr(e.batchId>=r),o=Ga(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return uu(t).Ot({index:sa.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return uu(t).Nt(sa.userMutationsIndex,n).next(function(t){return t.map(function(t){return Ga(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=aa.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return cu(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=na(r[1]);if(a===n.userId&&e.path.isEqual(c))return uu(t).get(u).next(function(t){if(!t)throw Mr();Fr(t.userId===n.userId),o.push(Ga(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Zo(Hr),i=[];return e.forEach(function(e){var o=aa.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=cu(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=na(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Ea.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=aa.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Zo(Hr);return cu(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=na(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(uu(t).get(e).next(function(t){if(null===t)throw Mr();Fr(t.userId===n.userId),r.push(Ga(n.R,t))}))}),Ea.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return iu(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Ea.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Ea.resolve();var r=IDBKeyRange.lowerBound(aa.prefixForUser(e.userId)),i=[];return cu(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=na(t[1]);i.push(o)}else r.done()}).next(function(){Fr(0===i.length)})})},t.prototype.containsKey=function(t,e){return au(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return lu(t).get(this.userId).next(function(t){return t||new oa(e.userId,-1,"")})},t}();function au(t,e,n){var r=aa.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return cu(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function uu(t){return Da(t,sa.store)}function cu(t){return Da(t,aa.store)}function lu(t){return Da(t,oa.store)}var hu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),fu=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new hu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Kr.fromTimestamp(new Gr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return du(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Fr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return du(t).Ot(function(s,a){var u=Ka(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Ea.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return du(t).Ot(function(t,n){var r=Ka(n);e(r)})},t.prototype.Xt=function(t){return pu(t).get(pa.key).next(function(t){return Fr(null!==t),t})},t.prototype.Zt=function(t,e){return pu(t).put(pa.key,e)},t.prototype.te=function(t,e){return du(t).put(Wa(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=ki(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return du(t).Ot({range:r,index:fa.queryTargetsIndexName},function(t,n,r){var o=Ka(n);Ni(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=gu(t);return e.forEach(function(e){var s=Zs(e.path);i.push(o.put(new da(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Ea.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=gu(t);return Ea.forEach(e,function(e){var o=Zs(e.path);return Ea.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=gu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=gu(t),i=us();return r.Ot({range:n,kt:!0},function(t,e,n){var r=na(t[1]),o=new fi(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Zs(e.path),r=IDBKeyRange.bound([n],[zr(n)],!1,!0),i=0;return gu(t).Ot({index:da.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return du(t).get(e).next(function(t){return t?Ka(t):null})},t}();function du(t){return Da(t,fa.store)}function pu(t){return Da(t,pa.store)}function gu(t){return Da(t,da.store)}function mu(t){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(e){if(t.code!==jr.FAILED_PRECONDITION||t.message!==wa)throw t;return Rr("LocalStore","Unexpectedly lost primary lease"),[2]})})}function yu(t,e){var n=t[1],r=e[1],i=Hr(t[0],e[0]);return 0===i?Hr(n,r):i}var vu=function(){function t(t){this.ne=t,this.buffer=new Zo(yu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();yu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),bu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Rr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Cr.b)(e,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return xa(e=n.sent())?(Rr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,mu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),wu=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Ea.resolve(xr.o);var r=new vu(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Rr("LruGarbageCollector","Garbage collection skipped; disabled"),Ea.resolve(nu)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Rr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),nu):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Rr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Nr()<=S.a.DEBUG&&Rr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Ea.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),_u=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new wu(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Ou(t,n)},t.prototype.removeReference=function(t,e,n){return Ou(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Ou(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return lu(t).$t(function(r){return au(t,r,e).next(function(t){return t&&(n=!0),Ea.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),gu(t).delete([0,Zs(s.path)])})});i.push(u)}}).next(function(){return Ea.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ou(t,e)},t.prototype.we=function(t,e){var n,r=gu(t),i=xr.o;return r.Ot({index:da.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==xr.o&&e(new fi(na(n)),i),i=s,n=o):i=xr.o}).next(function(){i!==xr.o&&e(new fi(na(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ou(t,e){return gu(t).put(function(t,e){return new da(0,Zs(t.path),e)}(e,t.currentSequenceNumber))}var Eu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Qr(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return $r(this.inner)},t}(),Su=function(){function t(){this.changes=new Eu(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Kr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:xi.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Ea.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Tu=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return xu(t).put(ju(e),n)},t.prototype.removeEntry=function(t,e){var n=xu(t),r=ju(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return xu(t).get(ju(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return xu(t).get(ju(e)).next(function(t){return{document:n.ye(e,t),size:ou(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ns();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ns(),i=new Xo(fi.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,ou(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Ea.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return xu(t).Ot({range:r},function(t,e,r){for(var s=fi.fromSegments(t);o&&fi.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ns(),o=e.path.length+1,s={};if(n.isEqual(Kr.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=qa(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=la.collectionReadTimeIndex}return xu(t).Ot(s,function(t,n,s){if(t.length===o){var a=Ua(r.R,n);e.path.isPrefixOf(a.key.path)?co(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Iu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Cu(t).get(ha.key).next(function(t){return Fr(!!t),t})},t.prototype.me=function(t,e){return Cu(t).put(ha.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ua(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Kr.min()))return n}return xi.newInvalidDocument(t)},t}(),Iu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Eu(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Cr.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Zo(function(t,e){return Hr(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Va(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=ou(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Va(e.Ie.R,xi.newNoDocument(o,Kr.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Ea.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Su);function Cu(t){return Da(t,ha.store)}function xu(t){return Da(t,la.store)}function ju(t){return t.path.toArray()}var Au=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Fr(n<r&&n>=0&&r<=11);var o=new Sa("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ia.store)}(t),function(t){t.createObjectStore(oa.store,{keyPath:oa.keyPath}),t.createObjectStore(sa.store,{keyPath:sa.keyPath,autoIncrement:!0}).createIndex(sa.userMutationsIndex,sa.userMutationsKeyPath,{unique:!0}),t.createObjectStore(aa.store)}(t),ku(t),function(t){t.createObjectStore(la.store)}(t));var s=Ea.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(da.store),t.deleteObjectStore(fa.store),t.deleteObjectStore(pa.store)}(t),ku(t)),s=s.next(function(){return function(t){var e=t.store(pa.store),n=new pa(0,0,Kr.min().toTimestamp(),0);return e.put(pa.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(sa.store).Nt().next(function(n){t.deleteObjectStore(sa.store),t.createObjectStore(sa.store,{keyPath:sa.keyPath,autoIncrement:!0}).createIndex(sa.userMutationsIndex,sa.userMutationsKeyPath,{unique:!0});var r=e.store(sa.store),i=n.map(function(t){return r.put(t)});return Ea.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(ma.store,{keyPath:ma.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(ha.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(la.store);e.createIndex(la.readTimeIndex,la.readTimeIndexPath,{unique:!1}),e.createIndex(la.collectionReadTimeIndex,la.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(ya.store,{keyPath:ya.keyPath})}(t),function(t){t.createObjectStore(va.store,{keyPath:va.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(la.store).Ot(function(t,n){e+=ou(n)}).next(function(){var n=new ha(e);return t.store(ha.store).put(ha.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(oa.store),r=t.store(sa.store);return n.Nt().next(function(n){return Ea.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(sa.userMutationsIndex,i).next(function(r){return Ea.forEach(r,function(r){Fr(r.userId===n.userId);var i=Ga(e.R,r);return iu(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(da.store),n=t.store(la.store);return t.store(pa.store).get(pa.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Yr(n),s=function(t){return[0,Zs(t)]}(o);r.push(e.get(s).next(function(n){return n?Ea.resolve():function(n){return e.put(new da(0,Zs(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Ea.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(ga.store,{keyPath:ga.keyPath});var n=e.store(ga.store),r=new Za,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Zs(i)})}};return e.store(la.store).Ot({kt:!0},function(t,e){var n=new Yr(t);return i(n.popLast())}).next(function(){return e.store(aa.store).Ot({kt:!0},function(t,e){var n=na(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(fa.store);return n.Ot(function(t,r){var i=Ka(r),o=Wa(e.R,i);return n.put(o)})},t}();function ku(t){t.createObjectStore(da.store,{keyPath:da.keyPath}).createIndex(da.documentTargetsIndex,da.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(fa.store,{keyPath:fa.keyPath}).createIndex(fa.queryTargetsIndexName,fa.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(pa.store)}var Nu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ru=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ar(jr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _u(this,i),this.Le=n+"main",this.R=new Fa(u),this.Be=new Ta(this.Le,11,new Au(this.R)),this.qe=new fu(this.referenceDelegate,this.R),this.Ut=new tu,this.Ue=function(t,e){return new Tu(t,e)}(this.R,this.Ut),this.Qe=new $a,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ar(jr.FAILED_PRECONDITION,Nu);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new xr(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Cr.b)(e,void 0,void 0,function(){return Object(Cr.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Cr.b)(e,void 0,void 0,function(){return Object(Cr.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Cr.b)(e,void 0,void 0,function(){return Object(Cr.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Pu(e).put(new ma(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(xa(e))return Rr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Rr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Du(t).get(ia.key).next(function(t){return Ea.resolve(e.tn(t))})},t.prototype.en=function(t){return Pu(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Cr.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Da(t,ma.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Ea.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Ea.resolve(!0):Du(t).get(ia.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ar(jr.FAILED_PRECONDITION,Nu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Pu(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Rr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Cr.b)(this,void 0,void 0,function(){var t=this;return Object(Cr.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ia.store,ma.store],function(e){var n=new Ra(e,xr.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Pu(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return su.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Rr("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",ba,function(o){return r=new Ra(o,i.Ne?i.Ne.next():xr.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Dr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Ar(jr.FAILED_PRECONDITION,wa);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Du(t).get(ia.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ar(jr.FAILED_PRECONDITION,Nu)})},t.prototype.Ze=function(t){var e=new ia(this.clientId,this.allowTabSynchronization,Date.now());return Du(t).put(ia.key,e)},t.yt=function(){return Ta.yt()},t.prototype.Xe=function(t){var e=this,n=Du(t);return n.get(ia.key).next(function(t){return e.tn(t)?(Rr("IndexedDbPersistence","Releasing primary lease."),n.delete(ia.key)):Ea.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Dr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Rr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Dr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Dr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Du(t){return Da(t,ia.store)}function Pu(t){return Da(t,ma.store)}function Lu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Mu=function(t,e){this.progress=t,this.wn=e},Fu=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return fi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):no(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new fi(e)).next(function(t){var e=is();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=is();return this.Ut.getCollectionParents(t,i).next(function(s){return Ea.forEach(s,function(s){var a=function(t,e){return new $i(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=xi.newInvalidDocument(c),r=r.insert(c,l)),Do(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){co(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=us(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Uo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Uu=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=us(),i=us(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Vu=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Kr.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Ji(e)||Zi(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Nr()<=S.a.DEBUG&&Rr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),uo(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Zo(lo(t));return e.forEach(function(e,r){co(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Nr()<=S.a.DEBUG&&Rr("QueryEngine","Using full collection scan to execute query:",uo(e)),this.Sn.getDocumentsMatchingQuery(t,e,Kr.min())},t}(),qu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Xo(Hr),this.kn=new Eu(function(t){return ki(t)},Ni),this.On=Kr.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Fu(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Hu(t,e,n,r){return new qu(t,e,n,r)}function Bu(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Cr.d)(this,function(s){switch(s.label){case 0:return n=Ur(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Fu(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=us(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function zu(t,e){var n=Ur(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Ea.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Fr(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Gu(t){var e=Ur(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Ku(t,e){var n=Ur(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Fr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=ns();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Wu(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Kr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Ea.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Wu(t,e,n,r,i){var o=us();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ns();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Kr.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Rr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Qu(t,e){var n=Ur(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function $u(t,e){var n=Ur(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Ea.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Ma(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Xu(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Cr.d)(this,function(a){switch(a.label){case 0:r=Ur(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!xa(s=a.sent()))throw s;return Rr("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Yu(t,e,n){var r=Ur(t),i=Kr.min(),o=us();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Ur(t),i=r.kn.get(n);return void 0!==i?Ea.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,io(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Kr.min(),n?o:us())}).next(function(t){return{documents:t,Bn:o}})})}function Ju(t,e){var n=Ur(t),r=Ur(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Zu(t){var e=Ur(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Ur(t),i=ns(),o=qa(n),s=xu(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:la.readTimeIndex,range:a},function(t,e){var n=Ua(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Ha(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function tc(t){return Object(Cr.b)(this,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){return[2,(e=Ur(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=xu(t),n=Kr.min();return e.Ot({index:la.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Ha(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function ec(t,e,n,r){return Object(Cr.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Cr.d)(this,function(p){switch(p.label){case 0:for(i=Ur(t),o=us(),s=ns(),a=ss(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,$u(i,function(t){return io(Yi(Yr.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Wu(t,f,s,Kr.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function nc(t,e,n){return void 0===n&&(n=us()),Object(Cr.b)(this,void 0,void 0,function(){var r,i;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return[4,$u(t,io(Qa(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ur(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Is(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(ei.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var rc=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Ea.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Is(n.createTime)}),Ea.resolve()},t.prototype.getNamedQuery=function(t,e){return Ea.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Qa(t.bundledQuery),readTime:Is(t.readTime)}}(e)),Ea.resolve()},t}(),ic=function(){function t(){this.Wn=new Zo(oc.Gn),this.zn=new Zo(oc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new oc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new oc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new fi(new Yr([])),r=new oc(n,t),i=new oc(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new fi(new Yr([])),n=new oc(e,t),r=new oc(e,t+1),i=us();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new oc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),oc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return fi.comparator(t.key,e.key)||Hr(t.ns,e.ns)},t.Hn=function(t,e){return Hr(t.ns,e.ns)||fi.comparator(t.key,e.key)},t}(),sc=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Zo(oc.Gn)}return t.prototype.checkEmpty=function(t){return Ea.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Pa(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new oc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Ea.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Ea.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Ea.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Ea.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Ea.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new oc(e,0),i=new oc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Ea.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Zo(Hr);return e.forEach(function(t){var e=new oc(t,0),i=new oc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Ea.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;fi.isDocumentKey(i)||(i=i.child(""));var o=new oc(new fi(i),0),s=new Zo(Hr);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Ea.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Fr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Ea.forEach(e.mutations,function(i){var o=new oc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new oc(e,0),r=this.rs.firstAfterOrEqual(n);return Ea.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Ea.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ac=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Xo(fi.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Ea.resolve(n?n.document.clone():xi.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ns();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():xi.newInvalidDocument(t))}),Ea.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ns(),i=new fi(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||co(e,u)&&(r=r.insert(u.key,u.clone()))}return Ea.resolve(r)},t.prototype.fs=function(t,e){return Ea.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new uc(this)},t.prototype.getSize=function(t){return Ea.resolve(this.size)},t}(),uc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Cr.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Ea.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Su),cc=function(){function t(t){this.persistence=t,this.ds=new Eu(function(t){return ki(t)},Ni),this.lastRemoteSnapshotVersion=Kr.min(),this.highestTargetId=0,this.ws=0,this._s=new ic,this.targetCount=0,this.ys=hu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Ea.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Ea.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Ea.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Ea.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Ea.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new hu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Ea.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Ea.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Ea.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ea.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Ea.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Ea.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Ea.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Ea.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Ea.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Ea.resolve(n)},t.prototype.containsKey=function(t,e){return Ea.resolve(this._s.containsKey(e))},t}(),lc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new xr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new cc(this),this.Ut=new Ja,this.Ue=function(t,e){return new ac(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Fa(e),this.Qe=new rc(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new sc(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Rr("MemoryPersistence","Starting transaction:",t);var i=new hc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Ea.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),hc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Cr.c)(e,t),e}(_a),fc=function(){function t(t){this.persistence=t,this.As=new ic,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Mr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Ea.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Ea.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Ea.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ea.forEach(this.vs,function(r){var i=fi.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Ea.or([function(){return Ea.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),dc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function pc(t,e){return"firestore_clients_"+t+"_"+e}function gc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function mc(t,e){return"firestore_targets_"+t+"_"+e}dc.UNAUTHENTICATED=new dc(null),dc.GOOGLE_CREDENTIALS=new dc("google-credentials-uid"),dc.FIRST_PARTY=new dc("first-party-uid");var yc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ar(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Dr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),vc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ar(i.error.code,i.error.message)),o?new t(e,i.state,r):(Dr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ls(),s=0;i&&s<r.activeTargetIds.length;++s)i=hi(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Dr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),wc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Dr("SharedClientState","Failed to parse online state: "+e),null)},t}(),_c=function(){function t(){this.activeTargetIds=ls()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Oc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Xo(Hr),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=pc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new _c),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Cr.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Cr.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(pc(this.persistenceKey,r)))&&(o=bc.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(mc(this.persistenceKey,t));if(n){var r=vc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(mc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Rr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Rr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Rr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Rr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Cr.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Cr.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=xr.o;if(null!=t)try{var n=JSON.parse(t);Fr("number"==typeof n),e=n}catch(t){Dr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==xr.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new yc(this.currentUser,t,e,n),i=gc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=gc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=mc(this.persistenceKey,t),i=new vc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return bc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return yc.Vs(new dc(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return vc.Vs(r,e)},t.prototype.js=function(t){return wc.Vs(t)},t.prototype.ii=function(t){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Rr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ls();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Ec=function(){function t(){this.li=new _c,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new _c,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Sc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Tc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Rr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Rr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ic={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Cc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),xc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Cr.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Ir;s.listenOnce(Er.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Or.NO_ERROR:var e=s.getResponseJson();Rr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Or.TIMEOUT:Rr("Connection",'RPC "'+t+'" timed out'),o(new Ar(jr.DEADLINE_EXCEEDED,"Request time out"));break;case Or.HTTP_ERROR:var n=s.getStatus();if(Rr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(jr).indexOf(e)>=0?e:jr.UNKNOWN}(r.status);o(new Ar(a,r.message))}else o(new Ar(jr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ar(jr.UNAVAILABLE,"Connection failed."));break;default:Mr()}}finally{Rr("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new yr,i=be(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(E.m)()||Object(E.o)()||Object(E.k)()||Object(E.l)()||Object(E.p)()||Object(E.j)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Rr("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Cc({Ei:function(t){c?Rr("Connection","Not sending because WebChannel is closed:",t):(u||(Rr("Connection","Opening WebChannel transport."),a.open(),u=!0),Rr("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Tr.EventType.OPEN,function(){c||Rr("Connection","WebChannel transport opened.")}),h(a,Tr.EventType.CLOSE,function(){c||(c=!0,Rr("Connection","WebChannel transport closed"),l.Vi())}),h(a,Tr.EventType.ERROR,function(t){c||(c=!0,Pr("Connection","WebChannel transport errored:",t),l.Vi(new Ar(jr.UNAVAILABLE,"The operation could not be completed")))}),h(a,Tr.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Fr(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Rr("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Bo[t];if(void 0!==e)return $o(e)}(i),s=r.message;void 0===o&&(o=jr.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Ar(o,s)),a.close()}else Rr("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Sr.STAT_EVENT,function(t){10===t.stat?Rr("Connection","Detected buffering proxy"):11===t.stat&&Rr("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Rr("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Rr("RestConnection","Received: ",t),t},function(e){throw Pr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.0",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Ic[t]},t}());function jc(){return"undefined"!=typeof window?window:null}function Ac(){return"undefined"!=typeof document?document:null}function kc(t){return new Os(t,!0)}var Nc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Rr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Rc=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Nc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===jr.RESOURCE_EXHAUSTED?(Dr(e.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===jr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Ar(jr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Cr.b)(t,void 0,void 0,function(){return Object(Cr.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Rr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Rr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Dc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Cr.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Mr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Fr(void 0===e||"string"==typeof e),ei.fromBase64String(e||"")):(Fr(void 0===e||e instanceof Uint8Array),ei.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?jr.UNKNOWN:$o(t.code);return new Ar(e,t.message||"")}(a);n=new gs(r,i,o,s||null)}else if("documentChange"in e){i=As(t,(r=e.documentChange).document.name),o=Is(r.document.updateTime);var a=new Ii({mapValue:{fields:r.document.fields}}),u=(s=xi.newFoundDocument(i,o,a),r.targetIds||[]);n=new ds(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=As(t,(r=e.documentDelete).document),o=r.readTime?Is(r.readTime):Kr.min(),a=xi.newNoDocument(i,o),n=new ds([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=As(t,(r=e.documentRemove).document),n=new ds([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Mr();var c=e.filter;i=new Wo(r=c.count||0),n=new ps(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Kr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Kr.min():e.readTime?Is(e.readTime):Kr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Rs(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ri(r)?{documents:Us(t,r)}:{query:Vs(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ss(t,e.resumeToken):e.snapshotVersion.compareTo(Kr.min())>0&&(n.readTime=Es(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Rs(this.R),e.removeTarget=t,this.cr(e)},e}(Rc),Pc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Cr.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Fr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Fr(void 0!==e),t.map(function(t){return function(t,e){var n=Is(t.updateTime?t.updateTime:e);return n.isEqual(Kr.min())&&(n=Is(e)),new jo(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Is(t.commitTime);return this.listener.Tr(n,e)}return Fr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Rs(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Ms(e.R,t)})};this.cr(n)},e}(Rc),Lc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Cr.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Ar(jr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw t.code===jr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw t.code===jr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Rr=!1},e}(function(){}),Mc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Dr(e),this.Vr=!1):Rr("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Fc=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Cr.b)(o,void 0,void 0,function(){return Object(Cr.d)(this,function(t){switch(t.label){case 0:return Wc(this)?(Rr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Cr.b)(this,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:return(e=Ur(t)).$r.add(4),[4,Vc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Uc(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Mc(n,r)};function Uc(t){return Object(Cr.b)(this,void 0,void 0,function(){var e,n;return Object(Cr.d)(this,function(r){switch(r.label){case 0:if(!Wc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Vc(t){return Object(Cr.b)(this,void 0,void 0,function(){var e,n;return Object(Cr.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function qc(t,e){var n=Ur(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Kc(n)?Gc(n):ul(n).er()&&Bc(n,e))}function Hc(t,e){var n=Ur(t),r=ul(n);n.Or.delete(e),r.er()&&zc(n,e),0===n.Or.size&&(r.er()?r.ir():Wc(n)&&n.Br.set("Unknown"))}function Bc(t,e){t.qr.U(e.targetId),ul(t).mr(e)}function zc(t,e){t.qr.U(e),ul(t).yr(e)}function Gc(t){t.qr=new ys({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),ul(t).start(),t.Br.Sr()}function Kc(t){return Wc(t)&&!ul(t).tr()&&t.Or.size>0}function Wc(t){return 0===Ur(t).$r.size}function Qc(t){t.qr=void 0}function $c(t){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(e){return t.Or.forEach(function(e,n){Bc(t,e)}),[2]})})}function Xc(t,e){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(n){return Qc(t),Kc(t)?(t.Br.Nr(e),Gc(t)):t.Br.set("Unknown"),[2]})})}function Yc(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r,i,o;return Object(Cr.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof gs&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Cr.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Rr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Jc(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ds?t.qr.X(e):e instanceof ps?t.qr.rt(e):t.qr.et(e),n.isEqual(Kr.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Gu(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(ei.EMPTY_BYTE_STRING,n.snapshotVersion)),zc(t,e);var r=new Ma(n.target,e,1,n.sequenceNumber);Bc(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Rr("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Jc(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Jc(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r=this;return Object(Cr.d)(this,function(i){switch(i.label){case 0:if(!xa(e))throw e;return t.$r.add(1),[4,Vc(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Gu(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Cr.b)(r,void 0,void 0,function(){return Object(Cr.d)(this,function(e){switch(e.label){case 0:return Rr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Uc(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Zc(t,e){return e().catch(function(n){return Jc(t,n,e)})}function tl(t){return Object(Cr.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Cr.d)(this,function(s){switch(s.label){case 0:e=Ur(t),n=cl(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Wc(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Qu(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=cl(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Jc(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return el(e)&&nl(e),[2]}})})}function el(t){return Wc(t)&&!cl(t).tr()&&t.kr.length>0}function nl(t){cl(t).start()}function rl(t){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(e){return cl(t).Ar(),[2]})})}function il(t){return Object(Cr.b)(this,void 0,void 0,function(){var e,n,r;return Object(Cr.d)(this,function(i){for(e=cl(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function ol(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r,i;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=La.from(r,e,n),[4,Zc(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,tl(t)];case 2:return o.sent(),[2]}})})}function sl(t,e){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(n){switch(n.label){case 0:return e&&cl(t).pr?[4,function(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return Qo(r=e.code)&&r!==jr.ABORTED?(n=t.kr.shift(),cl(t).sr(),[4,Zc(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,tl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return el(t)&&nl(t),[2]}})})}function al(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n;return Object(Cr.d)(this,function(r){switch(r.label){case 0:return n=Ur(t),e?(n.$r.delete(2),[4,Uc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Vc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function ul(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Ur(t);return r.br(),new Dc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:$c.bind(null,t),Ri:Xc.bind(null,t),_r:Yc.bind(null,t)}),t.Mr.push(function(n){return Object(Cr.b)(e,void 0,void 0,function(){return Object(Cr.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Kc(t)?Gc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Qc(t),e.label=3;case 3:return[2]}})})})),t.Ur}function cl(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Ur(t);return r.br(),new Pc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:rl.bind(null,t),Ri:sl.bind(null,t),Ir:il.bind(null,t),Tr:ol.bind(null,t)}),t.Mr.push(function(n){return Object(Cr.b)(e,void 0,void 0,function(){return Object(Cr.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,tl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Rr("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var ll=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ar(jr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function hl(t,e){if(Dr("AsyncQueue",e+": "+t),xa(t))return new Ar(jr.UNAVAILABLE,e+": "+t);throw t}var fl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||fi.comparator(e.key,n.key)}:function(t,e){return fi.comparator(t.key,e.key)},this.keyedMap=is(),this.sortedSet=new Xo(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),dl=function(){function t(){this.Kr=new Xo(fi.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Mr():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),pl=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,fl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&so(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),gl=function(){this.Wr=void 0,this.listeners=[]},ml=function(){this.queries=new Eu(function(t){return ao(t)},so),this.onlineState="Unknown",this.Gr=new Set};function yl(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Cr.d)(this,function(c){switch(c.label){case 0:if(n=Ur(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new gl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=hl(a,"Initialization of query '"+uo(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&_l(n),[2]}})})}function vl(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Cr.d)(this,function(a){return n=Ur(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function bl(t,e){for(var n=Ur(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&_l(n)}function wl(t,e,n){var r=Ur(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function _l(t){t.Gr.forEach(function(t){t.next()})}var Ol=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new pl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=pl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),El=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Sl=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return As(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ls(this.R,t.document,!1):xi.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Is(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Sl(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||us()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Cr.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return[4,ec(this.localStore,new Sl(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,nc(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Mu(Object.assign({},this.progress),t))]}})})}}();var Tl=function(t){this.key=t},Il=function(t){this.key=t},Cl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=us(),this.mutatedKeys=us(),this.lo=lo(t),this.fo=new fl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new dl,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Ji(this.query)&&i.size===this.query.limit?i.last():null,c=Zi(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=co(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Ji(this.query)||Zi(this.query))for(;s.size>this.query.limit;){var l=Ji(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new pl(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new dl,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=us(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Il(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Tl(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=us();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return pl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),xl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},jl=function(t){this.key=t,this.bo=!1},Al=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Eu(function(t){return ao(t)},so),this.Vo=new Map,this.So=new Set,this.Do=new Xo(fi.comparator),this.Co=new Map,this.No=new ic,this.xo={},this.Fo=new Map,this.ko=hu.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function kl(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Cr.d)(this,function(a){switch(a.label){case 0:return n=sh(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,$u(n.localStore,io(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Nl(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&qc(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Nl(t,e,n,r){return Object(Cr.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Cr.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Cr.b)(this,void 0,void 0,function(){var i,o,s;return Object(Cr.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Yu(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Gl(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Yu(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Cl(e,i.Bn),s=o._o(i.documents),a=fs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Gl(t,n,u.To),c=new xl(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Rl(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return n=Ur(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!so(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Xu(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Hc(n.remoteStore,r.targetId),Bl(n,r.targetId)}).catch(mu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Bl(n,r.targetId),[4,Xu(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Dl(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Cr.d)(this,function(a){switch(a.label){case 0:r=ah(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ur(t),i=Gr.now(),o=e.reduce(function(t,e){return t.add(e.key)},us());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Po(c,n.get(c.key));null!=l&&s.push(new Uo(c.key,l,Ci(l.toProto().mapValue),Ao.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Xo(Hr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ql(r,i.changes)];case 3:return a.sent(),[4,tl(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=hl(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Pl(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r;return Object(Cr.d)(this,function(i){switch(i.label){case 0:n=Ur(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ku(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Fr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Fr(r.bo):t.removedDocuments.size>0&&(Fr(r.bo),r.bo=!1))}),[4,Ql(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,mu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Ll(t,e,n){var r=Ur(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Ur(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&_l(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ml(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Cr.d)(this,function(c){switch(c.label){case 0:return(r=Ur(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Xo(fi.comparator)).insert(o,xi.newNoDocument(o,Kr.min())),a=us().add(o),u=new hs(Kr.min(),new Map,new Zo(Hr),s,a),[4,Pl(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Wl(r),[3,4];case 2:return[4,Xu(r.localStore,e,!1).then(function(){return Bl(r,e,n)}).catch(mu)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Fl(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Cr.d)(this,function(o){switch(o.label){case 0:n=Ur(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,zu(n.localStore,e)];case 2:return i=o.sent(),Hl(n,r,null),ql(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ql(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,mu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Ul(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r,i;return Object(Cr.d)(this,function(o){switch(o.label){case 0:r=Ur(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ur(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Fr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Hl(r,e,n),ql(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Ql(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,mu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Vl(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Cr.d)(this,function(a){switch(a.label){case 0:Wc((n=Ur(t)).remoteStore)||Rr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ur(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=hl(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function ql(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Hl(t,e,n){var r=Ur(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Bl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||zl(t,e)})}function zl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Hc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Wl(t))}function Gl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Tl?(t.No.addReference(o.key,e),Kl(t,o)):o instanceof Il?(Rr("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||zl(t,o.key)):Mr()}}function Kl(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Rr("SyncEngine","New document in limbo: "+n),t.So.add(r),Wl(t))}function Wl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new fi(Yr.fromString(e)),r=t.ko.next();t.Co.set(r,new jl(n)),t.Do=t.Do.insert(n,r),qc(t.remoteStore,new Ma(io(Yi(n.path)),r,2,xr.o))}}function Ql(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Cr.d)(this,function(a){switch(a.label){case 0:return r=Ur(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Uu.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Cr.d)(this,function(l){switch(l.label){case 0:n=Ur(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Ea.forEach(e,function(e){return Ea.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Ea.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!xa(r=l.sent()))throw r;return Rr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function $l(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return(n=Ur(t)).currentUser.isEqual(e)?[3,3]:(Rr("SyncEngine","User change. New user:",e.toKey()),[4,Bu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Ar(jr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Ql(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Xl(t,e){var n=Ur(t),r=n.Co.get(e);if(r&&r.bo)return us().add(r.key);var i=us(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Yl(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return[4,Yu((n=Ur(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Gl(n,e.targetId,i.To),i)]}})})}function Jl(t){return Object(Cr.b)(this,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){return[2,Zu((e=Ur(t)).localStore).then(function(t){return Ql(e,t)})]})})}function Zl(t,e,n,r){return Object(Cr.b)(this,void 0,void 0,function(){var i,o;return Object(Cr.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ur(t),r=Ur(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Ea.resolve(null)})})}((i=Ur(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,tl(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Hl(i,e,r||null),ql(i,e),function(t,e){Ur(Ur(t)._n).Gt(e)}(i.localStore,e)):Mr(),s.label=4;case 4:return[4,Ql(i,o)];case 5:return s.sent(),[3,7];case 6:Rr("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function th(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Cr.d)(this,function(c){switch(c.label){case 0:return sh(n=Ur(t)),ah(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,eh(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,al(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)qc(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Bl(n,e),Xu(n.localStore,e,!0)}),Hc(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,eh(n,a)];case 5:return c.sent(),function(t){var e=Ur(t);e.Co.forEach(function(t,n){Hc(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Xo(fi.comparator)}(n),n.Oo=!1,[4,al(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function eh(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Cr.d)(this,function(g){switch(g.label){case 0:n=Ur(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,$u(n.localStore,io(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Yl(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Ju(n.localStore,a)];case 8:return p=g.sent(),[4,$u(n.localStore,p)];case 9:return u=g.sent(),[4,Nl(n,nh(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function nh(t){return Xi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function rh(t){var e=Ur(t);return Ur(Ur(e.localStore).persistence).fn()}function ih(t,e,n,r){return Object(Cr.b)(this,void 0,void 0,function(){var i,o,s;return Object(Cr.d)(this,function(a){switch(a.label){case 0:return(i=Ur(t)).Oo?(Rr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Zu(i.localStore)];case 3:return o=a.sent(),s=hs.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Ql(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Xu(i.localStore,e,!0)];case 6:return a.sent(),Bl(i,e,r),[3,8];case 7:Mr(),a.label=8;case 8:return[2]}})})}function oh(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Cr.d)(this,function(f){switch(f.label){case 0:if(!(r=sh(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Rr("SyncEngine","Adding an already active target "+s),[3,5]):[4,Ju(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,$u(r.localStore,a)];case 3:return u=f.sent(),[4,Nl(r,nh(a),u.targetId,!1)];case 4:f.sent(),qc(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Cr.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Xu(r.localStore,t,!1).then(function(){Hc(r.remoteStore,t),Bl(r,t)}).catch(mu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function sh(t){var e=Ur(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ml.bind(null,e),e.vo._r=bl.bind(null,e.eventManager),e.vo.Mo=wl.bind(null,e.eventManager),e}function ah(t){var e=Ur(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ul.bind(null,e),e}var uh=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(e){switch(e.label){case 0:return this.R=kc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Hu(this.persistence,new Vu,t.initialUser,this.R)},t.prototype.qo=function(t){return new lc(fc.bs,this.R)},t.prototype.Bo=function(t){return new Ec},t.prototype.terminate=function(){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),ch=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Cr.c)(e,t),e.prototype.initialize=function(e){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,tc(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,ah(this.Ko.syncEngine)];case 4:return n.sent(),[4,tl(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Hu(this.persistence,new Vu,t.initialUser,this.R)},e.prototype.Uo=function(t){return new bu(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Lu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ru.withCacheSize(this.cacheSizeBytes):ru.DEFAULT;return new Ru(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,jc(),Ac(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Ec},e}(uh),lh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Cr.c)(e,t),e.prototype.initialize=function(e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r=this;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Oc?(this.sharedClientState.syncEngine={ui:Zl.bind(null,n),ai:ih.bind(null,n),hi:oh.bind(null,n),fn:rh.bind(null,n),ci:Jl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Cr.b)(r,void 0,void 0,function(){return Object(Cr.d)(this,function(e){switch(e.label){case 0:return[4,th(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=jc();if(!Oc.yt(e))throw new Ar(jr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Lu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Oc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(ch),hh=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n=this;return Object(Cr.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Ll(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=$l.bind(null,this.syncEngine),[4,al(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new ml},t.prototype.createDatastore=function(t){var e=kc(t.databaseInfo.databaseId),n=new xc(t.databaseInfo);return function(t,e,n){return new Lc(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Ll(s.syncEngine,t,0)},o=Tc.yt()?new Tc:new Sc,new Fc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Al(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Cr.b)(this,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:return e=Ur(t),Rr("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Vc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),fh=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),dh=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Oa,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Cr.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new El(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Cr.b)(this,void 0,void 0,function(){var t,e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Cr.b)(this,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Cr.b)(this,void 0,void 0,function(){var t,e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Cr.b)(this,void 0,void 0,function(){var e,n=this;return Object(Cr.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ar(jr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Cr.d)(this,function(u){switch(u.label){case 0:return n=Ur(t),r=Rs(n.R)+"/documents",i={documents:e.map(function(t){return js(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Fr(!!e.found);var n=As(t,e.found.name),r=Is(e.found.updateTime),i=new Ii({mapValue:{fields:e.found.fields}});return xi.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Fr(!!e.missing),Fr(!!e.readTime);var n=As(t,e.missing),r=Is(e.readTime);return xi.newNoDocument(n,r)}(t,e):Mr()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Fr(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Go(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Cr.b)(this,void 0,void 0,function(){var t,e=this;return Object(Cr.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=fi.fromPath(n);e.mutations.push(new Ko(r,e.precondition(r)))}),[4,function(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return n=Ur(t),r=Rs(n.R)+"/documents",i={writes:e.map(function(t){return Ms(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Mr();e=Kr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ar(jr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ao.updateTime(e):Ao.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Kr.min()))throw new Ar(jr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ao.updateTime(e)}return Ao.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),ph=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Nc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Cr.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Cr.d)(this,function(r){return t=new dh(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ci(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Qo(e)}return!1},t}(),gh=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=dc.UNAUTHENTICATED,this.clientId=qr.u(),this.credentialListener=function(){},this.receivedInitialUser=new Oa,this.credentials.setChangeListener(function(t){Rr("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ar(jr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Cr.b)(t,void 0,void 0,function(){var t,n;return Object(Cr.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=hl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function mh(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Rr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Cr.b)(i,void 0,void 0,function(){return Object(Cr.d)(this,function(t){switch(t.label){case 0:return[4,Bu(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function yh(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,vh(t)];case 1:return n=i.sent(),Rr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Cr.b)(this,void 0,void 0,function(){var n,r;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return(n=Ur(t)).asyncQueue.verifyOperationInProgress(),Rr("RemoteStore","RemoteStore received new credentials"),r=Wc(n),n.$r.add(3),[4,Vc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Uc(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function vh(t){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Rr("FirestoreClient","Using default OfflineComponentProvider"),[4,mh(t,new uh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function bh(t){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Rr("FirestoreClient","Using default OnlineComponentProvider"),[4,yh(t,new hh)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function wh(t){return vh(t).then(function(t){return t.persistence})}function _h(t){return vh(t).then(function(t){return t.localStore})}function Oh(t){return bh(t).then(function(t){return t.remoteStore})}function Eh(t){return bh(t).then(function(t){return t.syncEngine})}function Sh(t){return Object(Cr.b)(this,void 0,void 0,function(){var e,n;return Object(Cr.d)(this,function(r){switch(r.label){case 0:return[4,bh(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=kl.bind(null,e.syncEngine),n.onUnlisten=Rl.bind(null,e.syncEngine),n)]}})})}function Th(t,e,n){var r=this;void 0===n&&(n={});var i=new Oa;return t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(r,void 0,void 0,function(){var r;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new fh({next:function(o){e.enqueueAndForget(function(){return vl(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ar(jr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ar(jr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Ol(Yi(n.path),o,{includeMetadataChanges:!0,so:!0});return yl(t,s)},[4,Sh(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Ih(t,e,n){var r=this;void 0===n&&(n={});var i=new Oa;return t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(r,void 0,void 0,function(){var r;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new fh({next:function(n){e.enqueueAndForget(function(){return vl(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Ar(jr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Ol(n,o,{includeMetadataChanges:!0,so:!0});return yl(t,s)},[4,Sh(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Ch=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},xh=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),jh=new Map,Ah=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},kh=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(dc.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Nh=function(){function t(t){var e=this;this.oc=null,this.currentUser=dc.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Rr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Fr("string"==typeof n.accessToken),new Ah(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Fr(null===t||"string"==typeof t),new dc(t)},t}(),Rh=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=dc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Dh=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Rh(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(dc.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ph(t,e,n){if(!n)throw new Ar(jr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Lh(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ar(jr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Mh(t,e,n,r){if(!0===e&&!0===r)throw new Ar(jr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Fh(t){if(!fi.isDocumentKey(t))throw new Ar(jr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Uh(t){if(fi.isDocumentKey(t))throw new Ar(jr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Vh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Mr()}function qh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ar(jr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Vh(t);throw new Ar(jr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Hh(t,e){if(e<=0)throw new Ar(jr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Bh=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ar(jr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ar(jr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Mh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),zh=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Bh({}),this._settingsFrozen=!1,t instanceof xh?(this._databaseId=t,this._credentials=new kh):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ar(jr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xh(t.options.projectId)}(t),this._credentials=new Nh(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ar(jr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ar(jr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bh(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new kh;switch(t.type){case"gapi":var e=t.client;return Fr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Dh(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ar(jr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=jh.get(this))&&(Rr("ComponentProvider","Removing Datastore"),jh.delete(this),t.terminate()),Promise.resolve();var t},t}(),Gh=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Wh(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Kh=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Wh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Yi(r))||this)._path=r,i.type="collection",i}return Object(Cr.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Gh(this.firestore,null,new fi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Kh);function Qh(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(E.g)(t),Ph("collection","path",e),t instanceof zh)return Uh(n=Yr.fromString.apply(Yr,Object(Cr.f)([e],r))),new Wh(t,null,n);if(!(t instanceof Gh||t instanceof Wh))throw new Ar(jr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Uh(n=Yr.fromString.apply(Yr,Object(Cr.f)([t.path],r)).child(Yr.fromString(e))),new Wh(t.firestore,null,n)}function $h(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(E.g)(t),1===arguments.length&&(e=qr.u()),Ph("doc","path",e),t instanceof zh)return Fh(n=Yr.fromString.apply(Yr,Object(Cr.f)([e],r))),new Gh(t,null,new fi(n));if(!(t instanceof Gh||t instanceof Wh))throw new Ar(jr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Fh(n=t._path.child(Yr.fromString.apply(Yr,Object(Cr.f)([e],r)))),new Gh(t.firestore,t instanceof Wh?t._converter:null,new fi(n))}function Xh(t,e){return t=Object(E.g)(t),e=Object(E.g)(e),(t instanceof Gh||t instanceof Wh)&&(e instanceof Gh||e instanceof Wh)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Yh(t,e){return t=Object(E.g)(t),e=Object(E.g)(e),t instanceof Kh&&e instanceof Kh&&t.firestore===e.firestore&&so(t._query,e._query)&&t._converter===e._converter}var Jh=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Nc(this,"async_queue_retry"),this.Ec=function(){var e=Ac();e&&Rr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Ac();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Ac();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Cr.b)(this,void 0,void 0,function(){var t,e=this;return Object(Cr.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!xa(t=n.sent()))throw t;return Rr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Dr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=ll.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Mr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Cr.b)(this,void 0,void 0,function(){var t;return Object(Cr.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Zh(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Oa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var tf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Jh,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Cr.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||nf(this),this._firestoreClient.terminate()},e}(zh);function ef(t){return t._firestoreClient||nf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function nf(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Ch(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new gh(t._credentials,t._queue,r)}function rf(t,e,n){var r=this,i=new Oa;return t.asyncQueue.enqueue(function(){return Object(Cr.b)(r,void 0,void 0,function(){var r;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,mh(t,n)];case 1:return o.sent(),[4,yh(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===jr.FAILED_PRECONDITION||t.code===jr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function of(t){if(t._initialized||t._terminated)throw new Ar(jr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ar(jr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zr(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),af=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ei.fromBase64String(e))}catch(e){throw new Ar(jr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ei.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),uf=function(t){this._methodName=t},cf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ar(jr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ar(jr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Hr(this._lat,t._lat)||Hr(this._long,t._long)},t}(),lf=/^__.*__$/,hf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Uo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Fo(t,this.data,e,this.fieldTransforms)},t}(),ff=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Uo(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function df(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mr()}}var pf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Df(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(df(this.Dc)&&lf.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),gf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||kc(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new pf({Dc:t,methodName:e,Lc:n,path:Zr.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function mf(t){var e=t._freezeSettings(),n=kc(t._databaseId);return new gf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);Af("Data must be an object, but it was:",s,r);var a,u,c=xf(r,s);if(o.merge)a=new ti(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=kf(e,f[h],n);if(!s.contains(d))throw new Ar(jr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Pf(l,d)||l.push(d)}a=new ti(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new hf(new Ii(c),a,u)}var vf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Cr.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(uf);function bf(t,e,n){return new pf({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Cr.c)(e,t),e.prototype._toFieldTransform=function(t){return new xo(t.path,new wo)},e.prototype.isEqual=function(t){return t instanceof e},e}(uf),_f=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Cr.c)(e,t),e.prototype._toFieldTransform=function(t){var e=bf(this,t,!0),n=this.qc.map(function(t){return Cf(t,e)}),r=new _o(n);return new xo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(uf),Of=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Cr.c)(e,t),e.prototype._toFieldTransform=function(t){var e=bf(this,t,!0),n=this.qc.map(function(t){return Cf(t,e)}),r=new Eo(n);return new xo(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(uf),Ef=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Cr.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new To(t.R,go(t.R,this.Uc));return new xo(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(uf);function Sf(t,e,n,r){var i=t.Bc(1,e,n);Af("Data must be an object, but it was:",i,r);var o=[],s=Ii.empty();Qr(r,function(t,r){var a=Rf(e,t,n);r=Object(E.g)(r);var u=i.kc(a);if(r instanceof vf)o.push(a);else{var c=Cf(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new ti(o);return new ff(s,a,i.fieldTransforms)}function Tf(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[kf(e,r,n)],u=[i];if(o.length%2!=0)throw new Ar(jr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(kf(e,o[c])),u.push(o[c+1]);for(var l=[],h=Ii.empty(),f=a.length-1;f>=0;--f)if(!Pf(l,a[f])){var d=a[f],p=u[f];p=Object(E.g)(p);var g=s.kc(d);if(p instanceof vf)l.push(d);else{var m=Cf(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new ti(l);return new ff(h,y,s.fieldTransforms)}function If(t,e,n,r){return void 0===r&&(r=!1),Cf(n,t.Bc(r?4:3,e))}function Cf(t,e){if(jf(t=Object(E.g)(t)))return Af("Unsupported field value:",e,t),xf(t,e);if(t instanceof uf)return function(t,e){if(!df(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Cf(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(E.g)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return go(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Gr.fromDate(t);return{timestampValue:Es(e.R,n)}}if(t instanceof Gr)return n=new Gr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Es(e.R,n)};if(t instanceof cf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof af)return{bytesValue:Ss(e.R,t._byteString)};if(t instanceof Gh){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Cs(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Vh(t))}(t,e)}function xf(t,e){var n={};return $r(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qr(t,function(t,r){var i=Cf(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function jf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gr||t instanceof cf||t instanceof af||t instanceof Gh||t instanceof uf)}function Af(t,e,n){if(!jf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Vh(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function kf(t,e,n){if((e=Object(E.g)(e))instanceof sf)return e._internalPath;if("string"==typeof e)return Rf(t,e);throw Df("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Nf=new RegExp("[~\\*/\\[\\]]");function Rf(t,e,n){if(e.search(Nf)>=0)throw Df("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(sf.bind.apply(sf,Object(Cr.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Df("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Df(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ar(jr.INVALID_ARGUMENT,(a+=". ")+t+u)}function Pf(t,e){return t.some(function(t){return t.isEqual(e)})}var Lf=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Gh(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Mf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Ff("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Cr.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Lf);function Ff(t,e){return"string"==typeof e?Rf(t,e):e instanceof sf?e._internalPath:e._delegate._internalPath}var Uf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Vf=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Cr.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Ff("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Lf),qf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Cr.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Vf),Hf=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Uf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new qf(n._firestore,n._userDataWriter,r.key,r,new Uf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ar(jr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new qf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Uf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new qf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Uf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Bf(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Bf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mr()}}function zf(t,e){return t instanceof Vf&&e instanceof Vf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Hf&&e instanceof Hf&&t._firestore===e._firestore&&Yh(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Gf(t){if(Zi(t)&&0===t.explicitOrderBy.length)throw new Ar(jr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kf=function(){};function Wf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Qf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Cr.c)(e,t),e.prototype._apply=function(t){var e=mf(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ar(jr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ed(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(td(r,t,l[c]));a={arrayValue:{values:u}}}else a=td(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ed(s,o),a=If(n,"where",s,"in"===o||"not-in"===o);var h=Di.create(i,o,a);return function(t,e){if(e.g()){var n=eo(t);if(null!==n&&!n.isEqual(e.field))throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=to(t);null!==r&&nd(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ar(jr.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Kh(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Kf),$f=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Cr.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Gi(e,n);return function(t,e){if(null===to(t)){var n=eo(t);null!==n&&nd(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Kh(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new $i(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Kf),Xf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Cr.c)(e,t),e.prototype._apply=function(t){return new Kh(t.firestore,t._converter,oo(t._query,this.Gc,this.zc))},e}(Kf),Yf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Cr.c)(e,t),e.prototype._apply=function(t){var e=Zf(t,this.type,this.Hc,this.Jc);return new Kh(t.firestore,t._converter,function(t,e){return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Kf),Jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Cr.c)(e,t),e.prototype._apply=function(t){var e=Zf(t,this.type,this.Hc,this.Jc);return new Kh(t.firestore,t._converter,function(t,e){return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Kf);function Zf(t,e,n,r){if(n[0]=Object(E.g)(n[0]),n[0]instanceof Lf)return function(t,e,n,r,i){if(!r)throw new Ar(jr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ro(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(wi(e,r.key));else{var c=r.data.field(u.field);if(si(c))throw new Ar(jr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Bi(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=mf(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Ar(jr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!no(t)&&-1!==c.indexOf("/"))throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Yr.fromString(c));if(!fi.isDocumentKey(l))throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new fi(l);a.push(wi(e,h))}else{var f=If(n,r,c);a.push(f)}}return new Bi(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function td(t,e,n){if("string"==typeof(n=Object(E.g)(n))){if(""===n)throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!no(e)&&-1!==n.indexOf("/"))throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Yr.fromString(n));if(!fi.isDocumentKey(r))throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return wi(t,new fi(r))}if(n instanceof Gh)return wi(t,n._key);throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Vh(n)+".")}function ed(t,e){if(!Array.isArray(t)||0===t.length)throw new Ar(jr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ar(jr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function nd(t,e,n){if(!n.isEqual(e))throw new Ar(jr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var rd=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),di(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ii(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(oi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Mr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Qr(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new cf(ii(t.latitude),ii(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ai(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ui(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ri(t);return new Gr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Yr.fromString(t);Fr(Js(n));var r=new xh(n.get(1),n.get(3)),i=new fi(n.popFirst(5));return r.isEqual(e)||Dr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function id(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var od=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Cr.c)(e,t),e.prototype.convertBytes=function(t){return new af(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Gh(this.firestore,null,e)},e}(rd),sd=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=mf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=ad(t,this._firestore),i=id(r._converter,e,n),o=yf(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Ao.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=ad(t,this._firestore);return o="string"==typeof(e=Object(E.g)(e))||e instanceof sf?Tf(this._dataReader,"WriteBatch.update",s._key,e,n,r):Sf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ao.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=ad(t,this._firestore);return this._mutations=this._mutations.concat(new Go(e._key,Ao.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ar(jr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function ad(t,e){if((t=Object(E.g)(t)).firestore!==e)throw new Ar(jr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ud=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Cr.c)(e,t),e.prototype.convertBytes=function(t){return new af(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Gh(this.firestore,null,e)},e}(rd);function cd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=qh(t,Gh);var o=qh(t.firestore,tf),s=mf(o);return hd(o,[("string"==typeof(e=Object(E.g)(e))||e instanceof sf?Tf(s,"updateDoc",t._key,e,n,r):Sf(s,"updateDoc",t._key,e)).toMutation(t._key,Ao.exists(!0))])}function ld(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(E.g)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Zh(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Zh(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Gh)c=qh(t.firestore,tf),l=Yi(t._key.path),u={next:function(e){i[a]&&i[a](fd(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=qh(t,Kh);c=qh(d.firestore,tf),l=d._query;var p=new ud(c);u={next:function(t){i[a]&&i[a](new Hf(c,p,d,t))},error:i[a+1],complete:i[a+2]},Gf(t._query)}return function(t,e,n,r){var i=this,o=new fh(r),s=new Ol(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(i,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:return e=yl,[4,Sh(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(i,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:return e=vl,[4,Sh(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(ef(c),l,h,u)}function hd(t,e){return function(t,e){var n=this,r=new Oa;return t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(n,void 0,void 0,function(){var n;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return n=Dl,[4,Eh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(ef(t),e)}function fd(t,e,n){var r=n.docs.get(e._key),i=new ud(t);return new Vf(t,i,e._key,r,new Uf(n.hasPendingWrites,n.fromCache),e._converter)}var dd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Cr.c)(e,t),e.prototype.get=function(e){var n=this,r=ad(e,this._firestore),i=new ud(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Vf(n._firestore,i,r._key,t._document,new Uf(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=mf(t)}return t.prototype.get=function(t){var e=this,n=ad(t,this._firestore),r=new od(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Mr();var i=t[0];if(i.isFoundDocument())return new Lf(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Lf(e._firestore,r,n._key,null,n._converter);throw Mr()})},t.prototype.set=function(t,e,n){var r=ad(t,this._firestore),i=id(r._converter,e,n),o=yf(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=ad(t,this._firestore);return o="string"==typeof(e=Object(E.g)(e))||e instanceof sf?Tf(this._dataReader,"Transaction.update",s._key,e,n,r):Sf(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=ad(t,this._firestore);return this._transaction.delete(e._key),this},t}());function pd(){if("undefined"==typeof Uint8Array)throw new Ar(jr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function gd(){if("undefined"==typeof atob)throw new Ar(jr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var md=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return gd(),new t(af.fromBase64String(e))},t.fromUint8Array=function(e){return pd(),new t(af.fromUint8Array(e))},t.prototype.toBase64=function(){return gd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return pd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),yd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){of(t=qh(t,tf));var n=ef(t),r=t._freezeSettings(),i=new hh;return rf(n,i,new ch(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){of(t=qh(t,tf));var e=ef(t),n=t._freezeSettings(),r=new hh;return rf(e,r,new lh(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ar(jr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Oa;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Cr.b)(e,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Cr.b)(this,void 0,void 0,function(){return Object(Cr.d)(this,function(e){switch(e.label){case 0:return Ta.yt()?[4,Ta.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Lu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),vd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof xh||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=qh(t,zh))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Pr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Cr.b)(e,void 0,void 0,function(){var e,n;return Object(Cr.d)(this,function(r){switch(r.label){case 0:return[4,wh(t)];case 1:return e=r.sent(),[4,Oh(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ur(t);return e.$r.delete(0),Uc(e)}(n))]}})})})}(ef(qh(this._delegate,tf)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Cr.b)(e,void 0,void 0,function(){var e,n;return Object(Cr.d)(this,function(r){switch(r.label){case 0:return[4,wh(t)];case 1:return e=r.sent(),[4,Oh(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Cr.b)(this,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:return(e=Ur(t)).$r.add(0),[4,Vc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(ef(qh(this._delegate,tf)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Mh("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Oa;return t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(e,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(r){switch(r.label){case 0:return e=Vl,[4,Eh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(ef(qh(this._delegate,tf)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new fh(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(n,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ur(t).Gr.add(e),e.next()},[4,Sh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(n,void 0,void 0,function(){var e;return Object(Cr.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ur(t).Gr.delete(e)},[4,Sh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(ef(t=qh(t,tf)),Zh(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Ar(jr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Nd(this,Qh(this._delegate,t))}catch(t){throw Sd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ed(this,$h(this._delegate,t))}catch(t){throw Sd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new jd(this,function(t,e){if(t=qh(t,zh),Ph("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ar(jr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Kh(t,null,function(t){return new $i(Yr.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Sd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Oa;return t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(n,void 0,void 0,function(){var n;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return bh(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new ph(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(ef(t),function(n){return e(new dd(t,n))})}(this._delegate,function(n){return t(new wd(e,n))})},t.prototype.batch=function(){var t=this;return ef(this._delegate),new _d(new sd(this._delegate,function(e){return hd(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Ar(jr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ar(jr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),bd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Cr.c)(e,t),e.prototype.convertBytes=function(t){return new md(new af(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ed.Zc(e,this.firestore,null)},e}(rd),wd=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new bd(t)}return t.prototype.get=function(t){var e=this,n=Rd(t);return this._delegate.get(n).then(function(t){return new Cd(e._firestore,new Vf(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},t.prototype.set=function(t,e,n){var r=Rd(t);return n?(Lh("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Rd(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Cr.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Rd(t);return this._delegate.delete(e),this},t}(),_d=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Rd(t);return n?(Lh("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Rd(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Cr.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Rd(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Od=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new qf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new xd(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new bd(e),n),i.set(n,o)),o},t}();Od.eu=new WeakMap;var Ed=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new bd(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Ar(jr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Gh(n._delegate,r,new fi(e)))},t.Zc=function(e,n,r){return new t(n,new Gh(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Nd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Nd(this.firestore,Qh(this._delegate,t))}catch(t){throw Sd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(E.g)(t))instanceof Gh&&Xh(this._delegate,t)},t.prototype.set=function(t,e){e=Lh("DocumentReference.set",e);try{return function(t,e,n){t=qh(t,Gh);var r=qh(t.firestore,tf),i=id(t._converter,e,n);return hd(r,[yf(mf(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Ao.none())])}(this._delegate,t,e)}catch(t){throw Sd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?cd(this._delegate,t):cd.apply(void 0,Object(Cr.f)([this._delegate,t,e],n))}catch(t){throw Sd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return hd(qh((t=this._delegate).firestore,tf),[new Go(t._key,Ao.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Td(e),i=Id(e,function(e){return new Cd(t.firestore,new Vf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return ld(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=qh(t,Gh);var e=qh(t.firestore,tf),n=ef(e),r=new ud(e);return function(t,e){var n=this,r=new Oa;return t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(n,void 0,void 0,function(){var n;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r,i;return Object(Cr.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ur(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ar(jr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=hl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,_h(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Vf(e,r,t._key,n,new Uf(null!==n&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=qh(t,Gh);var e=qh(t.firestore,tf);return Th(ef(e),t._key,{source:"server"}).then(function(n){return fd(e,t,n)})}(this._delegate):function(t){t=qh(t,Gh);var e=qh(t.firestore,tf);return Th(ef(e),t._key).then(function(n){return fd(e,t,n)})}(this._delegate)).then(function(t){return new Cd(e.firestore,new Vf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Od.tu(this.firestore,e):null))},t}();function Sd(t,e,n){return t.message=t.message.replace(e,n),t}function Td(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Zh(r))return r}return{}}function Id(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Zh(t[0])?t[0]:Zh(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Cd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ed(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return zf(this._delegate,t._delegate)},t}(),xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Cr.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Cd),jd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new bd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Wf(this._delegate,function(t,e,n){var r=e,i=Ff("where",t);return new Qf(i,r,n)}(e,n,r)))}catch(e){throw Sd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Wf(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Ff("orderBy",t);return new $f(r,n)}(e,n)))}catch(e){throw Sd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Wf(this._delegate,function(t){return Hh("limit",t),new Xf("limit",t,"F")}(e)))}catch(e){throw Sd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Wf(this._delegate,function(t){return Hh("limitToLast",t),new Xf("limitToLast",t,"L")}(e)))}catch(e){throw Sd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wf(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yf("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Sd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wf(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yf("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Sd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wf(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jf("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Sd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Wf(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jf("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Sd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Yh(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=qh(t,Kh);var e=qh(t.firestore,tf),n=ef(e),r=new ud(e);return function(t,e){var n=this,r=new Oa;return t.asyncQueue.enqueueAndForget(function(){return Object(Cr.b)(n,void 0,void 0,function(){var n;return Object(Cr.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Cr.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Cr.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Yu(t,e,!0)];case 1:return a=u.sent(),r=new Cl(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=hl(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,_h(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Hf(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=qh(t,Kh);var e=qh(t.firestore,tf),n=ef(e),r=new ud(e);return Ih(n,t._query,{source:"server"}).then(function(n){return new Hf(e,r,t,n)})}(this._delegate):function(t){t=qh(t,Kh);var e=qh(t.firestore,tf),n=ef(e),r=new ud(e);return Gf(t._query),Ih(n,t._query).then(function(n){return new Hf(e,r,t,n)})}(this._delegate)).then(function(t){return new kd(e.firestore,new Hf(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Td(e),i=Id(e,function(e){return new kd(t.firestore,new Hf(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return ld(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Od.tu(this.firestore,e):null))},t}(),Ad=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new xd(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),kd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new jd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new xd(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Ad(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new xd(n._firestore,r))})},t.prototype.isEqual=function(t){return zf(this._delegate,t._delegate)},t}(),Nd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Cr.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ed(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ed(this.firestore,void 0===t?$h(this._delegate):$h(this._delegate,t))}catch(t){throw Sd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=qh(t.firestore,tf),r=$h(t),i=id(t._converter,e);return hd(n,[yf(mf(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Ao.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Ed(e.firestore,t)})},e.prototype.isEqual=function(t){return Xh(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Od.tu(this.firestore,t):null))},e}(jd);function Rd(t){return qh(t,Gh)}var Dd,Pd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(sf.bind.apply(sf,Object(Cr.f)([void 0],t)))}return t.documentId=function(){return new t(Zr.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(E.g)(t))instanceof sf&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ld=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new wf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new vf("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _f("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Of("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Ef("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Md=n("/6Yf"),Fd={Firestore:vd,GeoPoint:cf,Timestamp:Gr,Blob:md,Transaction:wd,WriteBatch:_d,DocumentReference:Ed,DocumentSnapshot:Cd,Query:jd,QueryDocumentSnapshot:xd,QuerySnapshot:kd,CollectionReference:Nd,FieldPath:Pd,FieldValue:Ld,setLogLevel:function(t){kr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Md.a("firestore",function(t){return function(t,e){return new vd(t,new tf(t,e),new yd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Fd)))})(Dd=O.a),Dd.registerVersion("@firebase/firestore","2.2.4");var Ud=n("XNiG"),Vd=n("VRyK"),qd=n("eIep"),Hd=n("qgXg"),Bd=n("quSY"),zd=n("9ppp"),Gd=n("Ylt2");class Kd extends Ud.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Wd(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new zd.a;if(this.isStopped||this.hasError?o=Bd.a.EMPTY:(this.observers.push(t),o=new Gd.a(this,t)),r&&t.add(t=new v.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Hd.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Wd{constructor(t,e){this.time=t,this.value=e}}function Qd(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Kd(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}var $d=n("SxV6");function Xd(t,e){return e?Object(qd.a)(()=>t,e):Object(qd.a)(()=>t)}var Yd=n("tf+s");const Jd=new r.r("angularfire2.auth.use-emulator"),Zd=new r.r("angularfire2.auth.settings"),tp=new r.r("angularfire2.auth.tenant-id"),ep=new r.r("angularfire2.auth.langugage-code"),np=new r.r("angularfire2.auth.use-device-language"),rp=new r.r("angularfire.auth.persistence");let ip=(()=>{class t{constructor(t,e,r,i,u,c,l,h,f,p){const g=new b.d(i),m=Object(b.h)(g),_=new Ud.a,O=Object(a.a)(void 0).pipe(Object(v.b)(g.outsideAngular),Object(qd.a)(()=>i.runOutsideAngular(()=>n.e(7).then(n.bind(null,"6nsN")))),Object(d.a)(()=>Object(b.g)(t,i,e)),Object(d.a)(t=>i.runOutsideAngular(()=>{const e=u,n=c;return Object(b.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),l&&(r.tenantId=l),r.languageCode=h,f&&r.useDeviceLanguage(),n&&(r.settings=n),p&&r.setPersistence(p),r},[e,l,h,f,n,p])})),Qd({bufferSize:1,refCount:!1}));if(Object(w.l)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(a.a)(null);else{O.pipe(Object($d.a)()).subscribe();const t=O.pipe(Object(qd.a)(t=>t.getRedirectResult().then(t=>t,()=>null)),m,Qd({bufferSize:1,refCount:!1})),e=t=>new o.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=O.pipe(Object(qd.a)(t=>e(t.onAuthStateChanged.bind(t)))),r=O.pipe(Object(qd.a)(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Xd(n),Object(Yd.a)(g.outsideAngular),Object(v.b)(g.insideAngular)),this.user=t.pipe(Xd(r),Object(Yd.a)(g.outsideAngular),Object(v.b)(g.insideAngular)),this.idToken=this.user.pipe(Object(qd.a)(t=>t?Object(s.a)(t.getIdToken()):Object(a.a)(null))),this.idTokenResult=this.user.pipe(Object(qd.a)(t=>t?Object(s.a)(t.getIdTokenResult()):Object(a.a)(null))),this.credential=Object(Vd.a)(t,_,this.authState.pipe(Object(y.a)(t=>!t))).pipe(Object(d.a)(t=>(null==t?void 0:t.user)?t:null),Object(Yd.a)(g.outsideAngular),Object(v.b)(g.insideAngular))}return Object(b.i)(this,O,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>_.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(b.c),r.Rb(b.b,8),r.Rb(r.C),r.Rb(r.A),r.Rb(Jd,8),r.Rb(Zd,8),r.Rb(tp,8),r.Rb(ep,8),r.Rb(np,8),r.Rb(rp,8))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Rb)(b.c),Object(r.Rb)(b.b,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(Jd,8),Object(r.Rb)(Zd,8),Object(r.Rb)(tp,8),Object(r.Rb)(ep,8),Object(r.Rb)(np,8),Object(r.Rb)(rp,8))},token:t,providedIn:"any"}),t})();function op(t,e){return function(t,e=i.a){return new o.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function sp(t,e){return op(t,e).pipe(Object(d.a)(t=>({payload:t,type:"query"})))}function ap(t,e){return sp(t,e).pipe(Object(u.a)(void 0),l(),Object(d.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function up(t,e,n){return ap(t,n).pipe(Object(p.a)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return cp(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return cp(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cp(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new g(void 0,void 0)),Object(d.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function cp(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function lp(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(b.e)(ip,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class hp{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=ap(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(d.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Object(u.a)(void 0),l(),Object(y.a)(([t,e])=>e.length>0||!t),Object(d.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(p.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=lp(t);return up(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return sp(this.query,this.afs.schedulers.outsideAngular).pipe(Object(d.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(s.a)(this.query.get(t)).pipe(Object(v.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new fp(this.ref.doc(t),this.afs)}}class fp{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=vp(n,e);return new hp(r,i,this.afs)}snapshotChanges(){return op(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(u.a)(void 0),l(),Object(d.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(d.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(s.a)(this.ref.get(t)).pipe(Object(v.b)(this.afs.schedulers.insideAngular))}}class dp{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ap(this.query,this.afs.schedulers.outsideAngular).pipe(Object(d.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(y.a)(t=>t.length>0),this.afs.keepUnstableUntilFirst):ap(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Object(p.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=lp(t);return up(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return sp(this.query,this.afs.schedulers.outsideAngular).pipe(Object(d.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(s.a)(this.query.get(t)).pipe(Object(v.b)(this.afs.schedulers.insideAngular))}}const pp=new r.r("angularfire2.enableFirestorePersistence"),gp=new r.r("angularfire2.firestore.persistenceSettings"),mp=new r.r("angularfire2.firestore.settings"),yp=new r.r("angularfire2.firestore.use-emulator");function vp(t,e=(t=>t)){return{query:e(t),ref:t}}let bp=(()=>{class t{constructor(t,e,n,r,i,o,u,c,l){this.schedulers=new b.d(o),this.keepUnstableUntilFirst=Object(b.h)(this.schedulers);const h=Object(b.g)(t,o,e);!_.a.auth&&l&&Object(b.j)();const f=c;[this.firestore,this.persistenceEnabled$]=Object(b.f)(`${h.name}.firestore`,"AngularFirestore",h,()=>{const t=o.runOutsideAngular(()=>h.firestore());if(r&&t.settings(r),f&&t.useEmulator(...f),n&&!Object(w.l)(i)){const e=()=>{try{return Object(s.a)(t.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(Dd){return"undefined"!=typeof console&&console.warn(Dd),Object(a.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(a.a)(!1)]},[r,f,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=vp(n,e),o=this.schedulers.ngZone.run(()=>r);return new hp(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new dp(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new fp(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(b.c),r.Rb(b.b,8),r.Rb(pp,8),r.Rb(mp,8),r.Rb(r.C),r.Rb(r.A),r.Rb(gp,8),r.Rb(yp,8),r.Rb(Jd,8))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Rb)(b.c),Object(r.Rb)(b.b,8),Object(r.Rb)(pp,8),Object(r.Rb)(mp,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(gp,8),Object(r.Rb)(yp,8),Object(r.Rb)(Jd,8))},token:t,providedIn:"any"}),t})(),wp=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:pp,useValue:!0},{provide:gp,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[bp]}),t})()},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return e=>0===t?Object(o.b)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new u(t,this.total))}}class u extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},JX91:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("GyhO"),i=n("z+Ro");function o(...t){const e=t[t.length-1];return Object(i.a)(e)?(t.pop(),n=>Object(r.a)(t,n,e)):e=>Object(r.a)(t,e)}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.4.1","app")},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}class o{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))}}class s extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},SxV6:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("sVev"),i=n("pLZG"),o=n("IzEk"),s=n("xbPD"),a=n("XDbj"),u=n("SpAZ");function c(t,e){const n=arguments.length>=2;return c=>c.pipe(t?Object(i.a)((e,n)=>t(e,n,c)):u.a,Object(o.a)(1),n?Object(s.a)(e):Object(a.a)(()=>new r.a))}},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XDbj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("sVev"),i=n("7o/Q");function o(t=u){return e=>e.lift(new s(t))}class s{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new a(t,this.errorFactory))}}class a extends i.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function u(){return new r.a}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5+tZ");function i(t,e){return Object(r.a)(t,e,1)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e){return"function"==typeof e?n=>n.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))))):e=>e.lift(new a(t))}class a{constructor(t){this.project=t}call(t,e){return e.subscribe(new u(t,this.project))}}class u extends o.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new o.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(o.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return en}),n.d(e,"b",function(){return eu}),n.d(e,"c",function(){return Xa}),n.d(e,"d",function(){return Qa}),n.d(e,"e",function(){return $a}),n.d(e,"f",function(){return Qu}),n.d(e,"g",function(){return Fu}),n.d(e,"h",function(){return ra}),n.d(e,"i",function(){return fu}),n.d(e,"j",function(){return Cs}),n.d(e,"k",function(){return iu}),n.d(e,"l",function(){return ks}),n.d(e,"m",function(){return pr}),n.d(e,"n",function(){return ka}),n.d(e,"o",function(){return $i}),n.d(e,"p",function(){return _n}),n.d(e,"q",function(){return k}),n.d(e,"r",function(){return tn}),n.d(e,"s",function(){return ho}),n.d(e,"t",function(){return Xs}),n.d(e,"u",function(){return Js}),n.d(e,"v",function(){return ru}),n.d(e,"w",function(){return pa}),n.d(e,"x",function(){return Vu}),n.d(e,"y",function(){return da}),n.d(e,"z",function(){return Ru}),n.d(e,"A",function(){return gu}),n.d(e,"B",function(){return On}),n.d(e,"C",function(){return tu}),n.d(e,"D",function(){return Za}),n.d(e,"E",function(){return Ds}),n.d(e,"F",function(){return Rs}),n.d(e,"G",function(){return vr}),n.d(e,"H",function(){return Ls}),n.d(e,"I",function(){return cr}),n.d(e,"J",function(){return En}),n.d(e,"K",function(){return Bu}),n.d(e,"L",function(){return ca}),n.d(e,"M",function(){return Ou}),n.d(e,"N",function(){return nn}),n.d(e,"O",function(){return Fs}),n.d(e,"P",function(){return Ms}),n.d(e,"Q",function(){return ma}),n.d(e,"R",function(){return M}),n.d(e,"S",function(){return Du}),n.d(e,"T",function(){return ku}),n.d(e,"U",function(){return g}),n.d(e,"V",function(){return Au}),n.d(e,"W",function(){return Ku}),n.d(e,"X",function(){return Tu}),n.d(e,"Y",function(){return nu}),n.d(e,"Z",function(){return Yi}),n.d(e,"ab",function(){return ds}),n.d(e,"bb",function(){return ar}),n.d(e,"cb",function(){return zn}),n.d(e,"db",function(){return Rn}),n.d(e,"eb",function(){return Pn}),n.d(e,"fb",function(){return Un}),n.d(e,"gb",function(){return Mn}),n.d(e,"hb",function(){return Ln}),n.d(e,"ib",function(){return Fn}),n.d(e,"jb",function(){return cs}),n.d(e,"kb",function(){return Gu}),n.d(e,"lb",function(){return ls}),n.d(e,"mb",function(){return hs}),n.d(e,"nb",function(){return Dn}),n.d(e,"ob",function(){return H}),n.d(e,"pb",function(){return _o}),n.d(e,"qb",function(){return Do}),n.d(e,"rb",function(){return No}),n.d(e,"sb",function(){return Ro}),n.d(e,"tb",function(){return us}),n.d(e,"ub",function(){return Ct}),n.d(e,"vb",function(){return f}),n.d(e,"wb",function(){return Nn}),n.d(e,"xb",function(){return po}),n.d(e,"yb",function(){return _t}),n.d(e,"zb",function(){return Ss}),n.d(e,"Ab",function(){return ei}),n.d(e,"Bb",function(){return So}),n.d(e,"Cb",function(){return Go}),n.d(e,"Db",function(){return zo}),n.d(e,"Eb",function(){return za}),n.d(e,"Fb",function(){return tt}),n.d(e,"Gb",function(){return at}),n.d(e,"Hb",function(){return O}),n.d(e,"Ib",function(){return E}),n.d(e,"Jb",function(){return it}),n.d(e,"Kb",function(){return ut}),n.d(e,"Lb",function(){return Io}),n.d(e,"Mb",function(){return ko}),n.d(e,"Nb",function(){return Ao}),n.d(e,"Ob",function(){return jo}),n.d(e,"Pb",function(){return $e}),n.d(e,"Qb",function(){return is}),n.d(e,"Rb",function(){return vn}),n.d(e,"Sb",function(){return Ye}),n.d(e,"Tb",function(){return Wa}),n.d(e,"Ub",function(){return Po}),n.d(e,"Vb",function(){return Ga}),n.d(e,"Wb",function(){return Co}),n.d(e,"Xb",function(){return Ba}),n.d(e,"Yb",function(){return lr}),n.d(e,"Zb",function(){return ot}),n.d(e,"ac",function(){return To}),n.d(e,"bc",function(){return es}),n.d(e,"cc",function(){return ns}),n.d(e,"dc",function(){return rs});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("EQ5u"),u=n("x+ZX");function c(){return new r.a}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function f(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(f).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function d(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return f(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function w(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function _(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${w(t)} found${n}`)}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function E(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return T(t,C)||T(t,j)}function T(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(A))?t[x]:null}const C=l({"\u0275prov":l}),x=l({"\u0275inj":l}),j=l({ngInjectableDef:l}),A=l({ngInjectorDef:l});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let N;function R(t){const e=N;return N=t,e}function D(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void _(f(t),"Injector")}function P(t){return{toString:t}.toString()}var L=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),M=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,H=F||q||U||V,B={},z=[],G=[],K=l({"\u0275cmp":l}),W=l({"\u0275dir":l}),Q=l({"\u0275pipe":l}),$=l({"\u0275mod":l}),X=l({"\u0275loc":l}),Y=l({"\u0275fac":l}),J=l({__NG_ELEMENT_ID__:l});let Z=0;function tt(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||M.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Z++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function et(t){return ct(t)||function(t){return t[W]||null}(t)}function nt(t){return function(t){return t[Q]||null}(t)}const rt={};function it(t){const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&P(()=>{rt[t.id]=t.type}),e}function ot(t,e){return P(()=>{const n=lt(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function st(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=tt;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[K]||null}function lt(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${f(t)} does not have '\u0275mod' property.`);return n}const ht=20,ft=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class wt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return Ot}function Ot(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),Et}function Et(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new wt(u&&u.currentValue,e,s===B),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}let It;function Ct(t){It=t}function xt(t){return!!t.listen}_t.ngInherit=!0;const jt={createRenderer:(t,e)=>void 0!==It?It:"undefined"!=typeof document?document:void 0};function At(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return At(e[t])}function Nt(t,e){return At(e[t.index])}function Rt(t,e){return t.data[e]}function Dt(t,e){const n=e[t];return dt(n)?n:n[0]}function Pt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Lt(t){return 4==(4&t[2])}function Mt(t){return 128==(128&t[2])}function Ft(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:ae(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ht(){return qt.bindingsEnabled}function Bt(){return qt.lFrame.lView}function zt(){return qt.lFrame.tView}function Gt(){let t=Kt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Kt(){return qt.lFrame.currentTNode}function Wt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Qt(){return qt.lFrame.isParent}function $t(){return qt.isInCheckNoChangesMode}function Xt(t){qt.isInCheckNoChangesMode=t}function Yt(){return qt.lFrame.bindingIndex++}function Jt(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Zt(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,te(e)}function te(t){qt.lFrame.currentDirectiveIndex=t}function ee(){return qt.lFrame.currentQueryIndex}function ne(t){qt.lFrame.currentQueryIndex=t}function re(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ie(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=re(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=se();return r.currentTNode=e,r.lView=t,!0}function oe(t){const e=se(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function se(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?ae(t):e}function ae(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ue(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ce=ue;function le(){const t=ue();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function he(){return qt.lFrame.selectedIndex}function fe(t){qt.lFrame.selectedIndex=t}function de(){const t=qt.lFrame;return Rt(t.tView,t.selectedIndex)}function pe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ge(t,e,n){ve(t,e,3,n)}function me(t,e,n,r){(3&t[2])===n&&ve(t,e,n,r)}function ye(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ve(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(be(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function be(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const we=-1;class _e{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Oe(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Se(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ee(t){return 3===t||4===t||6===t}function Se(t){return 64===t.charCodeAt(0)}function Te(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ie(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ie(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ce(t){return t!==we}function xe(t){return 32767&t}function je(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ae=!0;function ke(t){const e=Ae;return Ae=t,e}let Ne=0;function Re(t,e){const n=Pe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,De(r.data,t),De(e,null),De(r.blueprint,null));const i=Le(t,e),o=t.injectorIndex;if(Ce(i)){const t=xe(i),n=je(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function De(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Pe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Le(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return we;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return we}function Me(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Ne++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Fe(t,e,n){if(n&k.Optional)return t;_(e,"NodeInjector")}function Ue(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=R(void 0);try{return i?i.get(e,r,n&k.Optional):D(e,r,n&k.Optional)}finally{R(o)}}return Fe(r,e,n)}function Ve(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:He:e}(n);if("function"==typeof o){if(!ie(e,t,r))return r&k.Host?Fe(i,n,r):Ue(e,n,r,i);try{const t=o();if(null!=t||r&k.Optional)return t;_(n)}finally{ce()}}else if("number"==typeof o){let i=null,s=Pe(t,e),a=we,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?Le(t,e):e[s+8],a!==we&&We(r,!1)?(i=e[1],s=xe(a),e=je(a,e)):s=-1);-1!==s;){const t=e[1];if(Ke(o,s,t.data)){const t=Be(s,e,n,i,r,u);if(t!==qe)return t}a=e[s+8],a!==we&&We(r,e[1].data[s+8]===u)&&Ke(o,s,e)?(i=t,s=xe(a),e=je(a,e)):s=-1}}}return Ue(e,n,r,i)}const qe={};function He(){return new Qe(Gt(),Bt())}function Be(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=ze(a,s,n,null==r?mt(a)&&Ae:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?Ge(e,s,u,a):qe}function ze(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&vt(t)&&t.type===n)return u}return null}function Ge(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof _e){const s=i;s.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(w(o[n]));const a=ke(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?R(s.injectImpl):null;ie(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ot(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&R(u),ke(a),s.resolving=!1,ce()}}return i}function Ke(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function We(t,e){return!(t&k.Self||t&k.Host&&e)}class Qe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ve(this._tNode,this._lView,t,void 0,e)}}function $e(t){return P(()=>{const e=t.prototype.constructor,n=e[Y]||Xe(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||Xe(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Xe(t){return y(t)?()=>{const e=Xe(m(t));return e&&e()}:bt(t)}function Ye(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ee(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Gt(),t)}const Je="__parameters__";function Ze(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Je)?t[Je]:Object.defineProperty(t,Je,{value:[]})[Je];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class tn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=O({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const en=new tn("AnalyzeForEntryComponents"),nn=Function;function rn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),rn(r,e)):e!==t&&e.push(r)}return e}function on(t,e){t.forEach(t=>Array.isArray(t)?on(t,e):e(t))}function sn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function an(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function un(t,e,n){let r=ln(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function cn(t,e){const n=ln(t,e);if(n>=0)return t[1|n]}function ln(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const hn={},fn=/\n/gm,dn="__source",pn=l({provide:String,useValue:l});let gn;function mn(t){const e=gn;return gn=t,e}function yn(t,e=k.Default){if(void 0===gn)throw new Error("inject() must be called from an injection context");return null===gn?D(t,void 0,e):gn.get(t,e&k.Optional?null:void 0,e)}function vn(t,e=k.Default){return(N||yn)(m(t),e)}function bn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(vn(t,n))}else e.push(vn(r))}return e}function wn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const _n=wn(Ze("Inject",t=>({token:t})),-1),On=wn(Ze("Optional"),8),En=wn(Ze("SkipSelf"),4);let Sn;function Tn(t){var e;return(null===(e=function(){if(void 0===Sn&&(Sn=null,H.trustedTypes))try{Sn=H.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Sn}())||void 0===e?void 0:e.createHTML(t))||t}class In{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Cn extends In{getTypeName(){return"HTML"}}class xn extends In{getTypeName(){return"Style"}}class jn extends In{getTypeName(){return"Script"}}class An extends In{getTypeName(){return"URL"}}class kn extends In{getTypeName(){return"ResourceURL"}}function Nn(t){return t instanceof In?t.changingThisBreaksApplicationSecurity:t}function Rn(t,e){const n=Dn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Dn(t){return t instanceof In&&t.getTypeName()||null}function Pn(t){return new Cn(t)}function Ln(t){return new xn(t)}function Mn(t){return new jn(t)}function Fn(t){return new An(t)}function Un(t){return new kn(t)}class Vn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Tn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Tn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Tn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Hn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Bn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function zn(t){return(t=String(t)).match(Hn)||t.match(Bn)?t:"unsafe:"+t}function Gn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Kn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Wn=Gn("area,br,col,hr,img,wbr"),Qn=Gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$n=Gn("rp,rt"),Xn=Kn($n,Qn),Yn=Kn(Wn,Kn(Qn,Gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kn($n,Gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xn),Jn=Gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zn=Gn("srcset"),tr=Kn(Jn,Zn,Gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),er=Gn("script,style,template");class nr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Yn.hasOwnProperty(e))return this.sanitizedSomething=!0,!er.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!tr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Jn[o]&&(s=zn(s)),Zn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>zn(t.trim())).join(", ")),this.buf.push(" ",e,'="',or(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Yn.hasOwnProperty(e)&&!Wn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(or(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const rr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ir=/([^\#-~ |!])/g;function or(t){return t.replace(/&/g,"&amp;").replace(rr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ir,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let sr;function ar(t,e){let n=null;try{sr=sr||function(t){const e=new qn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Tn(""),"text/html")}catch(t){return!1}}()?new Vn(e):e}(t);let r=e?String(e):"";n=sr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=sr.getInertBodyElement(r)}while(r!==o);return Tn((new nr).sanitizeChildren(ur(n)||n))}finally{if(n){const t=ur(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ur(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var cr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function lr(t){const e=function(){const t=Bt();return t&&t[12]}();return e?e.sanitize(cr.URL,t)||"":Rn(t,"URL")?Nn(t):zn(b(t))}function hr(t){return t.ngDebugContext}function fr(t){return t.ngOriginalError}function dr(t,...e){t.error(...e)}class pr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||dr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?hr(t)?hr(t):this._findContext(fr(t)):null}_findOriginalError(t){let e=fr(t);for(;e&&fr(e);)e=fr(e);return e}}function gr(t,e){t.__ngContext__=e}const mr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(H))();function yr(t){return t instanceof Function?t():t}var vr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function br(t,e){return(void 0)(t,e)}function wr(t){const e=t[3];return pt(e)?e[3]:e}function _r(t){return Er(t[13])}function Or(t){return Er(t[4])}function Er(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Sr(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=At(r);0===t&&null!==n?null==i?kr(e,n,a):Ar(e,n,a,i||null,!0):1===t&&null!==n?Ar(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Rr(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==At(n)&&Sr(e,t,r,o,i);for(let s=ft;s<n.length;s++){const i=n[s];Ur(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Tr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Ir(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Cr(t,e){if(t.length<=ft)return;const n=ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Ir(o,r),e>0&&(t[n-1][4]=r[4]);const s=an(t,ft+e);Ur(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function xr(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&Ur(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return jr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&jr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&jr(e[1],e),n=e&&e[4]}e=n}}(e)}}function jr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof _e)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):At(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&Ir(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ar(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function kr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function Nr(t,e,n,r,i){null!==r?Ar(t,e,n,r,i):kr(t,e,n)}function Rr(t,e){return xt(t)?t.parentNode(e):e.parentNode}function Dr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===M.None||e===M.Emulated)return null}return Nt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Nt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Nr(o,i,n[a],s,!1);else Nr(o,i,n,s,!1)}function Pr(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return Mr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Pr(t,n);{const n=t[e.index];return pt(n)?Mr(-1,n):At(n)}}if(32&n)return br(e,t)()||At(t[e.index]);{const n=Lr(t,e);return null!==n?Array.isArray(n)?n[0]:Pr(wr(t[16]),n):Pr(t,e.next)}}return null}function Lr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Mr(t,e){const n=ft+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Pr(t,r)}return e[7]}function Fr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&gr(At(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Fr(t,e,n.child,r,i,o,!1),Sr(e,t,i,a,o);else if(32&u){const s=br(n,r);let u;for(;u=s();)Sr(e,t,i,u,o);Sr(e,t,i,a,o)}else 16&u?Vr(t,e,r,n,i,o):Sr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ur(t,e,n,r,i,o){Fr(n,r,t.firstChild,e,i,o,!1)}function Vr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Sr(e,t,i,a[u],o);else Fr(t,e,a,s[3],i,o,!0)}function qr(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Hr(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Br(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const zr="ng-template";function Gr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Br(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Kr(t){return 4===t.type&&t.value!==zr}function Wr(t,e,n){return e===(4!==t.type||n?t.value:zr)}function Qr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ee(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Wr(t,u,n)||""===u&&1===e.length){if($r(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Gr(t.attrs,c,n)){if($r(r))return!1;s=!0}continue}const l=Xr(8&r?"class":u,i,Kr(t),n);if(-1===l){if($r(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Br(e,c,0)||2&r&&c!==t){if($r(r))return!1;s=!0}}}}else{if(!s&&!$r(r)&&!$r(u))return!1;if(s&&$r(u))continue;s=!1,r=u|1&r}}return $r(r)||s}function $r(t){return 0==(1&t)}function Xr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Yr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Qr(t,e[r],n))return!0;return!1}function Jr(t,e){return t?":not("+e.trim()+")":e}function Zr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||$r(s)||(e+=Jr(o,i),i=""),r=s,o=o||!$r(r);n++}return""!==i&&(e+=Jr(o,i)),e}const ti={};function ei(t){ni(zt(),Bt(),he()+t,$t())}function ni(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ge(e,r,n)}else{const r=t.preOrderHooks;null!==r&&me(e,r,0,n)}fe(n)}function ri(t,e){return t<<17|e<<2}function ii(t){return t>>17&32767}function oi(t){return 2|t}function si(t){return(131068&t)>>2}function ai(t,e){return-131069&t|e<<2}function ui(t){return 1|t}function ci(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ne(i),n.contentQueries(2,e[o],o)}}}function li(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function hi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Kt(),s=Qt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Wt(o,!0),o}function fi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function di(t,e,n){oe(e);try{const r=t.viewQuery;null!==r&&Hi(1,r,n);const i=t.template;null!==i&&mi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ci(t,e),t.staticViewQueries&&Hi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Mi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,le()}}function pi(t,e,n,r){const i=e[2];if(256==(256&i))return;oe(e);const o=$t();try{Ut(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&mi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ge(e,n,null)}else{const n=t.preOrderHooks;null!==n&&me(e,n,0,null),ye(e,0)}if(function(t){for(let e=_r(t);null!==e;e=Or(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=_r(t);null!==e;e=Or(e))for(let t=ft;t<e.length;t++){const n=e[t],r=n[1];Mt(n)&&pi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ci(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ge(e,n)}else{const n=t.contentHooks;null!==n&&me(e,n,1),ye(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)fe(~r);else{const i=r,o=n[++t],s=n[++t];Zt(o,i),s(2,e[i])}}}finally{fe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Pi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Hi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ge(e,n)}else{const n=t.viewHooks;null!==n&&me(e,n,2),ye(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{le()}}function gi(t,e,n,r){const i=e[10],o=!$t(),s=Lt(e);try{o&&!s&&i.begin&&i.begin(),s&&di(t,e,r),pi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function mi(t,e,n,r,i){const o=he(),s=2&r;try{fe(-1),s&&e.length>ht&&ni(t,e,ht,$t()),n(r,i)}finally{fe(o)}}function yi(t,e,n){Ht()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Re(n,e),gr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&ki(e,n,r);const u=Ge(e,t,a,n);gr(u,e),null!==s&&Ni(0,a-i,u,r,0,s),o&&(Dt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{fe(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];te(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ii(r,i)}}finally{fe(-1),te(s)}}(t,e,n))}function vi(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function bi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=wi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function wi(t,e,n,r,i,o,s,a,u,c){const l=ht+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ti);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function _i(t,e,n,r){const i=zi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Gi(t).push(r,i.length-1))}function Oi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ei(t,e,n,r,i,o,s,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Wi(t,n,c,r,i),mt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,xt(o)?o.setProperty(u,r,i):Se(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Si(t,e,n,r){let i=!1;if(Ht()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Yr(n,s.selectors,!1)&&(i||(i=[]),Me(Re(n,e),t,s.type),vt(s)?(Ci(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,ji(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=fi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Te(n.mergedAttrs,c.hostAttrs),Ai(t,n,e,u,c),xi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Kr(e)?null:Ri(n,i);o.push(c),s=Oi(n,u,s),a=Oi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Te(n.mergedAttrs,n.attrs),i}function Ti(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ii(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ci(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function xi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function ji(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ai(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new _e(o,vt(i),null);t.blueprint[r]=s,n[r]=s,Ti(t,e,0,r,fi(t,n,i.hostVars,ti),i)}function ki(t,e,n){const r=Nt(e,t),i=bi(n),o=t[10],s=Fi(t,li(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ni(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ri(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Di(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Pi(t,e){const n=Dt(e,t);if(Mt(n)){const t=n[1];80&n[2]?pi(t,n,t.template,n[8]):n[5]>0&&Li(n)}}function Li(t){for(let n=_r(t);null!==n;n=Or(n))for(let t=ft;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];pi(t,e,t.template,e[8])}else e[5]>0&&Li(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Mt(r)&&r[5]>0&&Li(r)}}function Mi(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),di(r,n,n[8])}function Fi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ui(t){for(;t;){t[2]|=64;const e=wr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Vi(t,e,n){const r=e[10];r.begin&&r.begin();try{pi(t,e,t.template,n)}catch(i){throw Ki(e,i),i}finally{r.end&&r.end()}}function qi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Pt(n),i=r[1];gi(i,r,i.template,n)}}(t[8])}function Hi(t,e,n){ne(0),e(t,n)}const Bi=(()=>Promise.resolve(null))();function zi(t){return t[7]||(t[7]=[])}function Gi(t){return t.cleanup||(t.cleanup=[])}function Ki(t,e){const n=t[9],r=n?n.get(pr,null):null;r&&r.handleError(e)}function Wi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Qi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=d(i,t):2==o&&(r=d(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const $i=new tn("INJECTOR",-1);class Xi{get(t,e=hn){if(e===hn){const e=new Error(`NullInjectorError: No provider for ${f(t)}!`);throw e.name="NullInjectorError",e}return e}}const Yi=new tn("Set Injector scope."),Ji={},Zi={},to=[];let eo;function no(){return void 0===eo&&(eo=new Xi),eo}function ro(t,e=null,n=null,r){return new io(t,n,e||no(),r)}class io{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&on(e,n=>this.processProvider(n,t,e)),on([t],t=>this.processInjectorType(t,[],i)),this.records.set($i,ao(void 0,this));const o=this.records.get(Yi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:f(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=hn,n=k.Default){this.assertNotDestroyed();const r=mn(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof tn)&&S(t);e=n&&this.injectableDefInScope(n)?ao(oo(t),Ji):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?no():this.parent).get(t,e=n&k.Optional&&e===hn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(f(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[dn]&&i.unshift(e[dn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=f(e);if(Array.isArray(e))i=e.map(f).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):f(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(fn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{mn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(f(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=I(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=I(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{on(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];on(r,t=>this.processProvider(t,n,r||to))}}this.injectorDefTypes.add(o);const a=bt(o)||(()=>new o);this.records.set(o,ao(a,Ji));const u=r.providers;if(null!=u&&!s){const e=t;on(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=co(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return uo(t)?ao(void 0,t.useValue):ao(so(t),Ji)}(t);if(co(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ao(void 0,Ji,!0),e.factory=()=>bn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ji&&(e.value=Zi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function oo(t){const e=S(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;if(t instanceof tn)throw new Error(`Token ${f(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${f(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[C]||t[j]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function so(t,e,n){let r;if(co(t)){const e=m(t);return bt(e)||oo(e)}if(uo(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...bn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>vn(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||oo(e);r=()=>new e(...bn(t.deps))}var i;return r}function ao(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uo(t){return null!==t&&"object"==typeof t&&pn in t}function co(t){return"function"==typeof t}const lo=function(t,e,n){return function(t,e=null,n=null,r){const i=ro(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ho=(()=>{class t{static create(t,e){return Array.isArray(t)?lo(t,e,""):lo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=hn,t.NULL=new Xi,t.\u0275prov=O({token:t,providedIn:"any",factory:()=>vn($i)}),t.__NG_ELEMENT_ID__=-1,t})();function fo(t,e){pe(Pt(t)[1],Gt())}function po(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=go(t.inputs),e.declaredInputs=go(t.declaredInputs),e.outputs=go(t.outputs);const n=i.hostBindings;n&&vo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&mo(t,o),s&&yo(t,s),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===po&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Te(i.hostAttrs,n=Te(n,i.hostAttrs))}}(r)}function go(t){return t===B?{}:t===G?[]:t}function mo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function yo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function vo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let bo=null;function wo(){if(!bo){const t=H.Symbol;if(t&&t.iterator)bo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(bo=n)}}}return bo}function _o(t){return!!Oo(t)&&(Array.isArray(t)||!(t instanceof Map)&&wo()in t)}function Oo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Eo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function So(t,e,n,r){const i=Bt();return Eo(i,Yt(),e)&&(zt(),function(t,e,n,r,i,o){const s=Nt(t,e);!function(t,e,n,r,i,o,s){if(null==o)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?b(o):s(o,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(de(),i,t,e,n,r)),So}function To(t,e,n,r,i,o,s,a){const u=Bt(),c=zt(),l=t+ht,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=hi(e,t,4,s||null,Ft(c,a));Si(e,n,l,Ft(c,u)),pe(e,l);const h=l.tViews=wi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Wt(h,!1);const f=u[11].createComment("");Dr(c,u,f,h),gr(f,u),Fi(u,u[l]=Di(f,u,f,h)),yt(h)&&yi(c,u,h),null!=s&&vi(u,h,a)}function Io(t,e=k.Default){const n=Bt();return null===n?vn(t,e):Ve(Gt(),n,m(t),e)}function Co(t,e,n){const r=Bt();return Eo(r,Yt(),e)&&Ei(zt(),de(),r,t,e,r[11],n,!1),Co}function xo(t,e,n,r,i){const o=i?"class":"style";Wi(t,n,e.inputs[o],o,r)}function jo(t,e,n,r){const i=Bt(),o=zt(),s=ht+t,a=i[11],u=i[s]=Tr(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=hi(e,t,2,i,Ft(a,o));return Si(e,n,u,Ft(a,s)),null!==u.attrs&&Qi(u,u.attrs,!1),null!==u.mergedAttrs&&Qi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Wt(c,!0);const l=c.mergedAttrs;null!==l&&Oe(a,u,l);const h=c.classes;null!==h&&Hr(a,u,h);const f=c.styles;null!==f&&qr(a,u,f),64!=(64&c.flags)&&Dr(o,i,u,c),0===qt.lFrame.elementDepthCount&&gr(u,i),qt.lFrame.elementDepthCount++,yt(c)&&(yi(o,i,c),function(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&vi(i,c)}function Ao(){let t=Gt();Qt()?qt.lFrame.isParent=!1:(t=t.parent,Wt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=zt();n.firstCreatePass&&(pe(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&xo(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&xo(n,e,Bt(),e.stylesWithoutHost,!1)}function ko(t,e,n,r){jo(t,e,n,r),Ao()}function No(t){return!!t&&"function"==typeof t.then}function Ro(t){return!!t&&"function"==typeof t.subscribe}const Do=Ro;function Po(t,e,n=!1,r){const i=Bt(),o=zt(),s=Gt();return function(t,e,n,r,i,o,s=!1,a){const u=yt(r),c=t.firstCreatePass&&Gi(t),l=zi(e);let h=!0;if(3&r.type){const f=Nt(r,e),d=a?a(f):B,p=d.target||f,g=l.length,m=a?t=>a(At(t[r.index])).target:r.index;if(xt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Mo(r,e,0,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=Mo(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=Mo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Po}function Lo(t,e,n,r){try{return!1!==n(r)}catch(i){return Ki(t,i),!1}}function Mo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&Ui(s);let a=Lo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Lo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Fo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ii(o):si(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Uo(t[a],e)&&(u=!0,t[a+1]=r?ui(n):oi(n)),a=r?ii(n):si(n)}u&&(t[n+1]=r?oi(o):ui(o))}function Uo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ln(t,e)>=0}const Vo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qo(t){return t.substring(Vo.key,Vo.keyEnd)}function Ho(t,e){const n=Vo.textEnd;return n===e?-1:(e=Vo.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Vo.key=e,n),Bo(t,e,n))}function Bo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function zo(t,e){return function(t,e,n,r){const i=Bt(),o=zt(),s=Jt(2);o.firstUpdatePass&&Qo(o,t,s,true),e!==ti&&Eo(i,s,e)&&Yo(o,o.data[he()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=f(Nn(t))),t}(e),true,s)}(t,e),zo}function Go(t){!function(t,e,n,r){const i=zt(),o=Jt(2);i.firstUpdatePass&&Qo(i,null,o,r);const s=Bt();if(n!==ti&&Eo(s,o,n)){const a=i.data[he()];if(ts(a,r)&&!Wo(i,o)){let t=a.classesWithoutHost;null!==t&&(n=d(t,n||"")),xo(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===ti&&(i=z);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let d,p=null;l===h?(u+=2,c+=2,s!==f&&(p=h,d=f)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,d=f),null!==p&&Yo(t,e,n,r,p,d,true,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return z;const r=[],i=Nn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(un,Ko,t,!0)}function Ko(t,e){for(let n=function(t){return function(t){Vo.key=0,Vo.keyEnd=0,Vo.value=0,Vo.valueEnd=0,Vo.textEnd=t.length}(t),Ho(t,Bo(t,0,Vo.textEnd))}(e);n>=0;n=Ho(e,n))un(t,qo(e),!0)}function Wo(t,e){return e>=t.expandoStartIndex}function Qo(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[he()],s=Wo(t,n);ts(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Xo(n=$o(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=$o(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==si(r))return t[ii(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=$o(null,t,e,n[1],r),n=Xo(n,e.attrs,r),function(t,e,n,r){t[ii(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Xo(r,t[o].hostAttrs,n);return Xo(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ii(s),u=si(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ln(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ii(t[a+1]);t[r+1]=ri(e,a),0!==e&&(t[e+1]=ai(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ri(a,0),0!==a&&(t[a+1]=ai(t[a+1],r)),a=r;else t[r+1]=ri(u,0),0===a?a=r:t[u+1]=ai(t[u+1],r),u=r;l&&(t[r+1]=oi(t[r+1])),Fo(t,c,r,!0),Fo(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ln(o,e)>=0&&(n[r+1]=ui(n[r+1]))}(e,c,t,r,o),s=ri(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function $o(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Xo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Xo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),un(t,s,!!n||e[++o]))}return void 0===t?null:t}function Yo(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Zo(1==(1&c)?Jo(u,e,n,i,si(c),s):void 0)||(Zo(o)||2==(2&c)&&(o=Jo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=xt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:vr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=vr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,kt(he(),n),i,o))}function Jo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ti&&(l=c?z:void 0);let h=c?cn(l,r):u===r?l:void 0;if(o&&!Zo(h)&&(h=cn(e,r)),Zo(h)&&(a=h,s))return a;const f=t[i+1];i=s?ii(f):si(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=cn(t,r))}return a}function Zo(t){return void 0!==t}function ts(t,e){return 0!=(t.flags&(e?16:32))}function es(t,e=""){const n=Bt(),r=zt(),i=t+ht,o=r.firstCreatePass?hi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Dr(r,n,s,o),Wt(o,!1)}function ns(t){return rs("",t,""),ns}function rs(t,e,n){const r=Bt(),i=function(t,e,n,r){return Eo(t,Yt(),n)?e+b(n)+r:ti}(r,t,e,n);return i!==ti&&function(t,e,n){const r=kt(e,t);!function(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,he(),i),rs}function is(t,e,n){const r=Bt();return Eo(r,Yt(),e)&&Ei(zt(),de(),r,t,e,r[11],n,!0),is}const os=void 0;var ss=["en",[["a","p"],["AM","PM"],os],[["AM","PM"],os,os],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],os,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],os,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",os,"{1} 'at' {0}",os],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let as={};function us(t,e,n){"string"!=typeof e&&(n=e,e=t[ds.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),as[e]=t,n&&(as[e][ds.ExtraData]=n)}function cs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=fs(e);if(n)return n;const r=e.split("-")[0];if(n=fs(r),n)return n;if("en"===r)return ss;throw new Error(`Missing locale data for the locale "${t}".`)}function ls(t){return cs(t)[ds.CurrencyCode]||null}function hs(t){return cs(t)[ds.PluralCase]}function fs(t){return t in as||(as[t]=H.ng&&H.ng.common&&H.ng.common.locales&&H.ng.common.locales[t]),as[t]}var ds=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ps="en-US";let gs=ps;function ms(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(gs=t.toLowerCase().replace(/_/g,"-"))}function ys(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let o=0;o<t.length;o++)ys(t[o],e,n,r,i);else{const o=zt(),s=Bt();let a=co(t)?t:m(t.provide),u=so(t);const c=Gt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(co(t)||!t.multi){const r=new _e(u,i,Io),d=ws(a,e,i?l:l+f,h);-1===d?(Me(Re(c,s),o,a),vs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=ws(a,e,l+f,h),p=ws(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){Me(Re(c,s),o,a);const l=function(t,e,n,r,i){const o=new _e(t,n,Io);return o.multi=[],o.index=e,o.componentProviders=0,bs(o,i,r&&!n),o}(i?Os:_s,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),vs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else vs(o,t,d>-1?d:p,bs(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function vs(t,e,n,r){const i=co(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function bs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ws(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function _s(t,e,n,r){return Es(this.multi,[])}function Os(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ge(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Es(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Es(i,o);return o}function Es(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ss(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=zt();if(r.firstCreatePass){const i=vt(t);ys(n,r.data,r.blueprint,i,!0),ys(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Ts{}class Is{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${f(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Cs=(()=>{class t{}return t.NULL=new Is,t})();function xs(...t){}function js(t,e){return new ks(Nt(t,e))}const As=function(){return js(Gt(),Bt())};let ks=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=As,t})();function Ns(t){return t instanceof ks?t.nativeElement:t}class Rs{}let Ds=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ps(),t})();const Ps=function(){const t=Bt(),e=Dt(Gt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let Ls=(()=>{class t{}return t.\u0275prov=O({token:t,providedIn:"root",factory:()=>null}),t})();class Ms{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Fs=new Ms("11.2.9");class Us{constructor(){}supports(t){return _o(t)}create(t){return new qs(t)}}const Vs=(t,e)=>e;class qs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Vs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Gs(n,r,i)?e:n,s=Gs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!_o(t))throw new Error(`Error trying to diff '${f(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[wo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Hs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new zs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Hs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class zs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Bs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Gs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ks{constructor(){}supports(t){return t instanceof Map||Oo(t)}create(){return new Ws}}class Ws{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Oo(t)))throw new Error(`Error trying to diff '${f(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Qs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Qs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $s(){return new Xs([new Us])}let Xs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||$s()),deps:[[t,new En,new On]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=O({token:t,providedIn:"root",factory:$s}),t})();function Ys(){return new Js([new Ks])}let Js=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ys()),deps:[[t,new En,new On]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=O({token:t,providedIn:"root",factory:Ys}),t})();function Zs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(At(o)),pt(o))for(let t=ft;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Zs(e[1],e,n,r)}const s=n.type;if(8&s)Zs(t,e,n.child,r);else if(32&s){const t=br(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Lr(e,n);if(Array.isArray(t))r.push(...t);else{const n=wr(e[16]);Zs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ta{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Zs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Cr(t,n),an(e,n))}this._attachedToViewContainer=!1}xr(this._lView[1],this._lView)}onDestroy(t){_i(this._lView[1],this._lView,null,t)}markForCheck(){Ui(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Vi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Xt(!0);try{Vi(t,e,n)}finally{Xt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Ur(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ea extends ta{constructor(t){super(t),this._view=t}detectChanges(){qi(this._view)}checkNoChanges(){!function(t){Xt(!0);try{qi(t)}finally{Xt(!1)}}(this._view)}get context(){return null}}const na=ia;let ra=(()=>{class t{}return t.__NG_ELEMENT_ID__=na,t.__ChangeDetectorRef__=!0,t})();function ia(t=!1){return function(t,e,n){if(!n&&mt(t)){const n=Dt(t.index,e);return new ta(n,n)}return 47&t.type?new ta(e[16],e):null}(Gt(),Bt(),t)}const oa=[new Ks],sa=new Xs([new Us]),aa=new Js(oa),ua=function(){return fa(Gt(),Bt())};let ca=(()=>{class t{}return t.__NG_ELEMENT_ID__=ua,t})();const la=ca,ha=class extends la{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=li(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),di(e,n,t),new ta(n)}};function fa(t,e){return 4&t.type?new ha(e,t,js(t,e)):null}class da{}class pa{}const ga=function(){return _a(Gt(),Bt())};let ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=ga,t})();const ya=ma,va=class extends ya{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return js(this._hostTNode,this._hostLView)}get injector(){return new Qe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Le(this._hostTNode,this._hostLView);if(Ce(t)){const e=je(t,this._hostLView),n=xe(t);return new Qe(e[1].data[n+8],e)}return new Qe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ba(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(da,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new va(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ft?(e[4]=n[i],sn(n,ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Mr(i,o),a=n[11],u=Rr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Ur(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),sn(wa(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ba(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);n&&(an(wa(this._lContainer),e),xr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);return n&&null!=an(wa(this._lContainer),e)?new ta(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ba(t){return t[8]}function wa(t){return t[8]||(t[8]=[])}function _a(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=At(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);Ar(n,Rr(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Di(r,e,i,t),Fi(e,n)}return new va(n,t,e)}const Oa={};class Ea extends Cs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new Ia(e,this.ngModule)}}function Sa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ta=new tn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>mr});class Ia extends Ts{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Zr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Sa(this.componentDef.inputs)}get outputs(){return Sa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Oa,i);return o!==Oa||r===Oa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Rs,jt),s=i.get(Ls,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===M.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Tr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:mr,clean:Bi,playerHandler:null,flags:0},f=wi(0,null,null,1,0,null,null,null,null,null),d=li(null,f,h,l,null,null,o,a,s,i);let p,g;oe(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=hi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Qi(a,u,!0),null!==t&&(Oe(i,t,u),null!==a.classes&&Hr(i,t,a.classes),null!==a.styles&&qr(i,t,a.styles)));const c=r.createRenderer(t,e),l=li(n,bi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Me(Re(a,n),s,e.type),Ci(s,a),ji(a,n.length,1)),Fi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Oe(a,c,["ng-version",Fs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!$r(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Oe(a,c,t),e&&e.length>0&&Hr(a,c,e.join(" "))}if(g=Rt(f,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Gt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ai(t,r,e,fi(t,e,1,null),n));const i=Ge(e,t,r.directiveStart,r);gr(i,e);const o=Nt(r,e);return o&&gr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Gt();e.contentQueries(1,s,t.directiveStart)}const a=Gt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(fe(a.index),Ti(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ii(e,s)),s}(t,this.componentDef,d,h,[fo]),di(f,d,null)}finally{le()}return new Ca(this.componentType,p,js(g,d),d,g)}}class Ca extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ea(r),this.componentType=t}get injector(){return new Qe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const xa=new Map;class ja extends da{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ea(this);const n=lt(t),r=t[X]||null;r&&ms(r),this._bootstrapComponents=yr(n.bootstrap),this._r3Injector=ro(t,e,[{provide:da,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],f(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ho.THROW_IF_NOT_FOUND,n=k.Default){return t===ho||t===da||t===$i?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Aa extends pa{constructor(t){super(),this.moduleType=t,null!==lt(t)&&function(t){const e=new Set;!function t(n){const r=lt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${f(e)} vs ${f(e.name)}`)}(i,xa.get(i),n),xa.set(i,n));const o=yr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ja(this.moduleType,t)}}const ka=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Na(){return this._results[wo()]()}class Ra{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=wo(),n=Ra.prototype;n[e]||(n[e]=Na)}get changes(){return this._changes||(this._changes=new ka)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=rn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Da{constructor(t){this.queryList=t,this.matches=null}clone(){return new Da(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Pa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ka(t,e).matches&&this.queries[e].setDirty()}}class La{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ma{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ma(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Fa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Fa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ua(e,i)),this.matchTNodeWithReadOption(t,e,ze(e,t,i,!1,!1))}else n===ca?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,ze(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ks||r===ma||r===ca&&4&e.type)this.addMatch(e.index,-2);else{const n=ze(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ua(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Va(t,e,n,r){return-1===n?function(t,e){return 11&t.type?js(t,e):4&t.type?fa(t,e):null}(e,t):-2===n?function(t,e,n){return n===ks?js(e,t):n===ca?fa(e,t):n===ma?_a(e,t):void 0}(t,e,r):Ge(t,t[1],n,e)}function qa(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Va(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ha(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=qa(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ft;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ha(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ha(n[1],n,i,r)}}}}}return r}function Ba(t){const e=Bt(),n=zt(),r=ee();ne(r+1);const i=Ka(n,r);if(t.dirty&&Lt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ha(n,e,r,[]):qa(n,e,i,r);t.reset(o,Ns),t.notifyOnChanges()}return!0}return!1}function za(t,e,n,r){const i=zt();if(i.firstCreatePass){const o=Gt();(function(t,e,n){null===t.queries&&(t.queries=new Ma),t.queries.track(new Fa(e,n))})(i,new La(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Ra(4==(4&n));_i(t,e,r,r.destroy),null===e[19]&&(e[19]=new Pa),e[19].queries.push(new Da(r))}(i,Bt(),n)}function Ga(){return t=Bt(),e=ee(),t[19].queries[e].queryList;var t,e}function Ka(t,e){return t.queries.getByIndex(e)}function Wa(t=k.Default){const e=ia(!0);if(null!=e||t&k.Optional)return e;_("ChangeDetectorRef")}const Qa=new tn("Application Initializer");let $a=(()=>{class t{constructor(t){this.appInits=t,this.resolve=xs,this.reject=xs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();No(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(vn(Qa,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const Xa=new tn("AppId"),Ya={provide:Xa,useFactory:function(){return`${Ja()}${Ja()}${Ja()}`},deps:[]};function Ja(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Za=new tn("Platform Initializer"),tu=new tn("Platform ID"),eu=new tn("appBootstrapListener");let nu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const ru=new tn("LocaleId"),iu=new tn("DefaultCurrencyCode");class ou{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const su=function(t){return new Aa(t)},au=su,uu=function(t){return Promise.resolve(su(t))},cu=function(t){const e=su(t),n=yr(lt(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new Ia(n)),t},[]);return new ou(e,n)},lu=cu,hu=function(t){return Promise.resolve(cu(t))};let fu=(()=>{class t{constructor(){this.compileModuleSync=au,this.compileModuleAsync=uu,this.compileModuleAndAllComponentsSync=lu,this.compileModuleAndAllComponentsAsync=hu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();const du=(()=>Promise.resolve(0))();function pu(t){"undefined"==typeof Zone?du.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class gu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ka(!1),this.onMicrotaskEmpty=new ka(!1),this.onStable=new ka(!1),this.onError=new ka(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=H.requestAnimationFrame,e=H.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(H,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,vu(t),yu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),vu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return bu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),wu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return bu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),wu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,vu(t),yu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,mu,xs,xs);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const mu={};function yu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function bu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function wu(t){t._nesting--,yu(t)}class _u{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ka,this.onMicrotaskEmpty=new ka,this.onStable=new ka,this.onError=new ka}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Ou=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gu.assertNotInAngularZone(),pu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())pu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(vn(gu))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})(),Eu=(()=>{class t{constructor(){this._applications=new Map,Cu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Cu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();class Su{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Tu(t){Cu=t}let Iu,Cu=new Su,xu=!0,ju=!1;function Au(){return ju=!0,xu}function ku(){if(ju)throw new Error("Cannot enable prod mode after platform setup.");xu=!1}const Nu=new tn("AllowMultipleToken");class Ru{constructor(t,e){this.name=t,this.token=e}}function Du(t,e,n=[]){const r=`Platform: ${e}`,i=new tn(r);return(e=[])=>{let o=Pu();if(!o||o.injector.get(Nu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Yi,useValue:"platform"});!function(t){if(Iu&&!Iu.destroyed&&!Iu.injector.get(Nu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Iu=t.get(Lu);const e=t.get(Za,null);e&&e.forEach(t=>t())}(ho.create({providers:t,name:r}))}return function(t){const e=Pu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Pu(){return Iu&&!Iu.destroyed?Iu:null}let Lu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new _u:("zone.js"===t?void 0:t)||new gu({enableLongStackTrace:Au(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:gu,useValue:n}];return n.run(()=>{const e=ho.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(pr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Uu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return No(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get($a);return t.runInitializers(),t.donePromise.then(()=>(ms(i.injector.get(ru,ps)||ps),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Mu({},e);return function(t,e,n){const r=new Aa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Fu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${f(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(vn(ho))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Mu(t,e){return Array.isArray(e)?e.reduce(Mu,t):Object.assign(Object.assign({},t),e)}let Fu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{gu.assertNotInAngularZone(),pu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{gu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(l,h.pipe(t=>{return Object(u.a)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.b);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ts?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(da),i=n.create(ho.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Ou,null),a=s&&i.injector.get(Eu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Uu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Uu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(eu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(vn(gu),vn(ho),vn(pr),vn(Cs),vn($a))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function Uu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Vu{}class qu{}const Hu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Bu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Hu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>zu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>zu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(vn(fu),vn(qu,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t})();function zu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Gu=function(t){return null},Ku=Du(null,"core",[{provide:tu,useValue:"unknown"},{provide:Lu,deps:[ho]},{provide:Eu,deps:[]},{provide:nu,deps:[]}]),Wu=[{provide:Fu,useClass:Fu,deps:[gu,ho,pr,Cs,$a]},{provide:Ta,deps:[gu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:$a,useClass:$a,deps:[[new On,Qa]]},{provide:fu,useClass:fu,deps:[]},Ya,{provide:Xs,useFactory:function(){return sa},deps:[]},{provide:Js,useFactory:function(){return aa},deps:[]},{provide:ru,useFactory:function(t){return ms(t=t||"undefined"!=typeof $localize&&$localize.locale||ps),t},deps:[[new _n(ru),new On,new En]]},{provide:iu,useValue:"USD"}];let Qu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(vn(Fu))},t.\u0275mod=it({type:t}),t.\u0275inj=E({providers:Wu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},ofXK:function(t,e,n){"use strict";n.d(e,"a",function(){return w}),n.d(e,"b",function(){return D}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return O}),n.d(e,"e",function(){return h}),n.d(e,"f",function(){return E}),n.d(e,"g",function(){return v}),n.d(e,"h",function(){return k}),n.d(e,"i",function(){return _}),n.d(e,"j",function(){return c}),n.d(e,"k",function(){return M}),n.d(e,"l",function(){return L}),n.d(e,"m",function(){return a}),n.d(e,"n",function(){return P}),n.d(e,"o",function(){return o}),n.d(e,"p",function(){return A}),n.d(e,"q",function(){return s});var r=n("fXoL");let i=null;function o(){return i}function s(t){i||(i=t)}class a{}const u=new r.r("DocumentToken");let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:l,token:t,providedIn:"platform"}),t})();function l(){return Object(r.Rb)(f)}const h=new r.r("Location Initialized");let f=(()=>{class t extends c{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){d()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){d()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(u))},t.\u0275prov=Object(r.Hb)({factory:p,token:t,providedIn:"platform"}),t})();function d(){return!!window.history.pushState}function p(){return new f(Object(r.Rb)(u))}function g(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function m(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:b,token:t,providedIn:"root"}),t})();function b(t){const e=Object(r.Rb)(u).location;return new _(Object(r.Rb)(c),e&&e.origin||"")}const w=new r.r("appBaseHref");let _=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return g(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(c),r.Rb(w,8))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),O=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=g(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(c),r.Rb(w,8))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=m(T(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,T(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(v),r.Rb(c))},t.normalizeQueryParams=y,t.joinWithSlash=g,t.stripTrailingSlash=m,t.\u0275prov=Object(r.Hb)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new E(Object(r.Rb)(v),Object(r.Rb)(c))}function T(t){return t.replace(/\/index.html$/,"")}var I=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const C=r.mb;class x{}let j=(()=>{class t extends x{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(C(e||this.locale)(t)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.v))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();function A(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let k=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.Q),r.Lb(r.L))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[{provide:x,useClass:j}]}),t})();const P="browser";function L(t){return"server"===t}let M=(()=>{class t{}return t.\u0275prov=Object(r.Hb)({token:t,providedIn:"root",factory:()=>new F(Object(r.Rb)(u),window)}),t})();class F{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=U(this.window.history)||U(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function U(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return w}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return S}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return l}),n.d(e,"j",function(){return h}),n.d(e,"k",function(){return d}),n.d(e,"l",function(){return p}),n.d(e,"m",function(){return u}),n.d(e,"n",function(){return c}),n.d(e,"o",function(){return f}),n.d(e,"p",function(){return g});var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return a().indexOf("MSAppHost/")>=0}var m=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,y.prototype.create),o}return Object(r.c)(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new m(i,a,r);return u},t}();function v(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new O(t,e);return n.subscribe.bind(n)}var O=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function E(){}function S(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},sVev:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})()},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return I}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),w=new u.P("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:_,deps:[v,u.A,[new u.B,b]]};let I=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(u.C))},t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},"tk/3":function(t,e,n){"use strict";n.d(e,"a",function(){return I}),n.d(e,"b",function(){return q});var r=n("fXoL"),i=n("LRne"),o=n("HDdC"),s=n("bOdf"),a=n("pLZG"),u=n("lJxs"),c=n("ofXK");class l{}class h{}class f{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof f?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new f;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof f?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class d{encodeKey(t){return p(t)}encodeValue(t){return p(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function p(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class g{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new d,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new g({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function m(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function y(t){return"undefined"!=typeof Blob&&t instanceof Blob}function v(t){return"undefined"!=typeof FormData&&t instanceof FormData}class b{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new f),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new g,this.urlWithParams=e}serializeBody(){return null===this.body?null:m(this.body)||y(this.body)||v(this.body)||"string"==typeof this.body?this.body:this.body instanceof g?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||v(this.body)?null:y(this.body)?this.body.type||null:m(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof g?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new b(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var w=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class _{constructor(t,e=200,n="OK"){this.headers=t.headers||new f,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class O extends _{constructor(t={}){super(t),this.type=w.ResponseHeader}clone(t={}){return new O({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class E extends _{constructor(t={}){super(t),this.type=w.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new E({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class S extends _{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function T(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let I=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof b)r=t;else{let i,o;i=n.headers instanceof f?n.headers:new f(n.headers),n.params&&(o=n.params instanceof g?n.params:new g({fromObject:n.params})),r=new b(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const o=Object(i.a)(r).pipe(Object(s.a)(t=>this.handler.handle(t)));if(t instanceof b||"events"===n.observe)return o;const c=o.pipe(Object(a.a)(t=>t instanceof E));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return c.pipe(Object(u.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return c.pipe(Object(u.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return c.pipe(Object(u.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return c.pipe(Object(u.a)(t=>t.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new g).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,T(n,e))}post(t,e,n={}){return this.request("POST",t,T(n,e))}put(t,e,n={}){return this.request("PUT",t,T(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(l))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class C{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const x=new r.r("HTTP_INTERCEPTORS");let j=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const A=/^\)\]\}',?\n/;class k{}let N=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),R=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new o.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new f(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new O({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(A,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new E({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new S({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new S({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:w.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:w.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:w.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(k))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const D=new r.r("XSRF_COOKIE_NAME"),P=new r.r("XSRF_HEADER_NAME");class L{}let M=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(c.p)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(c.c),r.Rb(r.C),r.Rb(D))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),F=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(L),r.Rb(P))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),U=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(x,[]);this.chain=t.reduceRight((t,e)=>new C(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(h),r.Rb(r.s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),V=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:F,useClass:j}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:D,useValue:e.cookieName}:[],e.headerName?{provide:P,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[F,{provide:x,useExisting:F,multi:!0},{provide:L,useClass:M},{provide:D,useValue:"XSRF-TOKEN"},{provide:P,useValue:"X-XSRF-TOKEN"}]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({providers:[I,{provide:l,useClass:U},R,{provide:h,useExisting:R},N,{provide:k,useExisting:N}],imports:[[V.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})()},tyNb:function(t,e,n){"use strict";n.d(e,"a",function(){return Sn}),n.d(e,"b",function(){return Tn}),n.d(e,"c",function(){return In}),n.d(e,"d",function(){return Fn}),n.d(e,"e",function(){return xn});var r=n("ofXK"),i=n("fXoL"),o=n("Cfvw"),s=n("LRne"),a=n("XNiG"),u=n("9ppp");class c extends a.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new u.a;return this._value}next(t){super.next(this._value=t)}}var l=n("z+Ro"),h=n("DH7j"),f=n("7o/Q");class d extends f.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class p extends f.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var g=n("SeVD"),m=n("HDdC");function y(t,e,n,r,i=new p(t,n,r)){if(!i.closed)return e instanceof m.a?e.subscribe(i):Object(g.a)(e)(i)}var v=n("yCtX");const b={};class w{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new _(t,this.resultSelector))}}class _ extends d{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(b),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(y(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===b?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var O=n("sVev"),E=n("GyhO"),S=n("EY2u");function T(t){return new m.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(o.a)(n):Object(S.b)()).subscribe(e)})}var I=n("EQ5u"),C=n("lJxs"),x=n("eIep"),j=n("IzEk"),A=n("JX91"),k=n("Kqap"),N=n("pLZG"),R=n("zx2A");function D(t){return function(e){const n=new P(t),r=e.lift(n);return n.caught=r}}class P{constructor(t){this.selector=t}call(t,e){return e.subscribe(new L(t,this.selector,this.caught))}}class L extends R.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new R.a(this);this.add(r);const i=Object(R.c)(n,r);i!==r&&this.add(i)}}}var M=n("bOdf"),F=n("4I5i");function U(t){return function(e){return 0===t?Object(S.b)():e.lift(new V(t))}}class V{constructor(t){if(this.total=t,this.total<0)throw new F.a}call(t,e){return e.subscribe(new q(t,this.total))}}class q extends f.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var H=n("XDbj"),B=n("xbPD"),z=n("SpAZ"),G=n("SxV6"),K=n("5+tZ"),W=n("vkgz"),Q=n("x+ZX"),$=n("quSY");class X{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Y(t,this.callback))}}class Y extends f.a{constructor(t,e){super(t),this.add(new $.a(e))}}var J=n("bHdf");class Z{constructor(t,e){this.id=t,this.url=e}}class tt extends Z{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class et extends Z{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nt extends Z{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rt extends Z{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class it extends Z{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ot extends Z{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class st extends Z{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class at extends Z{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ut extends Z{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ct{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lt{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ht{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ft{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dt{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pt{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gt{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const mt="primary";class yt{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function vt(t){return new yt(t)}function bt(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function wt(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function _t(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ot(t[i],e[i]))return!1;return!0}function Ot(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Et(t){return Array.prototype.concat.apply([],t)}function St(t){return t.length>0?t[t.length-1]:null}function Tt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function It(t){return Object(i.qb)(t)?t:Object(i.rb)(t)?Object(o.a)(Promise.resolve(t)):Object(s.a)(t)}function Ct(t,e,n){return n?function(t,e){return _t(t,e)}(t.queryParams,e.queryParams)&&xt(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ot(t[n],e[n]))}(t.queryParams,e.queryParams)&&jt(t.root,e.root)}function xt(t,e){if(!Dt(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!xt(t.children[n],e.children[n]))return!1}return!0}function jt(t,e){return At(t,e,e.segments)}function At(t,e,n){if(t.segments.length>n.length)return!!Dt(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Dt(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!jt(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Dt(t.segments,r)&&!!t.children.primary&&At(t.children.primary,e,i)}}class kt{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vt(this.queryParams)),this._queryParamMap}toString(){return Mt.serialize(this)}}class Nt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Tt(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ft(this)}}class Rt{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=vt(this.parameters)),this._parameterMap}toString(){return Gt(this)}}function Dt(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Pt{}class Lt{parse(t){const e=new Xt(t);return new kt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Ut(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${qt(e)}=${qt(t)}`).join("&"):`${qt(e)}=${qt(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Mt=new Lt;function Ft(t){return t.segments.map(t=>Gt(t)).join("/")}function Ut(t,e){if(!t.hasChildren())return Ft(t);if(e){const e=t.children.primary?Ut(t.children.primary,!1):"",n=[];return Tt(t.children,(t,e)=>{e!==mt&&n.push(`${e}:${Ut(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Tt(t.children,(t,r)=>{r===mt&&(n=n.concat(e(t,r)))}),Tt(t.children,(t,r)=>{r!==mt&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===mt?[Ut(t.children.primary,!1)]:[`${n}:${Ut(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Ft(t)}/${e[0]}`:`${Ft(t)}/(${e.join("//")})`}}function Vt(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qt(t){return Vt(t).replace(/%3B/gi,";")}function Ht(t){return Vt(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bt(t){return decodeURIComponent(t)}function zt(t){return Bt(t.replace(/\+/g,"%20"))}function Gt(t){return`${Ht(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Ht(t)}=${Ht(e[t])}`).join("")}`;var e}const Kt=/^[^\/()?;=#]+/;function Wt(t){const e=t.match(Kt);return e?e[0]:""}const Qt=/^[^=?&#]+/,$t=/^[^?&#]+/;class Xt{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Nt(t,e)),n}parseSegment(){const t=Wt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Rt(Bt(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Wt(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Wt(this.remaining);t&&(n=t,this.capture(n))}t[Bt(e)]=Bt(n)}parseQueryParam(t){const e=function(t){const e=t.match(Qt);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match($t);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=zt(e),i=zt(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Wt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=mt);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Nt([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Yt{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Jt(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Jt(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Zt(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Zt(t,this._root).map(t=>t.value)}}function Jt(t,e){if(t===e.value)return e;for(const n of e.children){const e=Jt(t,n);if(e)return e}return null}function Zt(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Zt(t,n);if(r.length)return r.unshift(e),r}return[]}class te{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ee(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ne extends Yt{constructor(t,e){super(t),this.snapshot=e,ue(this,t)}toString(){return this.snapshot.toString()}}function re(t,e){const n=function(t,e){const n=new se([],{},{},"",{},mt,e,null,t.root,-1,{});return new ae("",new te(n,[]))}(t,e),r=new c([new Rt("",{})]),i=new c({}),o=new c({}),s=new c({}),a=new c(""),u=new ie(r,i,s,a,o,mt,e,n.root);return u.snapshot=n.root,new ne(new te(u,[]),n)}class ie{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(C.a)(t=>vt(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(C.a)(t=>vt(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oe(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class se{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ae extends Yt{constructor(t,e){super(e),this.url=t,ue(this,e)}toString(){return ce(this._root)}}function ue(t,e){e.value._routerState=t,e.children.forEach(e=>ue(t,e))}function ce(t){const e=t.children.length>0?` { ${t.children.map(ce).join(", ")} } `:"";return`${t.value}${e}`}function le(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,_t(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),_t(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!_t(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),_t(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function he(t,e){var n,r;return _t(t.params,e.params)&&Dt(n=t.url,r=e.url)&&n.every((t,e)=>_t(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||he(t.parent,e.parent))}function fe(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return fe(t,e,r);return fe(t,e)})}(t,e,n);return new te(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return de(e,t),t}{const n=new ie(new c((r=e.value).url),new c(r.params),new c(r.queryParams),new c(r.fragment),new c(r.data),r.outlet,r.component,r),i=e.children.map(e=>fe(t,e));return new te(n,i)}}var r}function de(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)de(t.children[n],e.children[n])}function pe(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ge(t){return"object"==typeof t&&null!=t&&t.outlets}function me(t,e,n,r,i){let o={};return r&&Tt(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new kt(n.root===t?e:ye(n.root,t,e),o,i)}function ye(t,e,n){const r={};return Tt(t.children,(t,i)=>{r[i]=t===e?n:ye(t,e,n)}),new Nt(t.segments,r)}class ve{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&pe(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(ge);if(r&&r!==St(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class be{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function we(t,e,n){if(t||(t=new Nt([],{})),0===t.segments.length&&t.hasChildren())return _e(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(ge(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Te(a,u,e))return o;r+=2}else{if(!Te(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Nt(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Nt(t.segments.slice(r.pathIndex),t.children),_e(e,0,i)}return r.match&&0===i.length?new Nt(t.segments,{}):r.match&&!t.hasChildren()?Oe(t,e,n):r.match?_e(t,0,i):Oe(t,e,n)}function _e(t,e,n){if(0===n.length)return new Nt(t.segments,{});{const r=function(t){return ge(t[0])?t[0].outlets:{[mt]:t}}(n),i={};return Tt(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=we(t.children[r],e,n))}),Tt(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Nt(t.segments,i)}}function Oe(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(ge(o)){const t=Ee(o.outlets);return new Nt(r,t)}if(0===i&&pe(n[0])){r.push(new Rt(t.segments[e].path,Se(n[0]))),i++;continue}const s=ge(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&pe(a)?(r.push(new Rt(s,Se(a))),i+=2):(r.push(new Rt(s,{})),i++)}return new Nt(r,{})}function Ee(t){const e={};return Tt(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Oe(new Nt([],{}),0,t))}),e}function Se(t){const e={};return Tt(t,(t,n)=>e[n]=`${t}`),e}function Te(t,e,n){return t==n.path&&_t(e,n.parameters)}class Ie{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),le(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=ee(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Tt(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=ee(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=ee(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new pt(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ft(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(le(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ce(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Ce(t){le(t.value),t.children.forEach(Ce)}class xe{constructor(t,e){this.routes=t,this.module=e}}function je(t){return"function"==typeof t}function Ae(t){return t instanceof kt}const ke=Symbol("INITIAL_VALUE");function Ne(){return Object(x.a)(t=>function(...t){let e,n;return Object(l.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(h.a)(t[0])&&(t=t[0]),Object(v.a)(t,n).lift(new w(e))}(t.map(t=>t.pipe(Object(j.a)(1),Object(A.a)(ke)))).pipe(Object(k.a)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==ke)return t;if(r===ke&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Ae(r))return r}return t},t)},ke),Object(N.a)(t=>t!==ke),Object(C.a)(t=>Ae(t)?t:!0===t),Object(j.a)(1)))}let Re=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Fb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&i.Mb(0,"router-outlet")},directives:function(){return[xn]},encapsulation:2}),t})();function De(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Pe(r,Le(e,r))}}function Pe(t,e){t.children&&De(t.children,e)}function Le(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Me(t){const e=t.children&&t.children.map(Me),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==mt&&(n.component=Re),n}function Fe(t){return t.outlet||mt}function Ue(t,e){const n=t.filter(t=>Fe(t)===e);return n.push(...t.filter(t=>Fe(t)!==e)),n}const Ve={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function qe(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Ve):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||wt)(n,t,e);if(!i)return Object.assign({},Ve);const o={};Tt(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function He(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Be(t,e,n)&&Fe(n)!==mt)}(t,n,r)){const i=new Nt(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Fe(o)!==mt){const n=new Nt([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Fe(o)]=n}return i}(t,e,r,new Nt(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Be(t,e,n))}(t,n,r)){const o=new Nt(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Be(t,n,a)&&!i[Fe(a)]){const n=new Nt([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Fe(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Nt(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Be(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function ze(t,e,n,r){return!!(Fe(t)===r||r!==mt&&Be(e,n,t))&&("**"===t.path||qe(e,t,n).matched)}function Ge(t,e,n){return 0===e.length&&!t.children[n]}class Ke{constructor(t){this.segmentGroup=t||null}}class We{constructor(t){this.urlTree=t}}function Qe(t){return new m.a(e=>e.error(new Ke(t)))}function $e(t){return new m.a(e=>e.error(new We(t)))}function Xe(t){return new m.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Ye{constructor(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.y)}apply(){const t=He(this.urlTree.root,[],[],this.config).segmentGroup,e=new Nt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,mt).pipe(Object(C.a)(t=>this.createUrlTree(Je(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(D(t=>{if(t instanceof We)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Ke)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,mt).pipe(Object(C.a)(e=>this.createUrlTree(Je(e),t.queryParams,t.fragment))).pipe(D(t=>{if(t instanceof Ke)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Nt([],{[mt]:t}):t;return new kt(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(C.a)(t=>new Nt([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(o.a)(r).pipe(Object(M.a)(r=>{const i=n.children[r],o=Ue(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(C.a)(t=>({segment:t,outlet:r})))}),Object(k.a)((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(N.a)((e,n)=>t(e,n,r)):z.a,U(1),n?Object(B.a)(e):Object(H.a)(()=>new O.a))}())}expandSegment(t,e,n,r,i,a){return Object(o.a)(n).pipe(Object(M.a)(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,a).pipe(D(t=>{if(t instanceof Ke)return Object(s.a)(null);throw t}))),Object(G.a)(t=>!!t),D((t,n)=>{if(t instanceof O.a||"EmptyError"===t.name){if(Ge(e,r,i))return Object(s.a)(new Nt([],{}));throw new Ke(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return ze(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Qe(e):Qe(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?$e(i):this.lineralizeSegments(n,i).pipe(Object(K.a)(n=>{const i=new Nt(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=qe(e,r,i);if(!s)return Qe(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?$e(l):this.lineralizeSegments(r,l).pipe(Object(K.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(s.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(C.a)(t=>(n._loadedConfig=t,new Nt(r,{})))):Object(s.a)(new Nt(r,{}));const{matched:o,consumedSegments:a,lastChild:u}=qe(e,n,r);if(!o)return Qe(e);const c=r.slice(u);return this.getChildConfig(t,n,r).pipe(Object(K.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:u,slicedSegments:l}=He(e,a,c,o),h=new Nt(u.segments,u.children);if(0===l.length&&h.hasChildren())return this.expandChildren(r,o,h).pipe(Object(C.a)(t=>new Nt(a,t)));if(0===o.length&&0===l.length)return Object(s.a)(new Nt(a,{}));const f=Fe(n)===i;return this.expandSegment(r,h,o,l,f?mt:i,!0).pipe(Object(C.a)(t=>new Nt(a.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(s.a)(new xe(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(s.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(K.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(C.a)(t=>(e._loadedConfig=t,t))):function(t){return new m.a(e=>e.error(bt(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(s.a)(new xe([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(s.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&je(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!je(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return It(o)});return Object(s.a)(i).pipe(Ne(),Object(W.a)(t=>{if(!Ae(t))return;const e=bt(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(C.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(s.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Xe(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new kt(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Tt(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Tt(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Nt(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Je(t){const e={};for(const n of Object.keys(t.children)){const r=Je(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Nt(t.segments.concat(e.segments),e.children)}return t}(new Nt(t.segments,e))}class Ze{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class tn{constructor(t,e){this.component=t,this.route=e}}function en(t,e,n){const r=t._root;return rn(r,e?e._root:null,n,[r.value])}function nn(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function rn(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ee(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Dt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Dt(t.url,e.url)||!_t(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!he(t,e)||!_t(t.queryParams,e.queryParams);case"paramsChange":default:return!he(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ze(r)):(o.data=s.data,o._resolvedData=s._resolvedData),rn(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new tn(a.outlet.component,s))}else s&&on(e,a,i),i.canActivateChecks.push(new Ze(r)),rn(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Tt(o,(t,e)=>on(t,n.getContext(e),i)),i}function on(t,e,n){const r=ee(t),i=t.value;Tt(r,(t,r)=>{on(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new tn(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class sn{}function an(t){return new m.a(e=>e.error(t))}class un{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=He(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,mt);if(null===e)return null;const n=new se([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},mt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new te(n,e),i=new ae(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=oe(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Ue(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!cn(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===mt?-1:e.value.outlet===mt?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Ge(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!ze(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?St(n).parameters:{};i=new se(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fn(t),Fe(t),t.component,t,ln(e),hn(e)+n.length,dn(t))}else{const r=qe(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new se(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fn(t),Fe(t),t.component,t,ln(e),hn(e)+o.length,dn(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=He(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new te(i,t)]}if(0===a.length&&0===c.length)return[new te(i,[])];const l=Fe(t)===r,h=this.processSegment(a,u,c,l?mt:r);return null===h?null:[new te(i,h)]}}function cn(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ln(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function hn(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function fn(t){return t.data||{}}function dn(t){return t.resolve||{}}function pn(t){return Object(x.a)(e=>{const n=t(e);return n?Object(o.a)(n).pipe(Object(C.a)(()=>e)):Object(s.a)(e)})}class gn extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const mn=new i.r("ROUTES");class yn{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(C.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new xe(Et(r.injector.get(mn,void 0,i.q.Self|i.q.Optional)).map(Me),r)}),D(t=>{throw e._loader$=void 0,t}));return e._loader$=new I.a(n,()=>new a.a).pipe(Object(Q.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(o.a)(this.loader.load(t)):It(t()).pipe(Object(K.a)(t=>t instanceof i.w?Object(s.a)(t):Object(o.a)(this.compiler.compileModuleAsync(t))))}}class vn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new bn,this.attachRef=null}}class bn{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new vn,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class wn{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function _n(t){throw t}function On(t,e,n){return e.parse("/")}function En(t,e){return Object(s.a)(null)}let Sn=(()=>{class t{constructor(t,e,n,r,o,s,u,l){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new a.a,this.errorHandler=_n,this.malformedUriErrorHandler=On,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:En,afterPreactivation:En},this.urlHandlingStrategy=new wn,this.routeReuseStrategy=new gn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(i.y),this.console=o.get(i.Y);const h=o.get(i.A);this.isNgZoneEnabled=h instanceof i.A&&i.A.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=new kt(new Nt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new yn(s,u,t=>this.triggerEvent(new ct(t)),t=>this.triggerEvent(new lt(t))),this.routerState=re(this.currentUrlTree,this.rootComponentType),this.transitions=new c({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(N.a)(t=>0!==t.id),Object(C.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(x.a)(t=>{let n=!1,r=!1;return Object(s.a)(t).pipe(Object(W.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Object(x.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(s.a)(t).pipe(Object(x.a)(t=>{const n=this.transitions.getValue();return e.next(new tt(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?S.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,a=this.config,Object(x.a)(t=>function(t,e,n,r,i){return new Ye(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,a).pipe(Object(C.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(W.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(K.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const a=new un(t,e,n,r,i,o).recognize();return null===a?an(new sn):Object(s.a)(a)}catch(a){return an(a)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(C.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(W.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new it(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,a;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:a}=t,u=new tt(n,this.serializeUrl(r),i,o);e.next(u);const c=re(r,this.rootComponentType).snapshot;return Object(s.a)(Object.assign(Object.assign({},t),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},a),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),S.a}),pn(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(W.a)(t=>{const e=new ot(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(C.a)(t=>Object.assign(Object.assign({},t),{guards:en(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(K.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=n;return 0===u.length&&0===a.length?Object(s.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(o.a)(t).pipe(Object(K.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(s.a)(!0);const a=o.map(o=>{const s=nn(o,e,i);let a;if(function(t){return t&&je(t.canDeactivate)}(s))a=It(s.canDeactivate(t,e,n,r));else{if(!je(s))throw new Error("Invalid CanDeactivate guard");a=It(s(t,e,n,r))}return a.pipe(Object(G.a)())});return Object(s.a)(a).pipe(Ne())}(t.component,t.route,n,e,r)),Object(G.a)(t=>!0!==t,!0))}(u,r,i,t).pipe(Object(K.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(o.a)(e).pipe(Object(M.a)(e=>Object(E.a)(function(t,e){return null!==t&&e&&e(new ht(t)),Object(s.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new dt(t)),Object(s.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>T(()=>{const i=e.guards.map(i=>{const o=nn(i,e.node,n);let s;if(function(t){return t&&je(t.canActivateChild)}(o))s=It(o.canActivateChild(r,t));else{if(!je(o))throw new Error("Invalid CanActivateChild guard");s=It(o(r,t))}return s.pipe(Object(G.a)())});return Object(s.a)(i).pipe(Ne())}));return Object(s.a)(i).pipe(Ne())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(s.a)(!0);const i=r.map(r=>T(()=>{const i=nn(r,e,n);let o;if(function(t){return t&&je(t.canActivate)}(i))o=It(i.canActivate(e,t));else{if(!je(i))throw new Error("Invalid CanActivate guard");o=It(i(e,t))}return o.pipe(Object(G.a)())}));return Object(s.a)(i).pipe(Ne())}(t,e.route,n))),Object(G.a)(t=>!0!==t,!0))}(r,a,t,e):Object(s.a)(n)),Object(C.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(W.a)(t=>{if(Ae(t.guardsResult)){const e=bt(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new st(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(N.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new nt(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),pn(t=>{if(t.guards.canActivateChecks.length)return Object(s.a)(t).pipe(Object(W.a)(t=>{const e=new at(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(x.a)(t=>{let n=!1;return Object(s.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(K.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(s.a)(t);let a=0;return Object(o.a)(n).pipe(Object(M.a)(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(s.a)({});const a={};return Object(o.a)(i).pipe(Object(K.a)(i=>function(t,e,n,r){const i=nn(t,e,r);return It(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(W.a)(t=>{a[i]=t}))),U(1),Object(K.a)(()=>Object.keys(a).length===i.length?Object(s.a)(a):S.a))}(t._resolve,t,e,r).pipe(Object(C.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),oe(t,n).resolve),null)))}(t.route,e,r,i)),Object(W.a)(()=>a++),U(1),Object(K.a)(e=>a===n.length?Object(s.a)(t):S.a))})),Object(W.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new nt(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(W.a)(t=>{const e=new ut(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),pn(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(C.a)(t=>{const e=function(t,e,n){const r=fe(t,e._root,n?n._root:void 0);return new ne(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(W.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(a=this.rootContexts,u=this.routeReuseStrategy,c=t=>this.triggerEvent(t),Object(C.a)(t=>(new Ie(u,t.targetRouterState,t.currentRouterState,c).activate(a),t))),Object(W.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new nt(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new X(i))),D(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Ae(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new nt(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new rt(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return S.a}));var i,a,u,c}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){De(t),this.config=t.map(Me),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return me(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ve(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Tt(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new ve(n,e,r)}(n);if(o.toRoot())return me(e.root,new Nt([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new be(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new be(t,t===e.root,0)}const r=pe(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new be(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?_e(s.segmentGroup,s.index,o.commands):we(s.segmentGroup,s.index,o.commands);return me(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Ae(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(Ae(t))return Ct(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ct(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new et(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(i.N),i.Rb(Pt),i.Rb(bn),i.Rb(r.f),i.Rb(i.s),i.Rb(i.x),i.Rb(i.i),i.Rb(void 0))},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})(),Tn=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new a.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Cn(this.skipLocationChange),replaceUrl:Cn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Cn(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(Sn),i.Lb(ie),i.Sb("tabindex"),i.Lb(i.E),i.Lb(i.l))},t.\u0275dir=i.Gb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&i.Ub("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.yb]}),t})(),In=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new a.a,this.subscription=t.events.subscribe(t=>{t instanceof et&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Cn(this.skipLocationChange),replaceUrl:Cn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Cn(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(Sn),i.Lb(ie),i.Lb(r.g))},t.\u0275dir=i.Gb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&i.Ub("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(i.Qb("href",e.href,i.Yb),i.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.yb]}),t})();function Cn(t){return""===t||!!t}let xn=(()=>{class t{constructor(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.n,this.deactivateEvents=new i.n,this.name=r||mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new jn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(bn),i.Lb(i.Q),i.Lb(i.j),i.Sb("name"),i.Lb(i.h))},t.\u0275dir=i.Gb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class jn{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===ie?this.route:t===bn?this.childContexts:this.parent.get(t,e)}}class An{}class kn{preload(t,e){return Object(s.a)(null)}}let Nn=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new yn(e,n,e=>t.triggerEvent(new ct(e)),e=>t.triggerEvent(new lt(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(N.a)(t=>t instanceof et),Object(M.a)(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(o.a)(n).pipe(Object(J.a)(),Object(C.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(s.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(K.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(Sn),i.Rb(i.x),i.Rb(i.i),i.Rb(i.s),i.Rb(An))},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})(),Rn=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof tt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof et&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gt&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new gt(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(Sn),i.Rb(r.k),i.Rb(void 0))},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})();const Dn=new i.r("ROUTER_CONFIGURATION"),Pn=new i.r("ROUTER_FORROOT_GUARD"),Ln=[r.f,{provide:Pt,useClass:Lt},{provide:Sn,useFactory:function(t,e,n,i,o,s,a,u={},c,l){const h=new Sn(null,t,e,n,i,o,s,Et(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=Object(r.o)();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Pt,bn,r.f,i.s,i.x,i.i,mn,Dn,[class{},new i.B],[class{},new i.B]]},bn,{provide:ie,useFactory:function(t){return t.routerState.root},deps:[Sn]},{provide:i.x,useClass:i.K},Nn,kn,class{preload(t,e){return e().pipe(D(()=>Object(s.a)(null)))}},{provide:Dn,useValue:{enableTracing:!1}}];function Mn(){return new i.z("Router",Sn)}let Fn=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Ln,Hn(e),{provide:Pn,useFactory:qn,deps:[[Sn,new i.B,new i.J]]},{provide:Dn,useValue:n||{}},{provide:r.g,useFactory:Vn,deps:[r.j,[new i.p(r.a),new i.B],Dn]},{provide:Rn,useFactory:Un,deps:[Sn,r.k,Dn]},{provide:An,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:kn},{provide:i.z,multi:!0,useFactory:Mn},[Bn,{provide:i.d,multi:!0,useFactory:zn,deps:[Bn]},{provide:Kn,useFactory:Gn,deps:[Bn]},{provide:i.b,multi:!0,useExisting:Kn}]]}}static forChild(e){return{ngModule:t,providers:[Hn(e)]}}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(Pn,8),i.Rb(Sn,8))},t.\u0275mod=i.Jb({type:t}),t.\u0275inj=i.Ib({}),t})();function Un(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Rn(t,e,n)}function Vn(t,e,n={}){return n.useHash?new r.d(t,e):new r.i(t,e)}function qn(t){return"guarded"}function Hn(t){return[{provide:i.a,multi:!0,useValue:t},{provide:mn,multi:!0,useValue:t}]}let Bn=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new a.a}appInitializer(){return this.injector.get(r.e,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Sn),r=this.injector.get(Dn);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(s.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Dn),n=this.injector.get(Nn),r=this.injector.get(Rn),o=this.injector.get(Sn),s=this.injector.get(i.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(i.s))},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})();function zn(t){return t.appInitializer.bind(t)}function Gn(t){return t.bootstrapListener.bind(t)}const Kn=new i.r("Router Initializer")},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},xbPD:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t=null){return e=>e.lift(new o(t))}class o{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new s(t,this.defaultValue))}}class s extends r.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.f)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.i)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.n)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.20",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("ofXK"),i=n("fXoL");class o extends r.m{constructor(){super()}supportsDOMEvents(){return!0}}class s extends o{static makeCurrent(){Object(r.q)(new s)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=u||(u=document.querySelector("base"),u)?u.getAttribute("href"):null;return null==e?null:(n=e,a||(a=document.createElement("a")),a.setAttribute("href",n),"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname);var n}resetBaseElement(){u=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Object(r.p)(document.cookie,t)}}let a,u=null;const c=new i.r("TRANSITION_ID"),l=[{provide:i.d,useFactory:function(t,e,n){return()=>{n.get(i.e).donePromise.then(()=>{const n=Object(r.o)();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[c,r.c,i.s],multi:!0}];class h{static init(){Object(i.X)(new h)}addToWindow(t){i.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),i.ob.getAllAngularRootElements=()=>t.getAllRootElements(),i.ob.frameworkStabilizers||(i.ob.frameworkStabilizers=[]),i.ob.frameworkStabilizers.push(t=>{const e=i.ob.getAllAngularTestabilities();let n=e.length,r=!1;const o=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?Object(r.o)().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const f=new i.r("EventManagerPlugins");let d=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(f),i.Rb(i.A))},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})();class p{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=Object(r.o)().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let g=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})(),m=(()=>{class t extends g{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Object(r.o)().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(r.c))},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})();const y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},v=/%COMP%/g;function b(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?b(t,i,n):(i=i.replace(v,t),n.push(i))}return n}function w(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let _=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new O(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new E(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case i.R.ShadowDom:return new S(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=b(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(d),i.Rb(m),i.Rb(i.c))},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})();class O{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(y[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=y[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=y[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(i.G.DashCase|i.G.Important)?t.style.setProperty(e,n,r&i.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&i.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,w(n)):this.eventManager.addEventListener(t,e,w(n))}}class E extends O{constructor(t,e,n,r){super(t),this.component=n;const i=b(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(v,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(v,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class S extends O{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=b(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let T=(()=>{class t extends p{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(r.c))},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})();const I=["alt","control","meta","shift"],C={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},x={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},j={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let A=(()=>{class t extends p{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const o=t.parseEventName(n),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Object(r.o)().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(I.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&x.hasOwnProperty(e)&&(e=x[e]))}return C[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),I.forEach(r=>{r!=n&&(0,j[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(r.c))},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac}),t})();const k=[{provide:i.C,useValue:r.n},{provide:i.D,useValue:function(){s.makeCurrent(),h.init()},multi:!0},{provide:r.c,useFactory:function(){return Object(i.ub)(document),document},deps:[]}],N=Object(i.S)(i.W,"browser",k),R=[[],{provide:i.Z,useValue:"root"},{provide:i.m,useFactory:function(){return new i.m},deps:[]},{provide:f,useClass:T,multi:!0,deps:[r.c,i.A,i.C]},{provide:f,useClass:A,multi:!0,deps:[r.c]},[],{provide:_,useClass:_,deps:[d,m,i.c]},{provide:i.F,useExisting:_},{provide:g,useExisting:m},{provide:m,useClass:m,deps:[r.c]},{provide:i.M,useClass:i.M,deps:[i.A]},{provide:d,useClass:d,deps:[f,i.A]},[]];let D=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:i.c,useValue:e.appId},{provide:c,useExisting:i.c},l]}}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(t,12))},t.\u0275mod=i.Jb({type:t}),t.\u0275inj=i.Ib({providers:R,imports:[r.b,i.f]}),t})();"undefined"!=typeof window&&window;var P=n("spgP"),L=n("I/3d");const M={apiKey:"AIzaSyAtrGOjgVOAAikoaOaSksqpfeUPhwv_nQ0",authDomain:"saladejuegos-b1a8e.firebaseapp.com",projectId:"saladejuegos-b1a8e",storageBucket:"saladejuegos-b1a8e.appspot.com",messagingSenderId:"416714409633",appId:"1:416714409633:web:5e691a44035f8150a8d2e0"};var F=n("tyNb");let U=(()=>{class t{constructor(t){this.router=t,this.token=""}ngOnInit(){this.token=localStorage.getItem("token"),null==this.token&&this.router.navigateByUrl("login")}Deslogearse(){localStorage.removeItem("token"),this.router.navigateByUrl("login")}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(F.a))},t.\u0275cmp=i.Fb({type:t,selectors:[["app-nav-bar"]],decls:16,vars:0,consts:[[1,"navbar","navbar-expand-sm","bg-dark","navbar-dark"],["routerLink","../home",1,"navbar-brand","fnt"],["type","button","data-toggle","collapse","data-target","#collapsibleNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","collapsibleNavbar",1,"collapse","navbar-collapse","fnt"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","../quiensoy",1,"nav-link"],["routerLink","../chat",1,"nav-link"],[1,"form-inline","my-2","my-lg-0"],["type","button",1,"btn","btn-outline-primary","btn-lg",3,"click"]],template:function(t,e){1&t&&(i.Ob(0,"nav",0),i.Ob(1,"a",1),i.bc(2,"Sala de Juegos"),i.Nb(),i.Ob(3,"button",2),i.Mb(4,"span",3),i.Nb(),i.Ob(5,"div",4),i.Ob(6,"ul",5),i.Ob(7,"li",6),i.Ob(8,"a",7),i.bc(9,"QuienSoy"),i.Nb(),i.Nb(),i.Ob(10,"li",6),i.Ob(11,"a",8),i.bc(12,"Chat"),i.Nb(),i.Nb(),i.Nb(),i.Ob(13,"form",9),i.Ob(14,"button",10),i.Ub("click",function(){return e.Deslogearse()}),i.bc(15," Logout "),i.Nb(),i.Nb(),i.Nb(),i.Nb())},directives:[F.c],styles:[".fnt[_ngcontent-%COMP%]{font-size:25px}nav[_ngcontent-%COMP%]{position:sticky}"]}),t})(),V=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Fb({type:t,selectors:[["app-home"]],decls:37,vars:0,consts:[["id","myCarousel","data-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["data-target","#myCarousel","data-slide-to","0",1,"active"],["data-target","#myCarousel","data-slide-to","1"],["data-target","#myCarousel","data-slide-to","2"],[1,"carousel-inner"],[1,"carousel-item","active"],["src","assets\\images\\galshir-rock-paper-scissors.gif","alt","...",1,"d-block","w-100"],[1,"carousel-caption","d-none","d-md-block"],[1,"carousel-item"],["src","assets\\images\\tateti.webp","alt","...",1,"d-block","w-100"],["src","...","alt","...",1,"d-block","w-100"],["href","#myCarousel","role","button","data-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["href","#myCarousel","role","button","data-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(t,e){1&t&&(i.Ob(0,"body"),i.Mb(1,"app-nav-bar"),i.Ob(2,"div",0),i.Ob(3,"ol",1),i.Mb(4,"li",2),i.Mb(5,"li",3),i.Mb(6,"li",4),i.Nb(),i.Ob(7,"div",5),i.Ob(8,"div",6),i.Mb(9,"img",7),i.Ob(10,"div",8),i.Ob(11,"h5"),i.bc(12,"First slide label"),i.Nb(),i.Ob(13,"p"),i.bc(14,"Some representative placeholder content for the first slide."),i.Nb(),i.Nb(),i.Nb(),i.Ob(15,"div",9),i.Mb(16,"img",10),i.Ob(17,"div",8),i.Ob(18,"h5"),i.bc(19,"Second slide label"),i.Nb(),i.Ob(20,"p"),i.bc(21,"Some representative placeholder content for the second slide."),i.Nb(),i.Nb(),i.Nb(),i.Ob(22,"div",9),i.Mb(23,"img",11),i.Ob(24,"div",8),i.Ob(25,"h5"),i.bc(26,"Third slide label"),i.Nb(),i.Ob(27,"p"),i.bc(28,"Some representative placeholder content for the third slide."),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(29,"a",12),i.Mb(30,"span",13),i.Ob(31,"span",14),i.bc(32,"Previous"),i.Nb(),i.Nb(),i.Ob(33,"a",15),i.Mb(34,"span",16),i.Ob(35,"span",14),i.bc(36,"Next"),i.Nb(),i.Nb(),i.Nb(),i.Nb())},directives:[U],styles:[".carousel-control-next-icon[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;background-image:url(icons8-next-52.491f3901043b216a0096.png)}.carousel-control-prev-icon[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;background-image:url(icons8-previous-52.11ab4dfc4bc18fba33ff.png)}.fnt[_ngcontent-%COMP%]{font-size:25px}body[_ngcontent-%COMP%]{margin:0;padding:0}#myCarousel[_ngcontent-%COMP%], #myCarousel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:94vh;width:100%}"]}),t})(),q=(()=>{class t{constructor(t){this.router=t,this.token=""}ngOnInit(){this.token=localStorage.getItem("token"),null==this.token&&this.router.navigateByUrl("login")}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(F.a))},t.\u0275cmp=i.Fb({type:t,selectors:[["app-chat"]],decls:21,vars:0,consts:[["id","body"],["id","chat-circle",1,"btn","btn-raised"],["id","chat-overlay"],[1,"material-icons"],[1,"chat-box"],[1,"chat-box-header"],[1,"chat-box-toggle"],[1,"chat-box-body"],[1,"chat-box-overlay"],[1,"chat-logs"],[1,"chat-input"],["type","text","id","chat-input","placeholder","Send a message..."],["type","submit","id","chat-submit",1,"chat-submit"]],template:function(t,e){1&t&&(i.Mb(0,"app-nav-bar"),i.Ob(1,"div",0),i.Ob(2,"div",1),i.Mb(3,"div",2),i.Ob(4,"i",3),i.bc(5,"speaker_phone"),i.Nb(),i.Nb(),i.Ob(6,"div",4),i.Ob(7,"div",5),i.bc(8," ChatBot "),i.Ob(9,"span",6),i.Ob(10,"i",3),i.bc(11,"close"),i.Nb(),i.Nb(),i.Nb(),i.Ob(12,"div",7),i.Mb(13,"div",8),i.Mb(14,"div",9),i.Nb(),i.Ob(15,"div",10),i.Ob(16,"form"),i.Mb(17,"input",11),i.Ob(18,"button",12),i.Ob(19,"i",3),i.bc(20,"send"),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb())},directives:[U],styles:[".fnt[_ngcontent-%COMP%]{font-size:25px}"]}),t})();var H=n("ESM5");const B=[{path:"login",loadChildren:()=>Promise.all([n.e(1),n.e(5)]).then(n.bind(null,"0Mk+")).then(t=>t.LoginModule)},{path:"register",loadChildren:()=>Promise.all([n.e(1),n.e(6)]).then(n.bind(null,"dkTu")).then(t=>t.RegisterModule)},{path:"home",component:V},{path:"quiensoy",component:(()=>{class t{constructor(t,e){this.router=t,this.perfGitHub=e,this.token=""}ngOnInit(){this.token=localStorage.getItem("token"),null==this.token&&this.router.navigateByUrl("login"),this.myProfileGitHub()}myProfileGitHub(){this.perfGitHub.getProfileGitHub().subscribe(t=>{this.githubProfile=t})}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(F.a),i.Lb(H.a))},t.\u0275cmp=i.Fb({type:t,selectors:[["app-quiensoy"]],decls:38,vars:12,consts:[[1,"container-fluid"],[1,"mt-3"],[1,"row"],[1,"col-md-3"],[1,"card"],[1,"border","border-dark"],["alt","",1,"rounded-circle","img-fluid",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["target","_blank",1,"btn","btn-success","btn-sm",3,"href"],[1,"col-md-8","align-self-center"],[1,"card-header"],[1,"badge","badge-primary","mr-3"],[1,"badge","badge-success","mr-3"],[1,"badge","badge-warning","mr-3"],[1,"badge","badge-danger","mr-3"],[1,"list-group"],[1,"list-group-item"],[1,"font-weigh-bold"]],template:function(t,e){1&t&&(i.Mb(0,"app-nav-bar"),i.Ob(1,"div",0),i.Ob(2,"div",1),i.Ob(3,"div",2),i.Ob(4,"div",3),i.Ob(5,"div",4),i.Mb(6,"span",5),i.Mb(7,"img",6),i.Ob(8,"div",7),i.Ob(9,"h4",8),i.bc(10),i.Nb(),i.Ob(11,"p",9),i.bc(12),i.Nb(),i.Ob(13,"a",10),i.bc(14,"Profile"),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(15,"div",11),i.Ob(16,"div",4),i.Ob(17,"div",12),i.Ob(18,"span",13),i.bc(19),i.Nb(),i.Ob(20,"span",14),i.bc(21),i.Nb(),i.Ob(22,"span",15),i.bc(23),i.Nb(),i.Ob(24,"span",16),i.bc(25),i.Nb(),i.Nb(),i.Ob(26,"div",7),i.Ob(27,"ul",17),i.Ob(28,"li",18),i.bc(29," User Name: "),i.Ob(30,"span",19),i.bc(31),i.Nb(),i.Nb(),i.Ob(32,"li",18),i.bc(33),i.Nb(),i.Ob(34,"li",18),i.bc(35),i.Nb(),i.Ob(36,"li",18),i.bc(37),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb()),2&t&&(i.Ab(7),i.Wb("src",e.githubProfile.avatar_url,i.Yb),i.Ab(3),i.cc(e.githubProfile.name),i.Ab(2),i.cc(e.githubProfile.bio),i.Ab(1),i.Wb("href",e.githubProfile.html_url,i.Yb),i.Ab(6),i.dc("",e.githubProfile.followers," Followers"),i.Ab(2),i.dc("",e.githubProfile.public_repos," Repos"),i.Ab(2),i.dc("",e.githubProfile.public_gists," Gists"),i.Ab(2),i.dc("",e.githubProfile.following," Following"),i.Ab(6),i.cc(e.githubProfile.name),i.Ab(2),i.dc(" Location: ",e.githubProfile.location," "),i.Ab(2),i.dc("Email: ",e.githubProfile.blog,""),i.Ab(2),i.dc(" Profile URL: ",e.githubProfile.html_url," "))},directives:[U],styles:[".fnt[_ngcontent-%COMP%]{font-size:25px}div[_ngcontent-%COMP%]{font-family:sans-serif}"]}),t})()},{path:"chat",component:q},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login",pathMatch:"full"}];let z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Jb({type:t}),t.\u0275inj=i.Ib({imports:[[F.d.forRoot(B)],F.d]}),t})(),G=(()=>{class t{constructor(){this.title="salaDeJuegos"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Fb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&i.Mb(0,"router-outlet")},directives:[F.e],styles:[""]}),t})();var K=n("tk/3");let W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Jb({type:t,bootstrap:[G]}),t.\u0275inj=i.Ib({providers:[],imports:[[K.b,D,z,L.b,P.a.initializeApp(M)]]}),t})();Object(i.T)(),N().bootstrapModule(W).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);